â€‹		

## Keyboard

æºç 		ctrl + /

ç›®å½•		[toc]

æ ‡é¢˜		ctrl + æ•°å­—

è¡¨æ ¼		ctrl+t 

æ ‡ç­¾		`code`

ä»£ç å—		ctrl + shift + k

æ°´å¹³çº¿		*** 

è¶…é“¾æ¥		ctrl+k [ç™¾åº¦][www.badu.com] <www.baidu.com>

ä¸‹åˆ’çº¿		ctrl+u

è¡¨æƒ…		ğŸ˜„ 

é«˜äº®		==é«˜äº®==

åŠ ç²—   		 **å†…å®¹**	Ctrl+B 

å€¾æ–œ		*å†…å®¹*  	Ctrl+I 

åˆ é™¤çº¿		~~å†…å®¹~~ 	 Alt+Shift+5 

æ’å…¥å›¾ç‰‡		ctrl+shift+i

æœ‰åºåˆ—è¡¨		æ•°å­—+è‹±æ–‡å°æ•°ç‚¹(.)+ç©ºæ ¼ 

æ— åºåˆ—è¡¨		+ã€- ã€* + ç©ºæ ¼åˆ›å»º



#IDEAå¿«æ·é”®



Ctrl + R, å¯ä»¥æ›¿æ¢	

Ctrl + H,  æ˜¾ç¤ºç±»ç»“æ„å›¾

Ctrlï¼‹Nï¼Œå¯ä»¥å¿«é€Ÿæ‰“å¼€ç±»

Ctrlï¼‹Eï¼Œå¯ä»¥æ˜¾ç¤ºæœ€è¿‘ç¼–è¾‘çš„æ–‡ä»¶åˆ—è¡¨

Ctrlï¼‹F12ï¼Œå¯ä»¥æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„ç»“æ„

Ctrlï¼‹Altï¼‹L æ•´ç†ä»£ç 

Alt+ left/right åˆ‡æ¢ä»£ç è§†å›¾







## æ•°æ®åº“

### SQL	ACID

```
A	åŸå­æ€§
C 	ä¸€è‡´æ€§
I 	éš”ç¦»æ€§
D 	æŒä¹…æ€§
```



### NoSQL	CAP + BASE

```
C	å¼ºä¸€è‡´æ€§
A	é«˜å¯ç”¨æ€§
P	åˆ†åŒºå®¹é”™æ€§
BASE	åŸºæœ¬å¯ç”¨ è½¯çŠ¶æ€ æœ€ç»ˆä¸€è‡´

å®ƒçš„æ€æƒ³æ˜¯é€šè¿‡ç³»ç»Ÿæ”¾æ¾æŸä¸€æ—¶åˆ»æ•°æ®ä¸€è‡´æ€§çš„è¦æ±‚ï¼Œæ¥æ¢å–ç³»ç»Ÿæ•´ä½“ä¼¸ç¼©æ€§å’Œæ€§èƒ½ä¸Šæ”¹è§‚
```



### CAP

å‚è€ƒï¼š[CAP å®šç†çš„å«ä¹‰](http://www.ruanyifeng.com/blog/2018/07/cap.html)





16ä¸ªåº“

select 0-15 	åˆ‡æ¢

DBSIZE		 æŸ¥çœ‹å½“å‰åº“æœ‰å¤šå°‘key

plushDB	æ¸…é™¤å½“å‰åº“çš„key

plushALL	 æ¸…é™¤æ‰€æœ‰åº“çš„key



### SQLè¯­å¥

| æ“ä½œ               | è¯­å¥                                                         |
| ------------------ | :----------------------------------------------------------- |
| è¡¨å…³è”æ›´æ–°         | update u set u.money= u.money+10 <br />from user u <br />inner join dept d on d.id = u.deptId and deptName = 'å¼€å‘' |
| è¡¨å…³è”åˆ é™¤         | delete u <br />from user u<br/>inner join dept d on d.id = u.deptId and deptName = 'å¼€å‘' |
| è¡¨å…³è”æ’å…¥         | insert into user_new(id,name) <br />select  id,name  from user |
| åˆ›å»ºæ–°è¡¨å¹¶èµ‹äºˆæ•°æ® | select id,name <br />into user_new from user                 |



### ç´¢å¼•é¢è¯•é¢˜

å‚è€ƒ: [ç´¢å¼•é¢è¯•é¢˜](https://www.cnblogs.com/Brambling/p/6754993.html)



### ROW_NUMBER() OVER()å‡½æ•°ç”¨æ³•è¯¦è§£ ï¼ˆåˆ†ç»„æ’åº ä¾‹å­å¤šï¼‰

å‚è€ƒï¼š[ROW_NUMBER() OVER()å‡½æ•°ç”¨æ³•è¯¦è§£](https://blog.csdn.net/qq_25221835/article/details/82762416)

```sql
-- æ ¹æ®dept_idåˆ†ç»„
select name,dept_id,salary,row_number() over (partition by dept_id order by salary desc) rank
from user t
```





### SQL Server çŸ¥è¯†ç‚¹

```sql
ä¸‰å…ƒè¿ç®—

	iif(å¸ƒå°”,å€¼1,å€¼2)		

æˆªå–
	substring(å€¼ï¼Œå¼€å§‹ä½ç½®ï¼Œé•¿åº¦)
	select substring('123456',2,2)

```



### SQL Server JSONè½¬è¡¨

```sql
declare @users varchar(max) = '[{"id":1,"name":"Cps"},{"id":2,"name":"Xy"}]'		

SELECT *  INTO #users
FROM OPENJSON(@users)
WITH (
    id  INT,
    name varchar(200)
)
```


### SQL Server è¡¨æ‹¼æ¥SQL

```sql
-- éœ€è¦ä¿®æ”¹çš„æ’ç­ï¼ˆé‚£äº›å­˜åœ¨çš„æ•°æ®ï¼‰
DECLARE @update_update VARCHAR(MAX)=''
SELECT @update_update+='UPDATE kt_paiba SET '+col_name+'='''+isnull(value,'')+''',gly_no = '''+@operator+''' WHERE rq='''+year_month+''' AND user_serial='+CAST(user_serial AS VARCHAR(10))+';'
FROM #result_update a

-- æ‰§è¡Œæ‹¼æ¥çš„SQL
EXEC(@update_update)	
```



### SQL Server è¡Œä¸“åˆ—

å‚è€ƒï¼š[SQL Server è¡Œä¸“åˆ—](https://www.cnblogs.com/Rawls/p/11027413.html)



### SQL Server å­—æ®µè¡Œè½¬åˆ—

```sql
-- æ‹†åˆ†æ•°æ®ï¼Œè¡Œè½¬åˆ—
-- APPLYæœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ä¸ªæ˜¯OUTER APPLYï¼Œä¸€ä¸ªæ˜¯CROSS APPLYï¼ŒåŒºåˆ«åœ¨äºæŒ‡å®šOUTERï¼Œæ„å‘³ç€ç»“æœé›†ä¸­å°†åŒ…å«ä½¿å³è¡¨è¡¨è¾¾å¼ä¸ºç©ºçš„å·¦è¡¨è¡¨è¾¾å¼ä¸­çš„è¡Œï¼Œè€ŒæŒ‡å®šCROSSï¼Œåˆ™ç›¸åï¼Œç»“æœé›†ä¸­ä¸åŒ…å«ä½¿å³è¡¨è¡¨è¾¾å¼ä¸ºç©ºçš„å·¦è¡¨è¡¨è¾¾å¼ä¸­çš„è¡Œã€‚

SELECT
	v.value
FROM zt_glbc t
CROSS APPLY STRING_SPLIT(CAST(t.Valuse AS VARCHAR(MAX)), ',') v
WHERE bh = 13
```



### SQL Server åˆ¤æ–­è¡¨æˆ–å­˜å‚¨è¿‡ç¨‹

```sql
--åˆ¤æ–­è¡¨
if   object_id('tb_table') is not null  
	print 'exist' 
else 
	print'not exist' 

--åˆ¤æ–­å­˜å‚¨è¿‡ç¨‹
if exists (select 1
          from sysobjects
          where  id = object_id('bdSettlementDept')
          and type in ('P','PC'))
   drop procedure bdSettlementDept
go
```



### SQL Serverå­˜å‚¨è¿‡ç¨‹

```sql
USE scm_main;
-- éœ€è¦å…ˆåˆ›å»ºæ‹†åˆ†å­—ç¬¦ä¸²å­˜å‚¨è¿‡ç¨‹ï¼ˆsplit_strï¼‰
if exists (select 1
          from sysobjects
          where  id = object_id('bd_proc_schedule_gui_lv')
          and type in ('P','PC'))
DROP PROCEDURE bd_proc_schedule_gui_lv
GO
CREATE PROCEDURE bd_proc_schedule_gui_lv
	@user_serial_str varchar(max),
	@begin_date date,
	@end_date date,
	@ban_ci int,
	@ip varchar(max),
	@operator varchar(max)
as
BEGIN

-- å…³é—­æ‰“å°å—å½±å“è¡Œæ•°
SET NOCOUNT ON;


-- å®šä¹‰è¿”å›å—å½±å“è¡Œæ•°ç»“æœ
	declare @result int = 0;


	--  å¼‚å¸¸æ‰‘æ‰æœºåˆ¶
		BEGIN TRY

			CREATE TABLE #ban_ci(
				id INT IDENTITY,
				name VARCHAR(20)
			)

			CREATE TABLE #user_serial(
				id INT IDENTITY,
				user_serial VARCHAR(20)
			)

			CREATE TABLE #result(
			  user_serial  INT,
			  col_name VARCHAR(20),
			  value VARCHAR(100),
			  date DATE,
			  year_month VARCHAR(10)
			)

			CREATE TABLE #result_insert(
			  user_serial  INT,
			  col_name VARCHAR(20),
			  value VARCHAR(100),
			  date DATE,
			  year_month VARCHAR(10)
			)

			CREATE TABLE #result_update(
			  user_serial  INT,
			  col_name VARCHAR(20),
			  value VARCHAR(100),
			  date DATE,
			  year_month VARCHAR(10)
			)


			CREATE TABLE #kt_paiba (
			  user_serial bigint NOT NULL,
			  rq nvarchar(10) NOT NULL,
			  d1 varchar(100) NULL,
			  d2 varchar(100) NULL,
			  d3 varchar(100) NULL,
			  d4 varchar(100) NULL,
			  d5 varchar(100) NULL,
			  d6 varchar(100) NULL,
			  d7 varchar(100) NULL,
			  d8 varchar(100) NULL,
			  d9 varchar(100) NULL,
			  d10 varchar(100) NULL,
			  d11 varchar(100) NULL,
			  d12 varchar(100) NULL,
			  d13 varchar(100) NULL,
			  d14 varchar(100) NULL,
			  d15 varchar(100) NULL,
			  d16 varchar(100) NULL,
			  d17 varchar(100) NULL,
			  d18 varchar(100) NULL,
			  d19 varchar(100) NULL,
			  d20 varchar(100) NULL,
			  d21 varchar(100) NULL,
			  d22 varchar(100) NULL,
			  d23 varchar(100) NULL,
			  d24 varchar(100) NULL,
			  d25 varchar(100) NULL,
			  d26 varchar(100) NULL,
			  d27 varchar(100) NULL,
			  d28 varchar(100) NULL,
			  d29 varchar(100) NULL,
			  d30 varchar(100) NULL,
			  d31 varchar(100) NULL,
			  gly_no nvarchar(10) NULL,
			  year int ,
			  month int ,
			)


		-- å¼€å¯äº‹åŠ¡
			BEGIN TRAN


				-- æ‹†åˆ†ç”¨æˆ·ç¼–å·ä¿å­˜ä¸´æ—¶è¡¨ä¸­
				insert into #user_serial
				select * from string_split(@user_serial_str,',');

				-- å…ˆæ¸…é™¤è¡¨ä¸­å­˜åœ¨çš„æ•°æ®
				--delete a
				--from kt_paiba a
				--inner join #user_serial b on a.user_serial = b.user_serial
				--where a.rq = CONVERT(varchar(7),@begin_date,120) or a.rq = CONVERT(varchar(7),@end_date,120)


				-- æ‹†åˆ†ç­æ¬¡ä¿å­˜ä¸´æ—¶è¡¨ä¸­
				INSERT INTO #ban_ci
				SELECT v.value FROM zt_glbc t CROSS APPLY STRING_SPLIT(CAST(t.Valuse AS VARCHAR(MAX)), ',') v WHERE bh = @ban_ci

				declare @lx int;
				select @lx = lx from zt_glbc where bh = @ban_ci;

				-- è§„å¾‹ç­æ¬¡ç±»å‹ï¼šå‘¨
				IF @lx = 1 BEGIN
					INSERT INTO #result (user_serial, col_name, value, date, year_month)
					select t1.user_serial,t2.* from  (select * from #user_serial) t1,
					(
						SELECT 'd'+CAST(d.date_day AS VARCHAR(2)) colName, b.name,d.date,CONVERT(VARCHAR(7),date,120) date_month
						FROM bd_sys_dim_date d
						LEFT JOIN #ban_ci b ON b.id=d.date_week
						WHERE date >= @begin_date AND date <= @end_date
					) t2
				END
				-- æŒ‰æœˆæˆ–è€…æ—¥
				ELSE BEGIN
					INSERT INTO #result (user_serial, col_name, value, date, year_month)
					select t1.user_serial,t2.* from  (select * from #user_serial) t1,
					(
						SELECT 'd'+CAST(d.date_day AS VARCHAR(2)) colName, b.name,d.date,CONVERT(VARCHAR(7),date,120) date_month
						FROM bd_sys_dim_date d
						LEFT JOIN #ban_ci b ON b.id=d.date_day
						WHERE date >= @begin_date AND date <= @end_date
					) t2
				END


				-- select * from A,B ä¸æŒ‡å®šæ¡ä»¶é‚£ä¹ˆä¼šäº§ç”ŸAçš„æ‰€æœ‰Bæ•°æ®ï¼Œåˆšå¥½æ»¡è¶³éœ€æ±‚
				--INSERT INTO #result (user_serial, col_name, value, date, year_month)
				--select t1.user_serial,t2.* from  (select * from #user_serial) t1,
				--(
				--	SELECT 'd'+CAST(d.date_day AS VARCHAR(2)) colName, b.name,d.date,CONVERT(VARCHAR(7),date,120) date_month
				--	FROM bd_sys_dim_date d
				--	LEFT JOIN #ban_ci b ON b.id=d.date_week
				--	WHERE date >= @begin_date AND date <= @end_date
				--) t2


				-- éœ€è¦æ–°å¢çš„æ•°æ® #result_insert
				insert into #result_insert(user_serial,col_name,value,date,year_month)
				select a.user_serial,a.col_name,a.value,a.date,a.year_month
				from #result a
				inner join (
					select user_serial,convert(varchar(7),date,120) year_month from #result
					except
					select user_serial,rq as year_month from kt_paiba
				) b on a.user_serial = b.user_serial and a.year_month = b.year_month


				-- éœ€è¦ä¿®æ”¹çš„æ•°æ® #result_update
				insert into #result_update(user_serial,col_name,value,date,year_month)
				select a.user_serial,a.col_name,a.value,a.date,a.year_month
				from #result a
				inner join (
					select user_serial,convert(varchar(7),date,120) year_month from #result
					Intersect
					select user_serial,rq as year_month from kt_paiba
				) b on a.user_serial = b.user_serial and a.year_month = b.year_month


				-- select * from #result_insert
				-- select * from #result_update
				-- select * from #result

				-- å°†æ’å…¥çš„æ•°æ®å­˜å…¥åˆ°ä¸´æ—¶æ’ç­è¡¨ä¸­
				-- ä¸‹é¢ä¸¤æ®µä»£ç å°†ç«–ç€çš„æ•°æ®è½¬ä¸ºäº†æ¨ªç€çš„æ•°æ®
				INSERT INTO #kt_paiba (user_serial, rq, gly_no, year, month)
				SELECT distinct a.user_serial,CONVERT(VARCHAR(7),date,120),@operator,YEAR(date),MONTH(date)
				FROM #result_insert a


				-- å¾ªç¯æ‹¼æ¥éœ€è¦æ›´æ–°ä¸´æ—¶è¡¨ä¸­çš„å­—æ®µ
				-- æŸ¥è¯¢ï¼ˆå¾ªç¯ï¼‰æ‹¼æ¥æ•°æ®ï¼ˆç«–ç€å¾ªç¯ï¼‰
				DECLARE @update_insert VARCHAR(MAX)=''
				SELECT @update_insert+='UPDATE #kt_paiba SET '+col_name+'='''+value+''',gly_no = '''+@operator+''' WHERE rq='''+year_month+''' AND user_serial='+CAST(a.user_serial AS VARCHAR(10))+';'
				FROM #result_insert a


				-- æ‰§è¡Œæ‹¼æ¥çš„è¯­å¥
				EXEC(@update_insert)


				-- ä»ä¸´æ—¶è¡¨æ’å…¥åˆ°çœŸå®è¡¨ä¸­
				insert into kt_paiba
				select * from #kt_paiba


				-- éœ€è¦ä¿®æ”¹çš„æ’ç­ï¼ˆé‚£äº›å­˜åœ¨çš„æ•°æ®ï¼‰
				DECLARE @update_update VARCHAR(MAX)=''
				SELECT @update_update+='UPDATE kt_paiba SET '+col_name+'='''+value+''',gly_no = '''+@operator+''' WHERE rq='''+year_month+''' AND user_serial='+CAST(user_serial AS VARCHAR(10))+';'
				FROM #result_update a


				-- æ‰§è¡Œæ‹¼æ¥çš„SQL
				EXEC(@update_update)


				-- æ–°å¢çš„ç”Ÿæˆæ—¥å¿—è®°å½•
				insert into wt_log(log_fun,log_type,log_detail,gly_no,log_time,log_computer,log_ip,regserial)
				select distinct 13,1,isnull(@operator,'')+'å½•å…¥'+isnull(b.user_lname,'')+isnull(a.year_month,'')+'æ’ç­',isnull(@operator,''),getdate(),'',isnull(@ip,''),''
				from #result_insert a
				inner join dt_user b on a.user_serial = b.user_serial

				set @result = @result + @@ROWCOUNT;


				--æ›´æ–°çš„ç”Ÿæˆæ—¥å¿—è®°å½•
				insert into wt_log(log_fun,log_type,log_detail,gly_no,log_time,log_computer,log_ip,regserial)
				select distinct 13,1,isnull(@operator,'')+'æ›´æ–°'+isnull(b.user_lname,'')+isnull(a.year_month,'')+'æ’ç­',isnull(@operator,''),getdate(),'',isnull(@ip,''),''
				from #result_update a
				inner join dt_user b on a.user_serial = b.user_serial


				set @result = @result + @@ROWCOUNT;


		--  æäº¤äº‹åŠ¡
			COMMIT TRAN

	--  ç»“æŸå¼‚å¸¸æ•æ‰
		END TRY

	--  å¼‚å¸¸å¤„ç†
		BEGIN CATCH
			DECLARE @errStr VARCHAR(MAX) = ERROR_MESSAGE();
			IF XACT_STATE() <> 0
			BEGIN
			  ROLLBACK TRANSACTION;
			  RAISERROR (@errStr, 16, 1);
			END;
			ROLLBACK TRAN;
		END CATCH



--  æ¸…é™¤ä¸´æ—¶è¡¨
	select @result as result
	DROP TABLE #ban_ci
	DROP TABLE #user_serial
	DROP TABLE #kt_paiba

-- æ‰“å¼€æ‰“å°å—å½±å“è¡Œæ•°
SET NOCOUNT OFF;
END;

```



### Oracle ä½¿ç”¨SQLå¤‡ä»½ä¸æ¢å¤

```sql
1.1 å®Œå…¨å¤‡ä»½
exp demo/demo@orcl buffer=1024 file=dï¼š\back.dmp full=y

1.2 å®Œå…¨è¿˜åŸ
imp demo/demo@orcl file=d:\back.dmp full=y ignore=y log=D:\implog.txt

2.1 å¯¼å‡ºæŒ‡å®šè¡¨
exp demo/demo@orcl file=d:\backup2.dmp tables=(teachers,students)

2.2 å¯¼å…¥æŒ‡å®šè¡¨
imp demo/demo@orcl file=d:\backup2.dmp tables=(teachers,students)
```

è¯¦æƒ…ï¼šhttps://blog.csdn.net/yztezhl/article/details/80451046



### SQL Server ç•™ä¸‹çš„å‘

```
å¾ªç¯æŸ¥è¯¢æ•°æ®èµ‹ç»™å˜é‡æ—¶ï¼Œä¸€å®šè¦åŠ ä¸Š isnull(å­—æ®µ,'') ï¼Œè¿™æ ·å³ä½¿å½“å‰æ²¡æœ‰æŸ¥åˆ°ï¼Œä¹Ÿä¸ä¼šå½±å“ä¸‹æ¬¡éå†çš„æ•°æ®
```



### SQL Server Mergeç”¨æ³•

å‚è€ƒï¼š[Merge](https://www.cnblogs.com/Vincent-yuan/p/11521229.html)

```sql

MERGE target_table USING source_table
ON merge_condition
WHEN MATCHED
    THEN update_statement
WHEN NOT MATCHED
    THEN insert_statement
WHEN NOT MATCHED BY SOURCE
    THEN DELETE;
------------------------------------------------
MERGE sales.category t 
    USING sales.category_staging s
ON (s.category_id = t.category_id)
WHEN MATCHED
    THEN UPDATE SET 
        t.category_name = s.category_name,
        t.amount = s.amount
WHEN NOT MATCHED BY TARGET 
    THEN INSERT (category_id, category_name, amount)
         VALUES (s.category_id, s.category_name, s.amount)
WHEN NOT MATCHED BY SOURCE 
    THEN DELETE;
    
```



### SQL Serverã€My SQLã€Oracle æ•°æ®åº“åˆ†é¡µ

å–å‡ºsqlè¡¨ä¸­ç¬¬31åˆ°40çš„è®°å½•ï¼ˆä»¥è‡ªåŠ¨å¢é•¿IDä¸ºä¸»é”®ï¼‰

> MySQL

```sql
select * from t order by id limit 0,10
```



> Oracle

```sql
select * from (select rownum r,* from t where r<=40) where r>30
```

â€‹	

> SQL Server

```sql
select top 10 * from t where id not in (select top 30 id from t order by id ) orde by id

select top 10 * from t where id in (select top 40 id from t order by id) order by id desc


select * from t order by id
offset (4-1) * 10 rows
fetch next @pageSize rows only;
```



## Linux



### CentOS 6ç³»åˆ—å¼¹æ€§äº‘æœåŠ¡å™¨å¦‚ä½•å®‰è£…å›¾å½¢åŒ–ç•Œé¢ï¼Ÿ

1. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹å½“å‰æ“ä½œç³»ç»Ÿæä¾›çš„å®‰è£…ç»„ä»¶ã€‚

   ```Linux
   # yum grouplist
   ```

2. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£…å›¾å½¢æ¡Œé¢ç»„ä»¶ã€‚

   ```Linux
   # yum groupinstall 'Desktop' -y
   ```

3. æ‰§è¡Œå‘½ä»¤ï¼Œåˆ‡æ¢ä¸ºå›¾å½¢æ“ä½œé¡µé¢

   ```Linux
   # init 5
   ```

   

   ## VMç½‘ç»œé€‚é…å™¨

   ![](image/%E7%BD%91%E7%BB%9C%E9%80%82%E9%85%8D%E5%99%A8.png)



**æ¡¥æ¥æ¨¡å¼ï¼š**ç›´æ¥è¿åˆ°ç‰©ç†ç½‘ç»œï¼Œå°±æ˜¯ç›´æ¥åˆ†é…IPåœ°å€ï¼ŒåŒç½‘ç»œä¸‹ï¼Œåˆ«äººä¹Ÿå¯ä»¥è®¿é—®è¯¥IP

**NATæ¨¡å¼ï¼š**æœ¬æœºä¼šäº§ç”Ÿå¦ä¸€ä¸ªIPåœ°å€ï¼Œè¯¥IPä¸è™šæ‹Ÿæœºæœ‰å…³è”ï¼ŒåŒç½‘ç»œä¸‹ï¼Œåˆ«äººæ— æ³•è®¿é—®è¯¥è™šæ‹ŸæœºIPï¼Œä½†è™šæ‹Ÿæœºå¯ä»¥è®¿é—®åˆ«äººç”µè„‘

**æ³¨æ„ï¼š**ä¸€èˆ¬éƒ½ä¼šç”¨NATæ¨¡å¼ï¼Œä½¿ç”¨NATæ¨¡å¼ï¼Œéœ€è¦åœ¨è™šæ‹Ÿæœºä¸Šç‚¹å‡»å³ä¸Šæ–¹çš„ç½‘ç»œï¼Œè¯¥è™šæ‹Ÿæœºå°±å¯ä»¥è¿ç½‘äº†

![](/image/%E8%BF%9E%E6%8E%A5%E7%BD%91%E7%BB%9C.png)



### VM Toolså®‰è£…æ­¥éª¤

![](image/vmTools%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4.png)

**è§£å‹/å‹ç¼©ï¼š**tar -zxvf æ–‡ä»¶å 





### Linuxèµ‹äºˆæƒé™

```Linux
chmod 777 xx
```

### Linuxè¿›ç¨‹ç›¸å…³

```linux
ps -auxf
ps -ef | grep tomcat
ps -ef | grep java 
kill -9 è¿›ç¨‹å·
```

### Linuxåå°è¿è¡Œé¡¹ç›®

```
nohup ./startup.sh &
nohup java -jar weChat.jar &
```

### Linuxç½®JAVAç¯å¢ƒ

/etc/profile æ–‡ä»¶

```Linux
#JAVAçš„JDKé…ç½®
export JAVA_HOME=/usr/java/jdk1.8.0_102
export PATH=$PATH:$JAVA_HOME/bin
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
```

### Linuxå®‰è£…ysqlæ•°æ®åº“

**å®‰è£…æ•™ç¨‹**	

â€‹		https://www.cnblogs.com/sh635208/p/10018334.html

**æ— æ³•è¿œç¨‹**

â€‹		![](image/mysql%E6%97%A0%E6%B3%95%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5.png)

1. åœ¨è£…æœ‰MySQLçš„æœºå™¨ä¸Šç™»å½•MySQL mysql -u root -på¯†ç 
2. æ‰§è¡Œ `use mysql;`
3. æ‰§è¡Œ `update user set host = '%' where user = 'root';` è¿™ä¸€å¥æ‰§è¡Œä¼šæŠ¥é”™ï¼Œä¸ç”¨ç®¡å®ƒ
4. æ‰§è¡Œ `FLUSH PRIVILEGES;`

**æ³¨: ç¬¬å››æ­¥æ˜¯åˆ·æ–°MySQLçš„æƒé™ç›¸å…³è¡¨ï¼Œä¸€å®šä¸è¦å¿˜äº†ï¼Œå°±è¿™ä¸€æ­¥æœ€é‡è¦**



### MySQLæ•°æ®æ€»æ˜¾ç¤º '' ? ''

1. ç¼–è¾‘my.cnfæ–‡ä»¶ é»˜è®¤è·¯å¾„éƒ½åœ¨ `vi /etc/my.cnf`

2. æ·»åŠ é…ç½®

   ```Linux
   [mysqld]
   character-set-server=utf8 //æ·»åŠ è¯¥è¯­å¥
   lower_case_table_names=1  //æ”¹é…ç½®å¯ä»¥å¿½ç•¥å¤§å°å†™
   
   [client]
   default-character-set=utf8 //æ·»åŠ è¯¥è¯­å¥
   ```

3. è¿è¡Œä»£ç ï¼Œé‡å¯MySQLæœåŠ¡

   ```Linux
   service mysqld restart
   ```





## Windows



### JAVA ç‰ˆæœ¬

> JAVA SE æ ‡å‡†ç‰ˆå¼€å‘ ä¸»è¦ç”¨äºæ¡Œé¢ç¨‹åº,æ§åˆ¶å°å¼€å‘(JFC)

> JAVA EE ä¼ä¸šçº§å¼€å‘ï¼Œä¸»è¦ç”¨äºwebç«¯(JSP,EJB)       

> JAVA MEåµŒå…¥å¼å¼€å‘(æ‰‹æœº,å°å®¶ç”µ)



### JAVA8 çš„Stream APIä½¿ç”¨

å‚è€ƒï¼š[JAVA8 çš„Stream APIä½¿ç”¨](https://www.cnblogs.com/jimoer/p/10995574.html)



### JAVAåå°„æœºåˆ¶

å‚è€ƒï¼š[JAVAåå°„æœºåˆ¶](https://www.cnblogs.com/hechenhao/p/8039639.html)  [JAVAåå°„æœºåˆ¶](https://blog.csdn.net/liujiahan629629/article/details/18013523?depth_1-utm_source=distribute.pc_relevant.none-task&utm_source=distribute.pc_relevant.none-task)  

```java
private static object getFieldValueByName(String fieldName, object o) throws Exception {
	String firstLetter = fieldName.substring(0,1).toUpperCase() ;
	String getter = "get" + firstLetter + fieldName.substring(1);
	Method method = o.getClass().getMethod(getter, new Class[] {});
	Object value = method.invoke(o, new Object[] {});
    System.out.println("fieldName>>>>>>"+filedName+" val: "+String.valueOf(value));
	return value;
}
```



### JAVAå¤šçº¿ç¨‹

å‚è€ƒï¼š[JAVAå¤šçº¿ç¨‹](https://blog.csdn.net/zl1zl2zl3/article/details/81868173)  [å¯¹è±¡é”ã€é”æ± ã€ç­‰å¾…æ± ](https://blog.csdn.net/u014561933/article/details/58639411)



### Executorsåˆ›å»ºçš„4ç§çº¿ç¨‹æ± çš„ä½¿ç”¨ 

1. newCachedThreadPoolåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹ã€‚
2. newFixedThreadPool åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œå¯æ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚
3. newScheduledThreadPool åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œæ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œã€‚
4. newSingleThreadExecutor åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œã€‚



### å¤šçº¿ç¨‹ä½¿ç”¨

```java
ExecutorService cachedThreadPool = Executors.newCachedThreadPool();
            Integer numThread = 200;//æ¯ä¸ªçº¿ç¨‹æºå¸¦200æ¡æ•°æ®
            Integer count = list.size() % numThread == 0 ? list.size()/numThread : (list.size()/numThread + 1);
            //è®°å½•çº¿ç¨‹ä¸ªæ•°
            CountDownLatch latch = new CountDownLatch(count);
            for (int i = 0; i < count; i++) {
                int index = i;
                cachedThreadPool.execute(new Runnable() {
                    @Override
                    public void run() {
                        try {
                            if(index == count-1){//æœ€åä¸€æ¬¡
                                List<ImportAttendance2> subList = list.subList(index * numThread,list.size());
                                importAttendanceMapper.importAttendanceData(subList);
                            }else{//é™¤äº†æœ€åä¸€æ¬¡
                                List<ImportAttendance2> subList = list.subList(index * numThread,index * numThread + numThread);
                                importAttendanceMapper.importAttendanceData(subList);
                            }
                        }catch (Exception e){
                            e.printStackTrace();
                        }finally {
                            latch.countDown();
                        }
                    }
                });
            }
            //ç­‰å¾…æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œ
            latch.await();
            //å¼‚æ­¥æ‰§è¡ŒåŒæ­¥å­˜å‚¨è¿‡ç¨‹
            cachedThreadPool.execute(new Runnable() {
                @Override
                public void run() {
                    importAttendanceMapper.execAttendanceProc();
                }
            });

```



### JDBCé¢è¯•é¢˜

å‚è€ƒï¼š[JDBCé¢è¯•é¢˜](https://www.cnblogs.com/kevinf/p/3705148.html)



### MyBatisé¢è¯•é¢˜

å‚è€ƒï¼š[MyBatisé¢è¯•é¢˜](https://blog.csdn.net/a745233700/article/details/80977133)



### Springé¢è¯•é¢˜

å‚è€ƒï¼š[Springé¢è¯•é¢˜](https://blog.csdn.net/a745233700/article/details/80959716)



### SpringMVCé¢è¯•é¢˜

å‚è€ƒï¼š[ SpringMVCé¢è¯•é¢˜](https://blog.csdn.net/a745233700/article/details/80963758?depth_1-utm_source=distribute.pc_relevant.none-task&utm_source=distribute.pc_relevant.none-task)



### SpringBooté¢è¯•

å‚è€ƒï¼š[SpringBooté¢è¯•é¢˜](https://blog.csdn.net/yuzongtao/article/details/84295732)



### SpringBoot+SpringCloudé¢è¯•é¢˜æ•´ç†

å‚è€ƒï¼š[SpringBoot+SpringCloudé¢è¯•é¢˜æ•´ç†](https://blog.csdn.net/qq_40117549/article/details/84944840?depth_1-utm_source=distribute.pc_relevant.none-task&utm_source=distribute.pc_relevant.none-task ) 



### Shiro

å‚è€ƒï¼š[Shiroé¢è¯•çŸ¥è¯†ç‚¹](https://www.jianshu.com/p/e6ca8cd7d823)

```
Apache Shiroæ˜¯Javaçš„ä¸€ä¸ªå®‰å…¨(æƒé™)æ¡†æ¶

Shiroå¯ä»¥éå¸¸å®¹æ˜“çš„å¼€å‘å‡ºè¶³å¤Ÿå¥½çš„åº”ç”¨,å…¶ä¸ä»…å¯ä»¥ç”¨åœ¨JavaSEç¯å¢ƒ,ä¹Ÿå¯ä»¥ç”¨åœ¨JavaEEç¯å¢ƒ

Shiroå¯ä»¥å®Œæˆ:è®¤è¯ã€æˆæƒã€åŠ å¯†ã€ä¼šè¯ç®¡ç†ã€ä¸Webé›†æˆã€ç¼“å­˜ç­‰
```



ä½¿ç”¨MD5ç›å€¼åŠ å¯†ï¼š

```java
1.åœ¨doGetAuthenticationInfo æ–¹æ³•è¿”å›åˆ›å»ºSimpleAuthenticationInfoå¯¹è±¡çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨SimpleAuthenticionInfo("è®¤è¯å®ä½“ä¿¡æ¯","å¯†ç ","ç›å€¼","Realm")æ„é€ å™¨ï¼ŒrealName â†’ getName()
2.ä½¿ç”¨ByteSource.Util,byte("ç›å€¼") è®¡ç®—ç›å€¼ï¼ˆä¸€èˆ¬ä½¿ç”¨IDï¼Œå”¯ä¸€æ ‡è¯†ï¼‰
3.ä½¿ç”¨New SimpleHash("åŠ å¯†ç®—æ³•","å¯†ç ","ç›å€¼","åŠ å¯†æ¬¡æ•°");è®¡ç®—ç›å€¼åŠ å¯†åçš„å€¼
```



è®¤è¯æµç¨‹

```java
1.é¦–å…ˆæ”¶é›†ä¿¡æ¯ï¼Œåˆ›å»ºUsernamePasswordTokenå¯¹è±¡ï¼Œå†ç”±SecurityUtilså¾—åˆ°Subjectå¯¹è±¡ï¼Œè°ƒç”¨å®ƒçš„loginæ–¹æ³•ï¼ŒåŒæ—¶ä¼ å‚UsernamePasswordTokenå¯¹è±¡ï¼Œå…¶ä¼šè‡ªåŠ¨å§”æ‰˜ç»™SecurityManager
2.SecurityManager è´Ÿè´£çœŸæ­£çš„èº«ä»½éªŒè¯é€»è¾‘ï¼Œå®ƒä¼šå§”æ‰˜ç»™ Authenticator è¿›è¡Œèº«ä»½éªŒè¯ï¼› 
ï¼ˆAuthenticator æ‰æ˜¯çœŸæ­£çš„èº«ä»½éªŒè¯è€…ï¼Œå®ƒä¼šè°ƒç”¨è®¤è¯ç­–ç•¥å¯¹Realmè¿›è¡Œèº«ä»½éªŒè¯ï¼ŒåŒæ—¶æŠŠtokenä¼ å…¥Realmï¼Œä»Realmè·å–åˆ†èº«éªŒè¯ä¿¡æ¯ï¼Œè¿”å›SimpleaAuthenticaionInfoå¯¹è±¡ï¼Œè¿›è¡Œé€»è¾‘åˆ¤æ–­ï¼‰
3.Authenticator æ‰æ˜¯çœŸæ­£çš„èº«ä»½éªŒè¯è€…ï¼ŒShiro API ä¸­æ ¸å¿ƒçš„èº«ä»½è®¤è¯å…¥å£ç‚¹ï¼Œæ­¤å¤„å¯ä»¥è‡ªå®šä¹‰æ’å…¥è‡ªå·±çš„å®ç°ï¼›
4.Authenticator å¯èƒ½ä¼šå§”æ‰˜ç»™ç›¸åº”çš„ AuthenticationStrategy è¿›è¡Œå¤š Realm èº«ä»½éªŒè¯ï¼Œé»˜è®¤ ModularRealmAuthenticator ä¼šè°ƒç”¨ AuthenticationStrategy è¿›è¡Œå¤š Realm èº«ä»½éªŒè¯ï¼› 
5.Authenticator ä¼šæŠŠç›¸åº”çš„ token ä¼ å…¥ Realmï¼Œä» Realm è·å– èº«ä»½éªŒè¯ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰è¿”å›/æŠ›å‡ºå¼‚å¸¸è¡¨ç¤ºèº«ä»½éªŒè¯å¤±è´¥äº†ã€‚æ­¤å¤„ å¯ä»¥é…ç½®å¤šä¸ªRealmï¼Œå°†æŒ‰ç…§ç›¸åº”çš„é¡ºåºåŠç­–ç•¥è¿›è¡Œè®¿é—®ã€‚
```



æˆæƒæµç¨‹

```java
1.é¦–å…ˆè°ƒç”¨ Subject.isPermitted*/hasRole* æ¥å£ï¼Œå…¶ä¼šå§”æ‰˜ç»™ SecurityManagerï¼Œè€Œ SecurityManager æ¥ç€ä¼šå§”æ‰˜ç»™ Authorizer
2.Authorizeræ˜¯çœŸæ­£çš„æˆæƒè€…ï¼Œå¦‚æœè°ƒç”¨å¦‚ isPermitted(â€œuser:viewâ€)ï¼Œå…¶é¦–å…ˆä¼šé€šè¿‡PermissionResolver æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆç›¸åº”çš„ Permission å®ä¾‹ï¼› 
3.åœ¨è¿›è¡Œæˆæƒä¹‹å‰ï¼Œå…¶ä¼šè°ƒç”¨ç›¸åº”çš„ Realm è·å– Subject ç›¸åº”çš„è§’è‰²/æƒé™ç”¨äºåŒ¹é…ä¼ å…¥çš„è§’è‰²/æƒé™ï¼›ï¼ˆæˆæƒï¼‰
ï¼ˆè¿”å›SimpleAuthorizationInfoå¯¹è±¡ï¼ŒAuthorizer ä¼šåˆ¤æ–­Realmçš„è§’è‰²/æƒé™æ˜¯å¦å’Œä¼ å…¥çš„åŒ¹é…ï¼Œï¼‰
4.Authorizer ä¼šåˆ¤æ–­Realmçš„è§’è‰²/æƒé™æ˜¯å¦å’Œä¼ å…¥çš„åŒ¹é…ï¼Œå¦‚æœæœ‰å¤šä¸ªRealmï¼Œä¼šå§”æ‰˜ç»™ ModularRealmAuthorizerè¿›è¡Œå¾ªç¯åˆ¤æ–­ï¼Œå¦‚æœåŒ¹é…å¦‚isPermitted*/hasRole*ä¼šè¿”å›trueï¼Œå¦åˆ™è¿”å›falseè¡¨ç¤º æˆæƒå¤±è´¥ã€‚
```



### å‰ç«¯çŸ¥è¯†ç‚¹

> jsè§£å†³ä¹±ç é—®é¢˜

```js
window.open('revoke/export?'+'&userName='+encodeURIComponent(this.userName));
```



> å¯¹è±¡ä½¿ç”¨key

```
p{
	//ä¸æ¢è¡Œ
	white-space: nowrap
}

var user = {};
user["id"] = 1;
console.log(user); //{id:1}

//å¦å¤–å¤šæä¸€ä¸ªçŸ¥è¯†ç‚¹
returnã€breakä¸èƒ½ç»ˆæ­¢forEach()å¾ªç¯
```



> å¼•ç”¨JSé™æ€æ•°æ®

```js
/* jsæ•°æ® */
let list_data = [
  { id: '1', name: 'ç”²', age: '18' },
  { id: '2', name: 'ä¹™', age: '14' },
  { id: '3', name: 'ä¸™', age: '22' },
  { id: '4', name: 'ä¸™', age: '17' }
];
module.exports = {list_data};

/* ä½¿ç”¨æ•°æ® */
let datas = require('../../datas/listData');
console.log(typeof datas, datas);

--------------------------------------------------------------------------------

export default function request(){
    console.log("request");
}

//å¼•ç”¨
let request = require('../../request');
//ä½¿ç”¨
request();


```



### é™æ€èµ„æºæ–‡ä»¶æ— æ³•è®¿é—®

```xml
<build>
	<resources>
		<resource>
			<directory>src/main/resources</directory>
		</resource>
	</resources>
</build>
```



### TCPåè®®å’ŒHTTPåè®®çš„åŒºåˆ«

å‚è€ƒï¼š[TCPåè®®å’ŒHTTPåè®®çš„åŒºåˆ«](https://www.php.cn/faq/421548.html)

```
TCPåè®®å¯¹åº”äºä¼ è¾“å±‚ï¼Œè€ŒHTTPåè®®å¯¹åº”äºåº”ç”¨å±‚ï¼Œä»æœ¬è´¨ä¸Šæ¥è¯´ï¼ŒäºŒè€…æ²¡æœ‰å¯æ¯”æ€§ã€‚å› ä¸ºHttpåè®®æ˜¯å»ºç«‹åœ¨TCPåè®®åŸºç¡€ä¹‹ä¸Šçš„ï¼Œå½“æµè§ˆå™¨éœ€è¦ä»æœåŠ¡å™¨è·å–ç½‘é¡µæ•°æ®çš„æ—¶å€™ï¼Œä¼šå‘å‡ºä¸€æ¬¡Httpè¯·æ±‚ã€‚(ä¼ è¾“å±‚çš„ä½œç”¨å°±æ˜¯ä¼ è¾“æ•°æ®ï¼Œè€Œåº”ç”¨å±‚æ˜¯å¯¹äºæ•°æ®çš„è¯†åˆ«å’Œå¤„ç†)

Httpä¼šé€šè¿‡TCPå»ºç«‹èµ·ä¸€ä¸ªåˆ°æœåŠ¡å™¨çš„è¿æ¥é€šé“ï¼Œå½“æœ¬æ¬¡è¯·æ±‚éœ€è¦çš„æ•°æ®å®Œæ¯•åï¼ŒHttpä¼šç«‹å³å°†TCPè¿æ¥æ–­å¼€ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ˆçŸ­çš„ã€‚æ‰€ä»¥Httpè¿æ¥æ˜¯ä¸€ç§çŸ­è¿æ¥ï¼Œæ˜¯ä¸€ç§æ— çŠ¶æ€çš„è¿æ¥ã€‚æ‰€è°“çš„æ— çŠ¶æ€ï¼Œæ˜¯æŒ‡æµè§ˆå™¨æ¯æ¬¡å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚çš„æ—¶å€™ï¼Œä¸æ˜¯é€šè¿‡ä¸€ä¸ªè¿æ¥ï¼Œè€Œæ˜¯æ¯æ¬¡éƒ½å»ºç«‹ä¸€ä¸ªæ–°çš„è¿æ¥ã€‚å¦‚æœæ˜¯ä¸€ä¸ªè¿æ¥çš„è¯ï¼ŒæœåŠ¡å™¨è¿›ç¨‹ä¸­å°±èƒ½ä¿æŒä½è¿™ä¸ªè¿æ¥å¹¶ä¸”åœ¨å†…å­˜ä¸­è®°ä½ä¸€äº›ä¿¡æ¯çŠ¶æ€ã€‚è€Œæ¯æ¬¡è¯·æ±‚ç»“æŸåï¼Œè¿æ¥å°±å…³é—­ï¼Œç›¸å…³çš„å†…å®¹å°±é‡Šæ”¾äº†ï¼Œæ‰€ä»¥è®°ä¸ä½ä»»ä½•çŠ¶æ€ï¼Œæˆä¸ºæ— çŠ¶æ€è¿æ¥ã€‚
```



### TCPçš„ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹ç†è§£åŠé¢è¯•é¢˜

å‚è€ƒï¼š[TCPçš„ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹ç†è§£åŠé¢è¯•é¢˜](https://blog.csdn.net/qq_38950316/article/details/81087809)   [TCPä¸‰æ¬¡æ¡æ‰‹è¯¦ç»†è¿‡ç¨‹](https://blog.csdn.net/huaishu/article/details/93739446)

```
seqæ˜¯åºåˆ—å·ï¼Œè¿™æ˜¯ä¸ºäº†è¿æ¥ä»¥åä¼ é€æ•°æ®ç”¨çš„ï¼Œackæ˜¯å¯¹æ”¶åˆ°çš„æ•°æ®åŒ…çš„ç¡®è®¤ï¼Œå€¼æ˜¯ç­‰å¾…æ¥æ”¶çš„æ•°æ®åŒ…çš„åºåˆ—å·ã€‚
åœ¨ç¬¬ä¸€æ¬¡æ¶ˆæ¯å‘é€ä¸­ï¼ŒAéšæœºé€‰å–ä¸€ä¸ªåºåˆ—å·ä½œä¸ºè‡ªå·±çš„åˆå§‹åºå·å‘é€ç»™Bï¼›ç¬¬äºŒæ¬¡æ¶ˆæ¯Bä½¿ç”¨ackå¯¹Açš„æ•°æ®åŒ…è¿›è¡Œç¡®è®¤ï¼Œå› ä¸ºå·²ç»æ”¶åˆ°äº†åºåˆ—å·ä¸ºxçš„æ•°æ®åŒ…ï¼Œå‡†å¤‡æ¥æ”¶åºåˆ—å·ä¸ºx+1çš„åŒ…ï¼Œæ‰€ä»¥ack=x+1ï¼ŒåŒæ—¶Bå‘Šè¯‰Aè‡ªå·±çš„åˆå§‹åºåˆ—å·ï¼Œå°±æ˜¯seq=yï¼›ç¬¬ä¸‰æ¡æ¶ˆæ¯Aå‘Šè¯‰Bæ”¶åˆ°äº†Bçš„ç¡®è®¤æ¶ˆæ¯å¹¶å‡†å¤‡å»ºç«‹è¿æ¥ï¼ŒAè‡ªå·±æ­¤æ¡æ¶ˆæ¯çš„åºåˆ—å·æ˜¯x+1ï¼Œæ‰€ä»¥seq=x+1ï¼Œè€Œack=y+1æ˜¯è¡¨ç¤ºAæ­£å‡†å¤‡æ¥æ”¶Båºåˆ—å·ä¸ºy+1çš„æ•°æ®åŒ…ã€‚
seqæ˜¯æ•°æ®åŒ…æœ¬èº«çš„åºåˆ—å·ï¼›ackæ˜¯æœŸæœ›å¯¹æ–¹ç»§ç»­å‘é€çš„é‚£ä¸ªæ•°æ®åŒ…çš„åºåˆ—å·ã€‚
```



### JVM & GC

å‚è€ƒï¼š[ä¸€ç¯‡æ–‡ç« å½»åº•æå®šæ‰€æœ‰GCé¢è¯•é—®é¢˜](https://blog.csdn.net/liewen_/article/details/83151227)

![JVMç»“æ„](./image/JVM.png)

**JVMè¿è¡Œæ—¶æ•°æ®åŒº**

```
JVMè¿è¡Œæ—¶æ•°æ®åŒºä¸»è¦åˆ†ä¸ºï¼šæ ˆã€å †ã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨ã€æ–¹æ³•åŒºï¼ˆjdk8æ— ï¼‰ã€
å…¶ä¸­æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨ï¼Œ3ä¸ªåŒºåŸŸéšçº¿ç¨‹ç”Ÿç­(å› ä¸ºæ˜¯çº¿ç¨‹ç§æœ‰)ï¼Œä¸å…±äº«æ•°æ®ã€‚è€ŒJavaå †å’Œæ–¹æ³•åŒºåˆ™ä¸ä¸€æ ·

Javaå †ï¼šJavaè™šæ‹Ÿæœºç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹å’Œæ•°ç»„éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚GCä¸»è¦å°±æ˜¯åœ¨Javaå †ä¸­è¿›è¡Œçš„ã€‚JVMæ ¹æ®å¯¹è±¡å­˜æ´»å‘¨æœŸä¸åŒï¼ŒåŒæ—¶ä¹Ÿä¸ºäº†æé«˜å¯¹è±¡å†…å­˜åˆ†é…å’Œåƒåœ¾å›æ”¶çš„æ•ˆç‡ï¼ŒæŠŠå †å†…å­˜åˆ’åˆ†ä¸ºå‡ å—ã€‚
	1.æ–°ç”Ÿä»£ï¼ˆæ–°ç”Ÿä»£åˆåˆ†ä¸ºEden80%ï¼ŒSurvivorFrom10%ï¼ŒSurvivorTo10%ï¼‰
	2.è€å¹´ä»£ç»è¿‡äº†å¤šæ¬¡GCä¾ç„¶å­˜æ´»ï¼Œä¸ä¼šé¢‘ç¹åšGC

æµç¨‹ï¼š
-----------------------------------------------------------------------------------------
1.æ–°ç”Ÿä»£æœ‰ä¸€ä¸ªEdenåŒºå’Œä¸¤ä¸ªsurvivoråŒºï¼Œé¦–å…ˆå°†å¯¹è±¡æ”¾å…¥EdenåŒºï¼Œå¦‚æœç©ºé—´ä¸è¶³å°±å‘å…¶ä¸­çš„ä¸€ä¸ªsurvivoråŒºä¸Šæ”¾ï¼Œå¦‚æœä»ç„¶æ”¾ä¸ä¸‹å°±ä¼šå¼•å‘ä¸€æ¬¡å‘ç”Ÿåœ¨æ–°ç”Ÿä»£çš„Minor GCï¼Œå°†å­˜æ´»çš„å¯¹è±¡æ”¾å…¥å¦ä¸€ä¸ªsurvivoråŒºä¸­ï¼Œç„¶åæ¸…ç©ºEdenå’Œä¹‹å‰çš„é‚£ä¸ªsurvivoråŒºçš„å†…å­˜ã€‚åœ¨æŸæ¬¡GCè¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç°ä»ç„¶åˆæ”¾ä¸ä¸‹çš„å¯¹è±¡ï¼Œå°±å°†è¿™äº›å¯¹è±¡æ”¾å…¥è€å¹´ä»£å†…å­˜é‡Œå»ã€‚

2.å¤§å¯¹è±¡ä»¥åŠé•¿æœŸå­˜æ´»çš„å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚

3.è§¦å‘Minor GCä¹‹å‰ï¼Œä¼šæ£€æŸ¥æ™‹å‡åˆ°è€å¹´ä»£çš„å¯¹è±¡å¤§å°ï¼Œæ˜¯å¦å¤§äºè€å¹´ä»£å‰©ä½™ç©ºé—´ï¼Œå¦‚æœå¤§äºï¼Œåˆ™ç›´æ¥è§¦å‘Full GC
-----------------------------------------------------------------------------------------

GCä¸€å…±åˆ†ä¸‰ç§ï¼šMinorGC,Major GC å’ŒFull GCã€‚Full GCæ˜¯æ¸…ç†æ•´ä¸ªå †ç©ºé—´â€”åŒ…æ‹¬å¹´è½»ä»£å’Œæ°¸ä¹…ä»£ã€‚

æ–¹æ³•åŒºï¼šå¯¹äºJVMçš„æ–¹æ³•åŒºï¼Œå¯èƒ½å¬å¾—æœ€å¤šçš„æ˜¯å¦å¤–ä¸€ä¸ªè¯´æ³•â€”â€”æ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼‰ï¼Œå‘¼åº”å †çš„æ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚åœ¨æ°¸ä¹…ä»£ç§»é™¤åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¹Ÿä¸å†æ”¾åœ¨æ°¸ä¹…ä»£äº†ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰æ”¾åˆ°æ–°çš„æ–¹æ³•åŒº---å…ƒç©ºé—´é‡Œï¼Œè€Œæ˜¯ç•™åœ¨äº†å †é‡Œï¼ˆä¸ºäº†æ–¹ä¾¿å›æ”¶ï¼Ÿï¼‰ã€‚è¿è¡Œæ—¶å¸¸é‡æ± å½“ç„¶æ˜¯éšç€æ¬å®¶åˆ°äº†å…ƒç©ºé—´é‡Œï¼Œæ¯•ç«Ÿå®ƒæ˜¯è£…é™æ€å˜é‡ã€å­—èŠ‚ç ç­‰ä¿¡æ¯çš„ï¼Œæœ‰å®ƒçš„åœ°æ–¹æ‰ç§°å¾—ä¸Šæ–¹æ³•åŒºã€‚

å…ƒç©ºé—´æ˜¯æ–¹æ³•åŒºçš„åœ¨HotSpot jvm ä¸­çš„å®ç°ï¼Œæ–¹æ³•åŒºä¸»è¦ç”¨äºå­˜å‚¨ç±»çš„ä¿¡æ¯ã€å¸¸é‡æ± ã€æ–¹æ³•æ•°æ®ã€æ–¹æ³•ä»£ç ç­‰ã€‚æ–¹æ³•åŒºé€»è¾‘ä¸Šå±äºå †çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯ä¸ºäº†ä¸å †è¿›è¡ŒåŒºåˆ†ï¼Œé€šå¸¸åˆå«â€œéå †â€ã€‚å…ƒç©ºé—´çš„æœ¬è´¨å’Œæ°¸ä¹…ä»£ç±»ä¼¼ï¼Œéƒ½æ˜¯å¯¹JVMè§„èŒƒä¸­æ–¹æ³•åŒºçš„å®ç°ã€‚ä¸è¿‡å…ƒç©ºé—´ä¸æ°¸ä¹…ä»£ä¹‹é—´æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šå…ƒç©ºé—´å¹¶ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ã€‚
```



### JVMä¸­å †å’Œæ ˆçš„åŒºåˆ«

[JVMä¸­å †å’Œæ ˆçš„åŒºåˆ«](https://www.cnblogs.com/benon94/p/10626798.html)

[JVMä¸­å †å’Œæ ˆåˆ°åº•å­˜æ”¾äº†ä»€ä¹ˆ](https://www.cnblogs.com/toSeeMyDream/p/5251918.html)



### è´Ÿè½½å‡è¡¡

[è´Ÿè½½å‡è¡¡åˆ†ç±»](https://www.jianshu.com/p/c48af7936329)

[ä»‹ç»è´Ÿè½½å‡è¡¡çš„é¢è¯•è¯æœ¯](https://blog.csdn.net/yuanaili/article/details/81191408)



### Nginx

å‚è€ƒï¼š[Nginxé¢è¯•](<https://blog.csdn.net/a303549861/article/details/88672901>)

å‚è€ƒï¼š[Nginxæ˜¯ä»€ä¹ˆ ? èƒ½å¹²å˜› ï¼Ÿ](<https://blog.csdn.net/forezp/article/details/87887507>)

å‚è€ƒï¼š [Windows ä¸‹Nginxé‡å¯é¡¹ç›®ä¸é‡æ–°åŠ è½½](https://www.cnblogs.com/zjfblog/p/11854946.html) 

```
Nignxæ˜¯ä¸€ä¸ªå¼€æºçš„ã€é«˜æ€§èƒ½çš„è½»é‡çº§çš„HTTPæœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼›
Nginxå¯ä»¥ä½œä¸ºä¸€ä¸ªHTTPæœåŠ¡å™¨è¿›è¡Œç½‘ç«™çš„å‘å¸ƒå¤„ç†ï¼Œå¦å¤–Nginxå¯ä»¥ä½œä¸ºåå‘ä»£ç†è¿›è¡Œè´Ÿè½½å‡è¡¡çš„å®ç°ã€‚

æ­£å‘ä»£ç†ã€åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡
```





### List Map 

å‚è€ƒï¼š[JAVAä¸­çš„é›†åˆ](https://blog.csdn.net/weixin_36027342/article/details/79972399)



### HashMapçº¢é»‘æ ‘

å‚è€ƒï¼š[HashMapçº¢é»‘æ ‘](https://www.jianshu.com/p/2c7a4a4e1f53)   [HashMapç†è§£](https://blog.csdn.net/wenyiqingnianiii/article/details/52204136)



### Tomcatåšæˆç³»ç»ŸæœåŠ¡

å‚è€ƒï¼š[Tomcatåšæˆç³»ç»ŸæœåŠ¡](<https://jingyan.baidu.com/article/597a0643680371312b52431a.html>)

ä¸€ï¼šä¸‹è½½tomcat

äºŒï¼šé…ç½®tomcat

1.è§£å‹tomcatè‡³è‡ªå®šä¹‰ç›®å½•ä¸‹ã€‚



2.å¦‚æœç”µè„‘ä¸Šé¢æœ‰å¤šä¸ªtomcatçš„è¯ï¼Œè¯·ä¿®æ”¹ä¸€ä¸‹tomcatæœåŠ¡ç«¯å£ï¼Œå¦åˆ™tomcatå¯åŠ¨å°†å› ä¸ºç«¯å£å†²çªä¼šå¤±è´¥ã€‚

ä¸»è¦å¯¹è§£å‹ç›®å½•ä¸‹conf/server.xmlæ–‡ä»¶è¿›è¡Œä¿®æ”¹

```xml
<Server port="9001" shutdown="SHUTDOWN">  
<Connector port="9090" protocol="HTTP/1.1"  connectionTimeout="20000" redirectPort="9061" />  
<Connector port="9081" protocol="AJP/1.3" redirectPort="9061" />
```



3.ä¿®æ”¹tomcatä¸­bin/ç›®å½•ä¸‹çš„service.batæ–‡ä»¶

1) åœ¨æ–‡ä»¶å¼€å¤´éƒ¨åˆ†æ·»åŠ ä»¥ä¸‹å†…å®¹

```xml
SET JAVA_HOME=C:\Program Files\Java\jdk1.7.0_67  
SET CATALINA_HOME=D:\server\tomcat  
SET PR_DISPLAYNAME=é¡¹ç›®åæˆ–å…¶ä»–è‡ªå®šä¹‰åç§° 
```

2) åœ¨æ–‡ä»¶ä¸­æ‰¾åˆ°rem Set default Service name  éƒ¨åˆ†å¹¶å°†å†…å®¹ä¿®æ”¹ä¸ºï¼š

```xml
set SERVICE_NAME=myporject(è‡ªå®šä¹‰åç§°)
```



4.ä¿®æ”¹binç›®å½•ä¸‹shutdown.batå’Œstartup.batæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ å†…å®¹ï¼š

```xml
SET JAVA_HOME=C:\Program Files\Java\jdk1.7.0_67  
SET CATALINA_HOME=D:\server\tomcat
```



5.æ·»åŠ æœåŠ¡

1)åœ¨DOSç•Œé¢ä¸‹,è¿›å…¥Tomcatè§£å‹ç›®å½•çš„binç›®å½•,è¾“å…¥å‘½ä»¤:

```windows
service.bat remove tomcat6

service.bat install
```

å¦‚æœå®‰è£…æˆåŠŸ,ä¼šæç¤º:The service 'Tomcat6ï¼ˆæˆ–è€…ä½ ä¿®æ”¹ä¸€åçš„SERVICE_NAMEï¼‰' has
been installed



### Mavenå®šä¹‰è§„èŒƒ

```
groupIdï¼šå®šä¹‰å½“å‰Mavené¡¹ç›®éš¶å±çš„å®é™…é¡¹ç›®ï¼Œä¾‹å¦‚org.sonatype.nexusï¼Œæ­¤idå‰åŠéƒ¨åˆ†org.sonatypeä»£è¡¨æ­¤é¡¹ç›®éš¶å±çš„ç»„ç»‡æˆ–å…¬å¸ï¼Œåéƒ¨åˆ†ä»£è¡¨é¡¹ç›®çš„åç§°ï¼Œå¦‚æœæ­¤é¡¹ç›®å¤šæ¨¡å—è¯å¼€å‘çš„è¯å°±å­æ¨¡å—å¯ä»¥åˆ†ä¸ºorg.sonatype.nexus.pluginså’Œorg.sonatype.nexus.utilsç­‰ã€‚ç‰¹åˆ«æ³¨æ„çš„æ˜¯groupIdä¸åº”è¯¥å¯¹åº”é¡¹ç›®éš¶å±çš„ç»„ç»‡æˆ–å…¬å¸ï¼Œä¹Ÿå°±æ˜¯è¯´groupIdä¸èƒ½åªæœ‰org.sonatypeè€Œæ²¡æœ‰nexusã€‚

ä¾‹å¦‚ï¼šæˆ‘å»ºç«‹ä¸€ä¸ªé¡¹ç›®ï¼Œæ­¤é¡¹ç›®æ˜¯æ­¤åæ‰€æœ‰é¡¹ç›®çš„ä¸€ä¸ªæ€»çš„å¹³å°ï¼Œé‚£ä¹ˆgroupIdåº”è¯¥æ˜¯org.jsoft.projectNameï¼ŒprojectNameæ˜¯å¹³å°çš„åç§°ï¼Œorg.jsoftæ˜¯ä»£è¡¨æˆ‘ä¸ªäººçš„ç»„ç»‡ï¼Œå¦‚æœä»¥æˆ‘æ‰€åœ¨çš„æµªæ½®é›†å›¢æ¥è¯´çš„è¯å°±åº”è¯¥æ˜¯com.inspur.syncdataã€‚

artifactIdï¼šæ˜¯æ„ä»¶IDï¼Œè¯¥å…ƒç´ å®šä¹‰å®é™…é¡¹ç›®ä¸­çš„ä¸€ä¸ªMavené¡¹ç›®æˆ–è€…æ˜¯å­æ¨¡å—ï¼Œå¦‚ä¸Šé¢å®˜æ–¹çº¦å®šä¸­æ‰€è¯´ï¼Œæ„å»ºåç§°å¿…é¡»å°å†™å­—æ¯ï¼Œæ²¡æœ‰å…¶ä»–çš„ç‰¹æ®Šå­—ç¬¦ï¼Œæ¨èä½¿ç”¨â€œå®é™…é¡¹ç›®åç§°ï¼æ¨¡å—åç§°â€çš„æ–¹å¼å®šä¹‰ï¼Œä¾‹å¦‚ï¼šspirng-mvnã€spring-coreç­‰ã€‚

æ¨èæ ¼å¼ï¼šä½¿ç”¨å®é™…é¡¹ç›®åç§°ä½œä¸ºartifactIdçš„å‰ç¼€ï¼Œç´§æ¥ç€ä¸ºæ¨¡å—åç§°

ä¸¾ä¾‹ï¼šnexus-indexerã€spring-mvcã€hibernate-c3poâ€¦â€¦è¿™äº›idéƒ½æ˜¯ä»¥å®é™…é¡¹ç›®åç§°ä½œä¸ºå‰ç¼€ï¼Œç„¶åæ¥ç€ä¸€ä¸ªä¸­åˆ’çº¿ï¼Œå†ç´§è·Ÿé¡¹ç›®çš„æ¨¡å—åç§°ï¼Œé»˜è®¤æƒ…å†µä¸‹mavenä¼šåœ¨artifactIdæ·»åŠ versionä½œä¸ºæœ€åç”Ÿæˆçš„åç§°ã€‚ä¾‹å¦‚ï¼šspirng-mvn-2.0.0.jar

versionï¼šç‰ˆæœ¬å·ï¼Œä¸è¦ä½¿ç”¨æ—¥æœŸä½œä¸ºç‰ˆæœ¬ï¼Œæ¨èä¾‹å¦‚è¿™æ ·çš„å‘½åï¼š2.0ã€2.0.1ã€1.3.1ï¼Œå¦‚æœä¸ºå¿«ç…§ç‰ˆæœ¬ï¼ˆSNAPSHOTï¼‰ï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨åœ¨ç‰ˆæœ¬å·åé¢åŠ ä¸Šå¿«ç…§çš„æ ‡è¯†ã€‚
```



### SpringBootæ‰“waråŒ…éƒ¨ç½²

1. pom.xmlé…ç½®ä¿®æ”¹

```pom.xml
<packaging>war</packaging>
```

2. æ’é™¤spring bootä¸­å†…åµŒçš„tomcatä¾èµ–åŒ…ï¼š

```pom.xml
<dependency>
   <groupId>org.springframework.boot</groupId>
   <artifactId>spring-boot-starter-tomcat</artifactId>
   <scope>provided</scope><!-- providedæ‰“åŒ…æ—¶ä¸åŠ è½½æ­¤åŒ… -->
</dependency>
```

3. ä¿®æ”¹mavenæ‰“waråŒ…æ’ä»¶

```
<build>
    <finalName>waråŒ…å</finalName>
    <plugins>
        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>3.0.0</version>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.3</version>
            <configuration>
                <source>1.8</source>
                <target>1.8</target>
            </configuration>
        </plugin>
    </plugins>
</build>
```

4. å¦‚æœæ˜¯å‘å¸ƒjaråŒ…ï¼Œç¨‹åºçš„å…¥å£æ—¶mainå‡½æ•°æ‰€åœ¨çš„ç±»ï¼Œä½¿ç”¨@SpringBootApplicationæ³¨è§£ï¼›å¦‚æœæ˜¯waråŒ…å‘å¸ƒï¼Œéœ€è¦å¢åŠ SpringBootServletInitializerå­ç±»ï¼Œå¹¶é‡å†™å…¶configureæ–¹æ³•ï¼Œæˆ–è€…å°†mainå‡½æ•°æ‰€åœ¨çš„ç±»ç»§æ‰¿SpringBootServletInitializerå­ç±»ï¼Œå¹¶é‡å†™configureæ–¹æ³•ï¼Œå½“æ—¶æ‰“åŒ…ä¸ºwaræ—¶ä¸Šä¼ åˆ°tomcatæœåŠ¡å™¨ä¸­è®¿é—®é¡¹ç›®å§‹ç»ˆæŠ¥404é”™å°±æ˜¯å¿½ç•¥äº†è¿™ä¸ªæ­¥éª¤ï¼ï¼ï¼

```java
//ç»§æ‰¿SpringBootServletInitializerå­ç±»
@SpringBootApplication
public class DemoApplication extends SpringBootServletInitializer {

    //é‡å†™configureæ–¹æ³•
    @Override
    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
        return application.sources(DemoApplication.class);
    }
    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }
}
```



### Mavenè·³è¿‡æµ‹è¯•ç¯èŠ‚æ‰“åŒ…

```cmd
mvn clean package -Dmaven.test.skip=true
```



### æ—¥æœŸæ ¼å¼é—®é¢˜

1. åå°æ¥å—å‰å°æ—¥æœŸé—®é¢˜

   ä¸€ã€@DateTimeFormat(pattern = "yyyy-MM-dd")

   äºŒã€åˆ›å»ºé…ç½®ç±»æ³¨å…¥Springä¸­

   ```java
   @Configuration
   public class DateConverterConfig implements Converter<String, Date> {
   
           private static final List<String> formarts = new ArrayList<>(4);
   
           static {
               formarts.add("yyyy-MM");
               formarts.add("yyyy-MM-dd");
               formarts.add("yyyy-MM-dd hh:mm");
               formarts.add("yyyy-MM-dd hh:mm:ss");
           }
   
           @Override
           public Date convert(String source) {
               String value = source.trim();
               if ("".equals(value)) {
                   return null;
               }
               if (source.matches("^\\d{4}-\\d{1,2}$")) {
                   return parseDate(source, formarts.get(0));
               } else if (source.matches("^\\d{4}-\\d{1,2}-\\d{1,2}$")) {
                   return parseDate(source, formarts.get(1));
               } else if (source.matches("^\\d{4}-\\d{1,2}-\\d{1,2} {1}\\d{1,2}:\\d{1,2}$")) {
                   return parseDate(source, formarts.get(2));
               } else if (source.matches("^\\d{4}-\\d{1,2}-\\d{1,2} {1}\\d{1,2}:\\d{1,2}:\\d{1,2}$")) {
                   return parseDate(source, formarts.get(3));
               } else {
                   throw new IllegalArgumentException("Invalid boolean value '" + source + "'");
               }
           }
   
           /**
            * æ ¼å¼åŒ–æ—¥æœŸ
            *
            * @param dateStr String å­—ç¬¦å‹æ—¥æœŸ
            * @param format  String æ ¼å¼
            * @return Date æ—¥æœŸ
            */
           public Date parseDate(String dateStr, String format) {
               Date date = null;
               try {
                   DateFormat dateFormat = new SimpleDateFormat(format);
                   date = dateFormat.parse(dateStr);
               } catch (Exception e) {
   
               }
               return date;
           }
   
       }
   
   ```

2. JSONæ ¼å¼å­—ç¬¦ä¸²æ—¥æœŸé—®é¢˜

   ä¸€ã€@JSONField(format = "yyyy-MM-dd HH:mm:ss")

   äºŒã€@JsonFormat(pattern="yyyy-MM-dd",timezone="GMT+8")

   ä¸‰ã€JSONArray.toJSONStringWithDateFormat(this,"yyyy-MM-dd HH:mm:ss");



### MyBatis dateç±»å‹å¼•å‘é—®é¢˜

dateç±»å‹åœ¨åˆ¤æ–­éç©ºæ—¶ï¼Œè¿™ç§å†™æ³•ä¼šå¼•å‘å¼‚å¸¸ï¼šinvalid comparison: java.util.Date and java.lang.String

```xml
<if test="createDate != null and createDate !='' " >  
  date(createDate) = #{createDate}  
</if>
```

æ­£ç¡®å†™æ³•åº”ä¸ºï¼š

```xml
<if test="createDate != null" >  
  date(createDate) = date#{createDate}
</if> 
```

### MyBatis Could not set parameters for mapping

å‚è€ƒï¼š[MyBatisCould not set parameters for mapping](https://blog.csdn.net/Z__Sheng/article/details/90171283 )

```
ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š
01: åˆ é™¤æ³¨é‡Šçš„sqlè¯­å¥ 
02ï¼š ç”¨ <!- -éœ€è¦æ³¨é‡Šçš„å†…å®¹â€“> æ³¨é‡Šå³å¯ï¼Œæ³¨é‡Šä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼
```



### Ajaxä¼ è¾“JSONæ•°æ®

```js
$.ajax({
    url:"/user/export",
    data:JSON.stringify(data),
    type:"post",
    contentType:"application/json",//é‡ç‚¹
    success:function(fileName){
        console.log(fileName);
        window.open("../user/downLoad?fileName=" + fileName);
    },error:function(){
    	console.log("å¤±è´¥ï¼");
    }
})
```

```java
@ResponseBody
@RequestMapping(value = "/export")
public void export(@RequestBody JSONObject data){
   	 //å°†å­—ç¬¦ä¸²è§£ææˆJSONObjectå¯¹è±¡
}
```





### POIæŠ¥è¡¨å¼•å…¥pomå‡ºç°jaråŒ…å†²çª

```xml
<!--POIæŠ¥è¡¨-->
<dependency>
    <groupId>org.apache.poi</groupId>
    <artifactId>poi</artifactId>
    <version>3.6</version>
    <exclusions>
        <exclusion>
            <artifactId>jsp-api</artifactId>
            <groupId>javax.servlet.jsp</groupId>
        </exclusion>
        <exclusion>
            <artifactId>servlet-api</artifactId>
            <groupId>javax.servlet</groupId>
        </exclusion>
    </exclusions>
</dependency>
```

### Excelå¯¼å‡ºå¯¼å‡º - é˜¿é‡Œå·´å·´

å‚è€ƒï¼š[Excelå¯¼å…¥å¯¼å‡º](http://www.pianshen.com/article/4672412475/)



### å‰åç«¯åˆ†ç¦» - JWTç”¨æˆ·è®¤è¯

å‚è€ƒï¼š[JWTç”¨æˆ·è®¤è¯](https://www.cnblogs.com/wenqiangit/p/9592132.html)



**ä¼ ç»Ÿæ–¹å¼**

```
å‰åç«¯åˆ†ç¦»é€šè¿‡Restful APIè¿›è¡Œæ•°æ®äº¤äº’æ—¶ï¼Œå¦‚ä½•éªŒè¯ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯åŠæƒé™ã€‚åœ¨åŸæ¥çš„é¡¹ç›®ä¸­ï¼Œä½¿ç”¨çš„æ˜¯æœ€ä¼ ç»Ÿä¹Ÿæ˜¯æœ€ç®€å•çš„æ–¹å¼ï¼Œå‰ç«¯ç™»å½•ï¼Œåç«¯æ ¹æ®ç”¨æˆ·ä¿¡æ¯ç”Ÿæˆä¸€ä¸ªtokenï¼Œå¹¶ä¿å­˜è¿™ä¸ª token å’Œå¯¹åº”çš„ç”¨æˆ·idåˆ°æ•°æ®åº“æˆ–Sessionä¸­ï¼Œæ¥ç€æŠŠ token ä¼ ç»™ç”¨æˆ·ï¼Œå­˜å…¥æµè§ˆå™¨ cookieï¼Œä¹‹åæµè§ˆå™¨è¯·æ±‚å¸¦ä¸Šè¿™ä¸ªcookieï¼Œåç«¯æ ¹æ®è¿™ä¸ªcookieå€¼æ¥æŸ¥è¯¢ç”¨æˆ·ï¼ŒéªŒè¯æ˜¯å¦è¿‡æœŸã€‚

ä½†è¿™æ ·åšé—®é¢˜å°±å¾ˆå¤šï¼Œå¦‚æœæˆ‘ä»¬çš„é¡µé¢å‡ºç°äº† XSS æ¼æ´ï¼Œç”±äº cookie å¯ä»¥è¢« JavaScript è¯»å–ï¼ŒXSS æ¼æ´ä¼šå¯¼è‡´ç”¨æˆ· token æ³„éœ²ï¼Œè€Œä½œä¸ºåç«¯è¯†åˆ«ç”¨æˆ·çš„æ ‡è¯†ï¼Œcookie çš„æ³„éœ²æ„å‘³ç€ç”¨æˆ·ä¿¡æ¯ä¸å†å®‰å…¨ã€‚å°½ç®¡æˆ‘ä»¬é€šè¿‡è½¬ä¹‰è¾“å‡ºå†…å®¹ï¼Œä½¿ç”¨ CDN ç­‰å¯ä»¥å°½é‡é¿å… XSS æ³¨å…¥ï¼Œä½†è°ä¹Ÿä¸èƒ½ä¿è¯åœ¨å¤§å‹çš„é¡¹ç›®ä¸­ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚
```





### Restfulé£æ ¼

```
// éœ€æ±‚:
//   1. æŸ¥è¯¢
//        * URI: emps
//        * è¯·æ±‚æ–¹å¼: GET
//   2. æ·»åŠ æ‰€æœ‰å‘˜å·¥ä¿¡æ¯
//        2.1 æ˜¾ç¤ºæ·»åŠ é¡µé¢:
//                * URI: emp
//                * è¯·æ±‚æ–¹å¼: GET
//        2.2 æ·»åŠ å‘˜å·¥
//                * URI: emp
//                * è¯·æ±‚æ–¹å¼: POST
//                * æ·»åŠ å®Œæˆå,é‡å®šå‘åˆ° list é¡µé¢
//   3. åˆ é™¤
//        * URI: emp/{id}
//        * è¯·æ±‚æ–¹å¼: DELETE
//   4. ä¿®æ”¹æ“ä½œ (å…¶ä¸­ lastName ä¸å¯ä¿®æ”¹!!)
//       4.1 æ˜¾ç¤ºä¿®æ”¹é¡µé¢
//              * URI: emp/{id}
//              * è¯·æ±‚æ–¹å¼: GET
//       4.2 ä¿®æ”¹å‘˜å·¥ä¿¡æ¯
//              * URI: emp
//              * è¯·æ±‚æ–¹å¼: PUT
//              * å®Œæˆä¿®æ”¹,é‡å®šå‘åˆ° list é¡µé¢
```



### æ ‘å½¢ç»“æ„

```java
public class TreeUtil {
    //Node: Integer id; String name; Integer parentId; List<Node> children
    
    // å…¥å£æ–¹æ³•
    public static List<Node> getTree(List<Node> nodeList) {
        List<Node> list = new ArrayList<Node>();
        // éå†èŠ‚ç‚¹åˆ—è¡¨
        for (Node node : nodeList) {
            if (node.getParentId().equals("0")) {
                // parentIDä¸º-1ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ä½œä¸ºå…¥å£
                node.setChildren( getChildrenNode(node.getId(), nodeList));
                list.add(node);
            }
        }
        return list;
    }

    // è·å–å­èŠ‚ç‚¹çš„é€’å½’æ–¹æ³•
    private static List<Node> getChildrenNode(String id, List<Node> nodeList) {
        List<Node> list = new ArrayList<Node>();
        for (Node node : nodeList) {
            if (node.getParentId().equals(id)) {
                // é€’å½’è·å–å­èŠ‚ç‚¹
                node.setChildren(getChildrenNode(node.getId(), nodeList));
                list.add(node);
            }
        }
        return list;
    }
}
```



```java
 	/**
     * è·å–è¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹
     * @param nodeId
     * @param data
     * @return
     */
    public List<JSONObject> getChildren(String nodeId,List<JSONObject> data){
        List<JSONObject> child = new ArrayList<JSONObject>();
        for(JSONObject object : data){
            if(nodeId.equals(object.getString("depParent"))){
                child.add(object);
            }
        }
        return child;
    }

    /**
     * éƒ¨é—¨æ ‘
     * é€’å½’å¤„ç†   æ•°æ®åº“æ ‘ç»“æ„æ•°æ®->æ ‘å½¢json
     * @param nodeId
     * @param nodes
     * @return
     */
    public JSONArray getNodeJson(String nodeId, List<JSONObject> nodes){

        //å½“å‰å±‚çº§å½“å‰ç‚¹ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼ˆå®æˆ˜ä¸­ä¸è¦æ…¢æ…¢å»æŸ¥,ä¸€æ¬¡åŠ è½½åˆ°é›†åˆç„¶åæ…¢æ…¢å¤„ç†ï¼‰
        List<JSONObject> childList = getChildren(nodeId,nodes);
        JSONArray childTree = new JSONArray();
        for (JSONObject node : childList) {
            JSONObject o = new JSONObject();
            o.put("key",node.getString("id"));
            o.put("title",node.getString("depName"));
            JSONArray child = getNodeJson(node.getString("id"),nodes);  //é€’å½’è°ƒç”¨è¯¥æ–¹æ³•
            if(!child.isEmpty()) {
                o.put("children",child);
            }
            childTree.fluentAdd(o);
        }
        return childTree;
    }

    /**
     * éƒ¨é—¨æ ‘
     * @param
     * @return
     */
    public JSONArray findDeptRoleTree(){
        List<JSONObject> data = this.iDeptDao.findDeptRoleTree();
        JSONArray treeData =  getNodeJson("0",data);
        return treeData;
    }

	/*
		select depSerial, depNo, depName, depParent from dt_dep
    */
```



### Gitæäº¤

.gitç›®å½•ä¸­çš„configæ–‡ä»¶

```
[core]
	repositoryformatversion = 0
	filemode = false
	bare = false
	logallrefupdates = true
	symlinks = false
	ignorecase = true
[remote "origin"]
	url = http://guoyongchao@192.168.2.211:1010/r/dormitory-management-web.git
	fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
	remote = origin
	merge = refs/heads/master

```



### æ—¶é—´è½¬æ¢å¤šå°‘åˆ†é’Ÿå‰ã€å‡ å¤©å‰

```js
var minute = 1000 * 60;
var hour = minute * 60;
var day = hour * 24;
var month = day * 30;

//è·å–ä¸ªæ€§åŒ–æ—¶é—´å·® 
export function getDateDiff(dateStr){
  let dateTimeStamp = dateStr;// Date.parse(dateStr.replace(/-/gi,"/")); //å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¶é—´æˆ³
  var now = new Date().getTime();
  var diffValue = now - dateTimeStamp;
  if(diffValue < 0){
      //è‹¥æ—¥æœŸä¸ç¬¦åˆ™å¼¹å‡ºçª—å£å‘Šä¹‹
      console.log("ç»“æŸæ—¥æœŸä¸èƒ½å°äºå¼€å§‹æ—¥æœŸï¼");
  }
  var yearC = diffValue/(12*month);
  var monthC = diffValue/month;
  var weekC = diffValue/(7*day);
  var dayC = diffValue/day;
  var hourC = diffValue/hour;
  var minC = diffValue/minute;
  let result = null;
  if(yearC >= 1){
      result = parseInt(yearC) + "å¹´å‰";
  }
  else if(monthC >= 1){
      result = parseInt(monthC) + "ä¸ªæœˆå‰";
  }
  else if(weekC>=1){
      result = parseInt(weekC) + "å‘¨å‰";
  }
  else if(dayC>=1){
      result = parseInt(dayC) +"å¤©å‰";
  }
  else if(hourC>=1){
      result = parseInt(hourC) +"ä¸ªå°æ—¶å‰";
  }
  else if(minC>=1){
      result = parseInt(minC) +"åˆ†é’Ÿå‰";
  }else{
      result="åˆšåˆš";
  }
  return result;
}
```



### è·¨åŸŸé—®é¢˜

```js
1.JSONP	-- åŸç†å°±æ˜¯åˆ©ç”¨äº†scriptæ ‡ç­¾ï¼Œæ·»åŠ äº†ä¸€ä¸ªscriptæ ‡ç­¾ï¼Œåˆ©ç”¨æ ‡ç­¾ç‰¹æ€§è¾¾åˆ°è·¨åŸŸåŠ è½½èµ„æºçš„æ•ˆæœã€‚
    JSONPç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå›è°ƒå‡½æ•°å’Œæ•°æ®
    ä¼˜ç‚¹ï¼š
    ï¼ˆ1ï¼‰å…¼å®¹æ€§å¥½ï¼Œåœ¨å¤šå¤è€çš„æµè§ˆå™¨éƒ½èƒ½è¿è¡Œã€‚
    ï¼ˆ2ï¼‰èƒ½ç›´æ¥è®¿é—®å“åº”æ–‡æœ¬ï¼Œæ”¯æŒåœ¨æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´åŒå‘é€šä¿¡ã€‚
    ç¼ºç‚¹ï¼š
    ï¼ˆ1ï¼‰åªæ”¯æŒGETè¯·æ±‚ï¼Œä¸æ”¯æŒPOSTè¯·æ±‚ï¼›
    ï¼ˆ2ï¼‰ä¸å¤Ÿå®‰å…¨ã€‚å› ä¸ºJSONPæ˜¯ä»å…¶ä»–åŸŸä¸­åŠ è½½ä»£ç æ‰§è¡Œï¼Œå¦‚æœå…¶ä»–åŸŸä¸å®‰å…¨ï¼Œå¯èƒ½ä¼šåœ¨å“åº”ä¸­å¸¦æœ‰æ¶æ„ä»£ç ã€‚
    ï¼ˆ3ï¼‰ä¸å®¹æ˜“ç¡®è®¤è¯·æ±‚æ˜¯å¦å¤±è´¥ã€‚
    
    //jsonpè¯·æ±‚ï¼Œé»˜è®¤æºå¸¦callbackå‚æ•°ï¼Œæ–¹æ³•å›è°ƒsuccessä¸Šé¢
    //http://localhost:9090/student?callback=jQuery172022456231109176& =1483893661922
     $.ajax({
         url: "http://localhost:9090/student",
         type: "GET",
         dataType: "jsonp", //æŒ‡å®šæœåŠ¡å™¨è¿”å›çš„æ•°æ®ç±»å‹
         success: function (data) {
             var result = JSON.stringify(data); //jsonå¯¹è±¡è½¬æˆå­—ç¬¦ä¸²
         }
     });
    
2ã€CORS -- è·¨ç«™èµ„æºå…±äº«ï¼Œå®ƒæ˜¯è·¨åŸŸçš„å®˜æ–¹è§£å†³æ–¹æ¡ˆï¼Œå‡çº§ç‰ˆçš„JSONPã€‚
	åŸç†æ˜¯ä½¿ç”¨è‡ªå®šä¹‰çš„HTTPå¤´éƒ¨è®©æµè§ˆå™¨ä¸æœåŠ¡å™¨è¿›è¡Œæ²Ÿé€šï¼Œä»è€Œå†³å®šè¯·æ±‚æˆ–å“åº”æ˜¯åº”è¯¥æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚è¯·æ±‚å’Œå“åº”éƒ½	ä¸åŒ…å«cookieä¿¡æ¯ã€‚
	CORSéœ€è¦æµè§ˆå™¨å’Œåé™¢åŒæ—¶æ”¯æŒï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨è¿›è¡ŒCORSé€šä¿¡ï¼Œå®ç°CORSé€šä¿¡çš„å…³é”®æ˜¯åç«¯ï¼Œåªè¦åç«¯å®ç°äº†		CORSï¼Œå°±å®ç°äº†è·¨åŸŸï¼ŒæœåŠ¡ç«¯è®¾ç½®Access-Control-Allow-Origin å°±å¯ä»¥å¼€å¯CORSï¼Œè¯¥å±æ€§è¡¨ç¤ºå“ªäº›åŸŸåå¯	ä»¥è®¿é—®èµ„æºï¼Œå¦‚æœè®¾ç½®é€šé…ç¬¦åˆ™è¡¨ç¤ºæ‰€æœ‰ç½‘ç«™éƒ½å¯ä»¥è®¿é—®èµ„æºã€‚
```



### RabbitMQ

å‚è€ƒï¼š[RabbitMQ](https://blog.csdn.net/hellozpc/article/details/81436980#8SpringbootRabbitMQ_1273) [Rabbité¢è¯•](https://blog.csdn.net/weixin_43496689/article/details/103159268)



![](image/Rabbitå†…éƒ¨ç»“æ„å›¾.jpg)



> RabbitMQæœ‰å››ç§Exchangeç±»å‹ï¼Œåˆ†åˆ«æ˜¯Direct ã€Topicã€Fanout ã€Headers

```
Direct Exchange è·¯ç”±æ¨¡å¼ï¼šé»˜è®¤ç±»å‹ï¼Œæ ¹æ®è·¯ç”±é”®ï¼ˆRouting Keyï¼‰å°†æ¶ˆæ¯æŠ•é€’ç»™å¯¹åº”é˜Ÿåˆ—ã€‚
Topic Exchange é€šé…ç¬¦æ¨¡å¼ï¼šé€šè¿‡å¯¹æ¶ˆæ¯çš„è·¯ç”±é”®ï¼ˆRouting Keyï¼‰å’Œç»‘å®šåˆ°äº¤æ¢æœºçš„é˜Ÿåˆ—ï¼Œå°†æ¶ˆæ¯è·¯ç”±ç»™é˜Ÿåˆ—ã€‚ç¬¦å·â€œ#â€åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯ï¼Œç¬¦å·â€œ*â€åŒ¹é…ä¸å¤šä¸å°‘ä¸€ä¸ªè¯
Fanout Exchange å‘å¸ƒ/è®¢é˜…ï¼šå°†æ¶ˆæ¯è·¯ç”±ç»™ç»‘å®šåˆ°å®ƒèº«ä¸Šçš„æ‰€æœ‰é˜Ÿåˆ—ï¼Œè€Œä¸ç†ä¼šç»‘å®šçš„è·¯ç”±é”®ï¼ˆRouting Keyï¼‰ã€‚
Headers Exchange ç›´è¿äº¤æ¢æœºï¼šå‘é€æ¶ˆæ¯æ—¶åŒ¹é… Header è€Œé Routing Keyï¼Œæ€§èƒ½å¾ˆå·®ï¼Œå‡ ä¹ä¸ç”¨ã€‚
```



### Redisç¼“å­˜

SpringBootä¸Redisæ•´åˆ

> pom.xmlé…ç½®

```pom.xml
<!-- redis -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>

<!-- spring2.Xé›†æˆredisæ‰€éœ€common-pool2-->
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-pool2</artifactId>
    <version>2.6.0</version>
</dependency>
```



> application.propertiesé…ç½®

```properties
spring.redis.host=127.0.0.1
spring.redis.port=6379
spring.redis.database=0
spring.redis.timeout=1800000

spring.redis.lettuce.pool.max-active=20
spring.redis.lettuce.pool.max-wait=-1
#æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´(è´Ÿæ•°è¡¨ç¤ºæ²¡é™åˆ¶)
spring.redis.lettuce.pool.max-idle=5
spring.redis.lettuce.pool.min-idle=0
```



> Redisç¼“å­˜é…ç½®ç±»

```java
@EnableCaching //å¼€å¯ç¼“å­˜
@Configuration  //é…ç½®ç±»
public class RedisConfig extends CachingConfigurerSupport {

    @Bean
    public RedisTemplate<String, Object> redisTemplate(RedisConnectionFactory factory) {
        RedisTemplate<String, Object> template = new RedisTemplate<>();
        RedisSerializer<String> redisSerializer = new StringRedisSerializer();
        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer(Object.class);
        ObjectMapper om = new ObjectMapper();
        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);
        jackson2JsonRedisSerializer.setObjectMapper(om);
        template.setConnectionFactory(factory);
        //keyåºåˆ—åŒ–æ–¹å¼
        template.setKeySerializer(redisSerializer);
        //valueåºåˆ—åŒ–
        template.setValueSerializer(jackson2JsonRedisSerializer);
        //value hashmapåºåˆ—åŒ–
        template.setHashValueSerializer(jackson2JsonRedisSerializer);
        return template;
    }

    @Bean
    public CacheManager cacheManager(RedisConnectionFactory factory) {
        RedisSerializer<String> redisSerializer = new StringRedisSerializer();
        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer(Object.class);
        //è§£å†³æŸ¥è¯¢ç¼“å­˜è½¬æ¢å¼‚å¸¸çš„é—®é¢˜
        ObjectMapper om = new ObjectMapper();
        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);
        jackson2JsonRedisSerializer.setObjectMapper(om);
        // é…ç½®åºåˆ—åŒ–ï¼ˆè§£å†³ä¹±ç çš„é—®é¢˜ï¼‰,è¿‡æœŸæ—¶é—´600ç§’
        RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig()
                .entryTtl(Duration.ofSeconds(600))
                .serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(redisSerializer))
                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(jackson2JsonRedisSerializer))
                .disableCachingNullValues();
        RedisCacheManager cacheManager = RedisCacheManager.builder(factory)
                .cacheDefaults(config)
                .build();
        return cacheManager;
    }
}
```



> SpringBootç¼“å­˜æ³¨è§£

```
//keyåŠ ä¸Šå•å¼•å·
@Cacheable(key="'getUserList'",value="userList")
æ ¹æ®æ–¹æ³•å¯¹å…¶æ–¹æ³•ç»“æœè¿›è¡Œç¼“å­˜ï¼Œä¸‹æ¬¡è¯·æ±‚æ—¶ï¼Œå¦‚æœç¼“å­˜å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¯»å–ç¼“å­˜æ•°æ®è¿”å›ï¼›å¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œæ–¹æ³•ï¼Œ å¹¶å°†è¿”å›ç»“æœå­˜å…¥ç¼“å­˜ä¸­ã€‚ä¸€èˆ¬ç”¨åœ¨æŸ¥è¯¢æ–¹æ³•ä¸Šã€‚

@CachePut
ä½¿ç”¨è¯¥æ³¨è§£æ ‡å¿—çš„æ–¹æ³•ï¼Œæ¯æ¬¡éƒ½ä¼šæ‰§è¡Œå¹¶å°†ç»“æœå­˜å…¥æŒ‡å®šçš„ç¼“å­˜ä¸­ã€‚å…¶ä»–æ–¹æ³•å¯ä»¥ç›´æ¥ä»å“åº”çš„ç¼“å­˜ä¸­è¯»å–ç¼“å­˜æ•°æ®ï¼Œ
è€Œä¸éœ€è¦å†å»æŸ¥è¯¢æ•°æ®åº“ã€‚ä¸€èˆ¬ç”¨åœ¨æ–°å¢æ–¹æ³•ä¸Šã€‚

@CacheEvict
ä½¿ç”¨è¯¥æ³¨è§£æ ‡å¿—çš„æ–¹æ³•ï¼Œä¼šæ¸…ç©ºæŒ‡å®šçš„ç¼“å­˜ï¼Œä¸€èˆ¬ç”¨åœ¨æ›´æ–°æˆ–è€…åˆ é™¤æ–¹æ³•ä¸Šã€‚allEntriesæ¸…ç©ºæ‰€æœ‰ç¼“å­˜å±æ€§
```



### Rediså¸¸è§é¢è¯•é¢˜

å‚è€ƒï¼š[å‡ ç‡å¤§çš„Redisé¢è¯•é¢˜](https://blog.csdn.net/Butterfly_resting/article/details/89668661)  [Rediså¸¸è§é¢è¯•é¢˜](https://www.cnblogs.com/jasontec/p/9699242.html) [å“¨å…µæ¨¡å¼](https://www.jianshu.com/p/06ab9daf921d)



### Redis+RabbitMQ å®ç°è®¢å•ç§’æ€

å‚è€ƒï¼š[ç§’æ€æ€è·¯](https://blog.csdn.net/WayneLee0809/article/details/100930245)



### GETå’ŒPOSTä¸¤ç§åŸºæœ¬è¯·æ±‚æ–¹æ³•çš„åŒºåˆ«

å‚è€ƒï¼š[GETå’ŒPOSTä¸¤ç§åŸºæœ¬è¯·æ±‚æ–¹æ³•çš„åŒºåˆ«](http://cnblogs.com/songanwei/p/9387815.html)

```
é™¤äº†ä¸€äº›å¸¸è§çš„åŒºåˆ«ï¼Œä»–ä»¬åœ¨è¯·æ±‚é€Ÿåº¦ä¸Šä¹Ÿä¼šæ‰€åŒºåˆ«ï¼Œ
GETäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…ã€‚
å¯¹äºGETæ–¹å¼çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠhttp headerå’Œdataä¸€å¹¶å‘é€å‡ºå»ï¼ŒæœåŠ¡å™¨å“åº”200ï¼ˆè¿”å›æ•°æ®ï¼‰ï¼›
è€Œå¯¹äºPOSTï¼Œæµè§ˆå™¨å…ˆå‘é€headerï¼ŒæœåŠ¡å™¨å“åº”100 continueï¼Œæµè§ˆå™¨å†å‘é€dataï¼ŒæœåŠ¡å™¨å“åº”200 okï¼ˆè¿”å›æ•°æ®ï¼‰ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼ŒGETåªéœ€è¦æ±½è½¦è·‘ä¸€è¶Ÿå°±æŠŠè´§é€åˆ°äº†ï¼Œè€ŒPOSTå¾—è·‘ä¸¤è¶Ÿï¼Œç¬¬ä¸€è¶Ÿï¼Œå…ˆå»å’ŒæœåŠ¡å™¨æ‰“ä¸ªæ‹›å‘¼â€œå—¨ï¼Œæˆ‘ç­‰ä¸‹è¦é€ä¸€æ‰¹è´§æ¥ï¼Œä½ ä»¬æ‰“å¼€é—¨è¿æ¥æˆ‘â€ï¼Œç„¶åå†å›å¤´æŠŠè´§é€è¿‡å»ã€‚
å› ä¸ºPOSTéœ€è¦ä¸¤æ­¥ï¼Œæ—¶é—´ä¸Šæ¶ˆè€—çš„è¦å¤šä¸€ç‚¹ï¼Œçœ‹èµ·æ¥GETæ¯”POSTæ›´æœ‰æ•ˆã€‚å› æ­¤Yahooå›¢é˜Ÿæœ‰æ¨èç”¨GETæ›¿æ¢POSTæ¥ä¼˜åŒ–ç½‘ç«™æ€§èƒ½ã€‚ä½†è¿™æ˜¯ä¸€ä¸ªå‘ï¼è·³å…¥éœ€è°¨æ…ã€‚ä¸ºä»€ä¹ˆï¼Ÿ
1. GETä¸POSTéƒ½æœ‰è‡ªå·±çš„è¯­ä¹‰ï¼Œä¸èƒ½éšä¾¿æ··ç”¨ã€‚
2. æ®ç ”ç©¶ï¼Œåœ¨ç½‘ç»œç¯å¢ƒå¥½çš„æƒ…å†µä¸‹ï¼Œå‘ä¸€æ¬¡åŒ…çš„æ—¶é—´å’Œå‘ä¸¤æ¬¡åŒ…çš„æ—¶é—´å·®åˆ«åŸºæœ¬å¯ä»¥æ— è§†ã€‚è€Œåœ¨ç½‘ç»œç¯å¢ƒå·®çš„æƒ…å†µä¸‹ï¼Œä¸¤æ¬¡åŒ…çš„TCPåœ¨éªŒè¯æ•°æ®åŒ…å®Œæ•´æ€§ä¸Šï¼Œæœ‰éå¸¸å¤§çš„ä¼˜ç‚¹ã€‚
3. å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½ä¼šåœ¨POSTä¸­å‘é€ä¸¤æ¬¡åŒ…ï¼ŒFirefoxå°±åªå‘é€ä¸€æ¬¡ã€‚
```





### ä¸¤ä¸ªæ•°ç»„å–å·®é›†

```js
let newUser = res.result;
newUser = newUser.filter(a => {
    return !this.lr.peopleData.find(b => {
     	return a.userSerial == b.userSerial   
    })
})
this.lr.peopleData.push(...newUser)
```



### è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„åŒºåˆ«

å‚è€ƒï¼š[è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„åŒºåˆ«](https://blog.csdn.net/zxd1435513775/article/details/80556034)



### å•ç‚¹ç™»å½•

> ä»€ä¹ˆæ˜¯å•ç‚¹ç™»å½•?

```
å•ç‚¹ç™»å½•å…¨ç§°single Sign On (ä»¥ä¸‹ç®€ç§°SSO)ï¼Œæ˜¯æŒ‡åœ¨å¤šç³»ç»Ÿåº”ç”¨ç¾¤ä¸­ç™»å½•- -ä¸ªç³»ç»Ÿï¼Œä¾¿å¯åœ¨å…¶ä»–æ‰€æœ‰ç³»ç»Ÿä¸­å¾—åˆ°æˆæƒè€Œæ— éœ€å†æ¬¡ç™»å½•ï¼ŒåŒ…æ‹¬å•ç‚¹ç™»å½•ä¸å•ç‚¹æ³¨é”€ä¸¤éƒ¨åˆ†.
```



> ç™»å½•

```
ç›¸æ¯”äºå•ç³»ç»Ÿç™»å½•ï¼Œssoéœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„è®¤è¯ä¸­å¿ƒï¼Œåªæœ‰è®¤è¯ä¸­å¿ƒèƒ½æ¥å—ç”¨æˆ·çš„ç”¨æˆ·åå¯†ç ç­‰å®‰å…¨ä¿¡æ¯ï¼Œå…¶ä»–ç³»ç»Ÿä¸æä¾›ç™»å½•å…¥å£ï¼Œåªæ¥å—è®¤è¯ä¸­å¿ƒçš„é—´æ¥æˆæƒã€‚
é—´æ¥æˆæƒé€šè¿‡ä»¤ç‰Œå®ç°ï¼Œssoè®¤è¯ä¸­å¿ƒéªŒè¯ç”¨æˆ·çš„ç”¨æˆ·åå¯†ç æ²¡é—®é¢˜ï¼Œåˆ›å»ºæˆæƒä»¤ç‰Œï¼Œåœ¨æ¥ä¸‹æ¥çš„è·³è½¬è¿‡ç¨‹ä¸­ï¼Œæˆæƒä»¤ç‰Œä½œä¸ºå‚æ•°å‘é€ç»™å„ä¸ªå­ç³»ç»Ÿï¼Œå­ç³»ç»Ÿæ‹¿åˆ°ä»¤ç‰Œï¼Œå³å¾—åˆ°äº†æˆæƒï¼Œå¯ä»¥å€Ÿæ­¤åˆ›å»ºå±€éƒ¨ä¼šè¯ï¼Œå±€éƒ¨ä¼šè¯ç™»å½•æ–¹å¼ä¸å•ç³»ç»Ÿçš„ç™»å½•å¼ç›¸åŒã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯å•ç‚¹ç™»å½•çš„åŸç†ï¼Œç”¨ä¸‹å›¾è¯´æ˜
```



> æµç¨‹

```
1.è®¿é—®AåŸŸå
2.éªŒè¯æ²¡æœ‰ç™»é™† é‡å®šå‘åˆ°ç»Ÿä¸€ç™»é™†è®¤è¯ä¸­å¿ƒ
3.éªŒè¯æ˜¯å¦æœ‰å…¨å±€å¯¹è¯ â‘ æ²¡æœ‰åˆ™å“åº”åˆ°åŒæ„ç™»å½•é¡µé¢ â‘¡æœ‰ åˆ™ç›¸åº”åˆ°AåŸŸåä¸»é¡µ
4.æ²¡æœ‰çš„è¯ åˆ™è¿›è¡Œç™»å½•åˆ›å»ºå…¨å±€
```



### Httpsé…ç½®

> ç”Ÿæˆå¯†é’¥æ–‡ä»¶

```cmd
keytool -genkey -v -alias nianshaoyouwei -keyalg RSA -keystore C:/keys/nianshaoyouwei.keystore -validity 36500
```

> ç”Ÿæˆè¯ä¹¦

```cmd
keytool -export -alias nianshaoyouwei -storepass a9530.A. -file C:/keys/nianshaoyouwei.cer -keystore C:/keys/nianshaoyouwei.keystore
```

> å¯¼å…¥è¯ä¹¦ éœ€è¦å…ˆåˆ é™¤ jre\lib\security\cacerts æ–‡ä»¶

```cmd
keytool -import -keystore "C:\Program Files\Java\jdk1.8.0_131\jre\lib\security\cacerts" -storepass changeit -keypass changeit -alias emailcert -file C:/keys/nianshaoyouwei.cer
```



### MyBatis-Plus

> Mybatis-Plusï¼ˆç®€ç§°MPï¼‰æ˜¯ä¸€ä¸ª Mybatis çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ Mybatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿ 

```
<!--mybatis-plus-->
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>3.0.5</version>
</dependency>

<!--mysql-->
<!--mysql6ä»¥åŠä»¥ä¸Šæ˜¯com.mysql.cj.jdbc.Driver å¹¶ä¸”åœ¨urlä¹‹åè¦æŒ‡å®šæ—¶åŒº-->
<!--å¦‚æœä½ çš„é…ç½®æ•°æ®åº“æ–‡ä»¶æ˜¯ com.mysql.jdbc.Driver è¿™ä¸ªjaråŒ…ç‰ˆæœ¬æ¢æˆ5.1.8çš„-->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.8</version>
</dependency>

mapper ç»§æ‰¿ BaseMapper<Entity>
```



> ä¸»é”®ç”Ÿæˆç­–ç•¥

```java
/*
    AUTOã€INPUTã€NONEã€
    mpè‡ªå¸¦ç­–ç•¥ï¼šID_WORKER(19ä½æ•°å­—)ã€ID_WORKER_STR(19ä½å­—ç¬¦)
*/
@TalbleId(type=IdType.AUTO)
private Loing id;

1.è‡ªåŠ¨å¢é•¿
	AUTO_INCREMENT
2.UUID
	æ¯æ¬¡ç”Ÿæˆéšæœºå”¯ä¸€çš„å€¼
3.Rediså®ç°
    å¯ä»¥ä½¿ç”¨Redisé›†ç¾¤æ¥è·èŒæ›´é«˜çš„è´¡åé‡Œã€‚å‡å¦‚ä¸€ä¸ªé›†ç¾¤ä¸­æœ‰5å°Redis.
    å¯ä»¥åˆå§‹åŒ–æ¯å°Redisçš„å€¼åˆ†åˆ«æ˜¯1,2,3,4,5,ç„¶åæ­¥é•¿éƒ½æ˜¯Sã€‚å¤‡ä¸ªRedisç”Ÿæˆçš„IDä¸º:
        A: 1,6,11,16,21
        B: 2,7,12,17,22
        C: 1,3,8,13,18,23
        D: 4,9,14,19,24
        E: 5,10,15,20,25
4.mpè‡ªå¸¦ç­–ç•¥
	snowflakeç®—æ³•
	æ ¸å¿ƒæ€æƒ³æ˜¯:
		ä½¿ç”¨41bitä½œä¸ºæ¯«ç§’æ•°ï¼Œ10bitä½œä¸ºæœºå™¨çš„ID (5ä¸ªbitæ˜¯æ•°æ®ä¸­å¿ƒï¼Œ5ä¸ªbitçš„æœºå™¨ID)
		12bitä½œä¸ºæ¯«ç§’å†…çš„æµæ°´å·æ„æ˜§ç€æ¯ä¸ªèŠ‚ç‚¹åœ¨æ¯æ¯«ç§’å¯ä»¥äº§ç”Ÿ4096ä¸ªID)
```



> è‡ªåŠ¨å¡«å……

```java
1.åœ¨å®ä½“ç±»å±æ€§æ·»åŠ æ³¨è§£
	@TableField(fill=Field.INSERT)
	private Date createTime;
	@TableField(file=Field.INSERT_UPDATE)
	private Date updateTime;
2.åˆ›å»ºç±»ï¼Œå®ç°MetaObjectHandleå®ç°æ¥å£çš„æ–¹æ³•
    @Component
    public class MyMetaObjectHandler implements MetaObjectHandler {
        //è‡ªåŠ¨å¡«å……ï¼šæ‰§è¡Œæ’å…¥æ“ä½œ
        @Override
        public void insertFill(MetaObject metaObject) {
            this.setFieldValByName("version",1,metaObject);
            this.setFieldValByName("createDateTime",new Date(),metaObject);
            this.setFieldValByName("updateDateTime",new Date(),metaObject);
        }

        //è‡ªåŠ¨å¡«å……ï¼šæ‰§è¡Œæ›´æ–°æ“ä½œ
        @Override
        public void updateFill(MetaObject metaObject) {
            this.setFieldValByName("updateDateTime",new Date(),metaObject);
        }
    }
```



> ä¹è§‚é”

```
æ‚²è§‚é” ä¹è§‚é”æ˜¯ä¸€ç§æ€æƒ³ã€‚

æ‚²è§‚é”è¿™æ˜¯ä¸€ç§å¯¹æ•°æ®çš„ä¿®æ”¹æŠ±æœ‰æ‚²è§‚æ€åº¦çš„å¹¶å‘æ§åˆ¶æ–¹å¼ã€‚æˆ‘ä»¬ä¸€èˆ¬è®¤ä¸ºæ•°æ®è¢«å¹¶å‘ä¿®æ”¹çš„æ¦‚ç‡æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥éœ€è¦åœ¨ä¿®æ”¹ä¹‹å‰å…ˆåŠ é”ã€‚ä½†æ˜¯åœ¨æ•ˆç‡æ–¹é¢ï¼Œå¤„ç†åŠ é”çš„æœºåˆ¶ä¼šè®©æ•°æ®åº“äº§ç”Ÿé¢å¤–çš„å¼€é”€ï¼Œè¿˜æœ‰å¢åŠ äº§ç”Ÿæ­»é”çš„æœºä¼šã€‚ä½¿ç”¨çš„è¯ï¼Œå…ˆå°†è‡ªåŠ¨æäº¤äº‹åŠ¡å…³é—­ï¼Œå¼€å¯äº‹åŠ¡ï¼Œselectâ€¦for updateä¼šæŠŠæ•°æ®ç»™é”ä½ï¼Œæ›´æ–°æ•°æ®ï¼Œå…³é—­äº‹åŠ¡

ä¹è§‚é”åœ¨å¯¹æ•°æ®åº“è¿›è¡Œå¤„ç†çš„æ—¶å€™ï¼Œä¹è§‚é”å¹¶ä¸ä¼šä½¿ç”¨æ•°æ®åº“æä¾›çš„é”æœºåˆ¶ã€‚ä¸€èˆ¬çš„å®ç°ä¹è§‚é”çš„æ–¹å¼å°±æ˜¯è®°å½•æ•°æ®ç‰ˆæœ¬ã€‚è§£å†³ä¸¢å¤±æ›´æ–°ï¼Œæ›´æ–°æ—¶å¸¦ä¸Šç‰ˆæœ¬å·æ¡ä»¶ã€‚ä½¿ç”¨çš„è¯update items set age = 2where id = 1 and version = 3;
```



> ä¹è§‚é”ï¼šMyBatisPluså®ç°

```java
1.å†å®ä½“ç±»å±æ€§æ·»åŠ æ³¨è§£
    @Version
    @TableField(fill = FieldFill.INSERT)
    private Integer version;
2.æ·»åŠ ä¹è§‚é”æ’ä»¶
    @Bean
    public OptimisticLockerInterceptor optimisticLockerInterceptor() {
        return new OptimisticLockerInterceptor();
    }
3.ä»£ç å®ç°
    //æµ‹è¯•ä¹è§‚é”ï¼šå…ˆæŸ¥è¯¢ å†ä¿®æ”¹
    User user = userMapper.selectById(2);
    user.setUserName("äºŒå“¥");
    int num = userMapper.updateById(user);
    System.out.println(num);
```



> åˆ†é¡µæŸ¥è¯¢

```java
1.æ·»åŠ åˆ†é¡µæ’ä»¶
    //åˆ†é¡µæ’ä»¶
    @Bean
    public PaginationInterceptor paginationInterceptor() {
        return new PaginationInterceptor();
    }
2.ä»£ç å®ç°
    Page<User> userPage = new Page<>(1,3);
    userPage.setDesc("id");
    userMapper.selectPage(userPage,null);

    System.out.println(userPage.getCurrent());
    System.out.println(userPage.getSize());
    System.out.println(userPage.getTotal());
    System.out.println(userPage.getRecords().toString());
```



> é€»è¾‘åˆ é™¤

```java
1.å†å®ä½“ç±»å±æ€§æ·»åŠ æ³¨è§£
    @TableLogic
	private Integer is_delete;
2.æ·»åŠ é€»è¾‘åˆ é™¤æ’ä»¶
    @Bean
    public ISqlInjector sqlInjector() {
        return new LogicSqlInjector();
    }
3.å®ç°ä»£ç 
    //é€»è¾‘åˆ é™¤ï¼Œåº•å±‚æ‰§è¡Œçš„æ›´æ–°æ“ä½œ
    int num = userMapper.deleteById(2);
	//é…ç½®é€»è¾‘åˆ é™¤æ’ä»¶ï¼ŒæŸ¥è¯¢æ—¶ä¼šå¸¦ä¸Šis_deleteæ¡ä»¶ï¼Œæƒ³æŸ¥è¯¢åˆ é™¤çš„æ•°æ®ï¼Œåªèƒ½é€šè¿‡.xmlæŸ¥è¯¢
    List<User> userList = userMapper.selectList(null);
```



> æ€§èƒ½åˆ†æ

```java
1.æ·»åŠ æ€§èƒ½åˆ†ææ’ä»¶
    @Bean
    @Profile({"dev","test"})// è®¾ç½® dev test ç¯å¢ƒå¼€å¯
    public PerformanceInterceptor performanceInterceptor() {
        PerformanceInterceptor performanceInterceptor = new PerformanceInterceptor();
        performanceInterceptor.setMaxTime(500);//msï¼Œè¶…è¿‡æ­¤å¤„è®¾ç½®çš„msåˆ™sqlä¸æ‰§è¡Œ
        performanceInterceptor.setFormat(true);
        return performanceInterceptor;
    }
```



> å¤æ‚æŸ¥è¯¢

```java
//Wrapperå®ç°ç±»
QueryWrapper<User> userQueryWrapper = new QueryWrapper<>();
//æŸ¥è¯¢æ¡ä»¶
userQueryWrapper.eq("user_name","é‡‡å…ˆç”Ÿi");
//æŸ¥è¯¢éœ€è¦çš„å­—æ®µ
userQueryWrapper.select("id","user_name","create_date_time");
//æ‰§è¡ŒæŸ¥è¯¢
List<User> userList = userMapper.selectList(userQueryWrapper);
```



### ES6

> è§£æ„

```
let user = {name:'å¼ ä¸‰',age:18}
let {name,age} = user;
```



> ç®­å¤´å‡½æ•°

```
var f1 = function(m){
	return m;
}
var f2 = m => m;
```



> æ¨¡æ¿å­—ç¬¦ä¸²

```0
let name = 'å¼ ä¸‰';
let str = `æˆ‘æ˜¯${name}`;//æˆ‘æ˜¯å¼ ä¸‰

function f1(){
	return 'æå››'
}
let str = `æˆ‘æ˜¯${f1()}`;//æˆ‘æ˜¯æå››
```



> å·§å¦™ï¼š

```js
var a = "";
console.log(a || 'é»˜è®¤å€¼');//å½“aä¸ºç©ºçš„æ—¶å€™ï¼Œä¼šè¾“å‡ºé»˜è®¤å€¼

printNum(2);
function printNum(num='é»˜è®¤å€¼'){
    console.log(num);//å½“ä¸ä¼ å‚æ•°æ—¶ï¼Œä¼šè¾“å‡ºé»˜è®¤å€¼
}
```



> æ’åºï¼š

```js
let fPersons = persons.sort(function(x,y){
    return x-y;//å‡åº
    //reutrn y-x;//é™åº
})
```



> è¿‡æ»¤ï¼š

```js
let fPersons = persons.filter(p => p.name.indexOf())
```



> è¿‡æ»¤å±æ€§ï¼š

```js
let fPersons = persons.map(item => ({
	id:item.userId,
	name:item.userName
    //é‡æ–°å®šä¹‰å¯¹è±¡å±æ€§çš„key
}))
```



> æ¨¡å—åŒ–

å‚è€ƒï¼š[ES6æ¨¡å—èŠ±åŒ–](https://blog.csdn.net/qq_33295794/article/details/75338575)

```js
/*es5æ¨¡å—åŒ–*/

//åˆ›å»ºæ¨¡å—åŒ–
const num1 = 1;
const num2 = 2;
module.export = {
	num1,num2
}
//å¼•ç”¨æ¨¡å—åŒ–
const m = request('./æ–‡ä»¶å.js');
console.log(m.num1);



/*es6æ¨¡å—åŒ–ï¼šes6å®ç°æ¨¡å—åŒ–æ“ä½œï¼Œä¸èƒ½ç›´æ¥åœ¨node.jsä¸­ç›´æ¥è¿è¡Œï¼Œéœ€è¦ç”¨babelè½¬ä¸ºess5*/
//åˆ›å»ºæ¨¡å—åŒ–
export function fun1(){
    console.log('fun1');
}
export function fun2(){
    console.log('fun2');
}
//å¼•ç”¨æ¨¡å—åŒ–
import {fun1,fun2} from './æ–‡ä»¶å.js'
fun1();
fun2();
```



### é˜¿é‡Œäº‘OSS

å‚è€ƒï¼š[é˜¿é‡Œäº‘](https://www.aliyun.com/ )  [å­¦ä¹ è·¯å¾„](https://help.aliyun.com/learn/learningpath/oss.html?spm=5176.7933691.1309819.8.7f392a66swxJkC&aly_as=3eLSnC9NS)

```java
//è§£å†³Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.
@SpringBootApplication(exclude = DataSourceAutoConfiguration.class)
```



### é˜¿é‡Œäº‘çŸ­ä¿¡éªŒè¯

å‚è€ƒï¼š[é˜¿é‡Œäº‘](https://www.aliyun.com/ )  



### é˜¿é‡Œäº‘ICON

å‚è€ƒï¼š[é˜¿é‡Œäº‘ICON](https://www.iconfont.cn/)



### OAuth2

> OAuth2é’ˆå¯¹ç‰¹å®šé—®é¢˜çš„ä¸€ç§è§£å†³æ–¹æ¡ˆ(JWTæ˜¯å®ç°)ï¼ŒæŒ‰ç…§ä¸€å®šè§„åˆ™ç”Ÿæˆå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²åŒ…å«ç”¨æˆ·ä¿¡æ¯

```
ä¸»è¦è§£å†³ä¸¤ä¸ªé—®é¢˜

1.å¼€æ”¾ç³»ç»Ÿé—´çš„æˆæƒ

2.åˆ†å¸ƒå¼è®¿é—®é—®é¢˜
```



### SSOå•ç‚¹ç™»é™†

> 1.sessionå¹¿æ’­

```
sessionå¤åˆ¶
```



> 2.cookie+redis

```
1.åœ¨é¡¹ç›®ä¸­ä»»ä½•ä¸€ä¸ªæ¨¡å—è¿›è¡Œç™»å½•ï¼Œè³½å½•ä¹‹åï¼ŒæŠŠæ•°æ®æ”¾åˆ°ä¸¤ä¸ªåœ°æ–¹
(1) redis,åœ¨keyç”Ÿæˆå”¯ä¸€éšæœºå€¼(ipã€ç”¨æˆ·idç­‰ç­‰)ã€‚åœ¨valueè·å–ç”¨æˆ·æ•°æ®
(2) cookie;æŠŠredisé‡Œé¢ç”Ÿæˆkeyå€¼æ”¾åˆ°cookieé‡Œé¢
2ã€è®¿é—®é¡¹ç›®ä¸­å…¶ä»–æ¨¡å—ï¼Œå‘é€è¯·æ±‚å¸¦ç€cookieè¿›è¡Œå‘é€ã€‚è·å–cookieå€¼ï¼Œæ‹¿ç€cookieåšäº‹æƒ…
(1)æŠŠcookieè·å–å€¼ï¼Œåˆ°redisè¿›è¡ŒæŸ¥è¯¢ï¼Œæ ¹æ®keyè¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æœæŸ¥è¯¢æ•°æ®å°±æ˜¯ç™»å½•
```



> 3.ä½¿ç”¨token

```
tokenï¼šæŒ‰ç…§ä¸€å®šè§„åˆ™ç”Ÿæˆå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²å¯ä»¥åŒ…å«ç”¨æˆ·ä¿¡æ¯
1.åœ¨é¡¹ç›®æŸä¸ªæ¨¡å—è¿›è¡ŒæŸ¥å½•ï¼ŒæŸ¥å½•ä¹‹åï¼ŒæŒ‰ç…§è§„åˆ™ç”Ÿæˆå­—ç¬¦ä¸²ï¼ŒæŠŠç™»å½•ä¹‹åç”¨æˆ·åŒ…å«åˆ°ç”Ÿæˆå­—ç¬¦ä¸²é‡Œé¢ï¼ŒæŠŠå­—ç¬¦ä¸²è¿”å›
(1)å¯ä»¥æŠŠå­—ç¬¦ä¸²é€šè¿‡cookieè¿”å›
(2)æŠŠå­—ç¬¦ä¸²é€šè¿‡åœ°å€æ è¿”å›
2ã€å†å»è®¿é—®é¡¹ç›®å…¶ä»–æ¨¡å—ï¼Œæ¯æ¬¡è®¿é—®åœ¨åœ°å€æ å¸¦ç€ç”Ÿæˆå­—ç¬¦ä¸²ï¼Œåœ¨è®¿é—®æ¨¡å—é‡Œé¢è·å–åœ°å€æ å­—ç¬¦ä¸²,æ ¹æ®å­—ç¬¦ä¸²è·å–ç”¨æˆ·ä¿¡æ¯ã€‚å¦‚ä½•å¯ä»¥è·å–åˆ°ï¼Œå°±æ˜¯ç™»å½•
```



### JWTå®ç°TokenéªŒè¯

å‚è€ƒï¼š[JWT](https://www.jianshu.com/p/e88d3f8151db)   [JWTå¸¸è§é—®é¢˜](https://blog.csdn.net/u013089490/article/details/84443667)  [JWTé¢è¯•](https://blog.csdn.net/MINGJU2020/article/details/103039418?depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1&utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1)

```
1.è°ƒç”¨ç™»å½•æ¥å£è¿”å›token
2.å‰ç«¯æŠŠtokenæ”¾å…¥cookieä¸­(ä½¿ç”¨æ’ä»¶cnpm install js-cookie)
3.åˆ›å»ºå‰ç«¯æ‹¦æˆªå™¨ï¼Œåˆ¤æ–­cookieé‡Œé¢æ˜¯å¦æœ‰tokenå­—ç¬¦ä¸²ï¼Œå¦‚æœæœ‰æŠŠtokenå­—ç¬¦ä¸²æ”¾å…¥header(è¯·æ±‚å¤´ä¸­)
4.æ ¹æ®tokenå€¼ï¼Œè°ƒç”¨æ¥å£æ ¹æ®tokenè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œä¸ºäº†é¦–é¡µæ˜¾ç¤ºï¼ŒæŠŠè¿”å›ç”¨æˆ·ä¿¡æ¯æ”¾å…¥cookieä¸­
5.é¦–é¡µé¢æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ï¼Œä»cookieä¸­è·å–
```



> pom.xml

```xml
<!-- JWT-->
<dependency>
    <groupId>io.jsonwebtoken</groupId>
    <artifactId>jjwt</artifactId>
    <version>0.7.0</version>
</dependency>
```



> JWTUtils

```java
package com.atguigu.commonutils;

import io.jsonwebtoken.Claims;
import io.jsonwebtoken.Jws;
import io.jsonwebtoken.Jwts;
import io.jsonwebtoken.SignatureAlgorithm;
import org.springframework.http.server.reactive.ServerHttpRequest;
import org.springframework.util.StringUtils;

import javax.servlet.http.HttpServletRequest;
import java.util.Date;

public class JwtUtils {
    //å¸¸é‡
    public static final long EXPIRE = 1000 * 60 * 60 * 24; //tokenè¿‡æœŸæ—¶é—´
    public static final String APP_SECRET = "ukc8BDbRigUDaY6pZFfWus2jZWLPHO"; //ç§˜é’¥

    //ç”Ÿæˆtokenå­—ç¬¦ä¸²çš„æ–¹æ³•
    public static String getJwtToken(String id, String nickname){
        String JwtToken = Jwts.builder()
                .setHeaderParam("typ", "JWT")
                .setHeaderParam("alg", "HS256")

                .setSubject("guli-user")
            	//ä»ä»€ä¹ˆæ—¶é—´è®¡ç®—
                .setIssuedAt(new Date())
            	//è¿‡æœŸæ—¶é—´
                .setExpiration(new Date(System.currentTimeMillis() + EXPIRE))
				
            	//è®¾ç½®tokenä¸»ä½“éƒ¨åˆ† ï¼Œå­˜å‚¨ç”¨æˆ·ä¿¡æ¯
                .claim("id", id)  
                .claim("nickname", nickname)

                .signWith(SignatureAlgorithm.HS256, APP_SECRET)
                .compact();

        return JwtToken;
    }

    /**
     * åˆ¤æ–­tokenæ˜¯å¦å­˜åœ¨ä¸æœ‰æ•ˆ
     * @param jwtToken
     * @return
     */
    public static boolean checkToken(String jwtToken) {
        if(StringUtils.isEmpty(jwtToken)) return false;
        try {
            Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwtToken);
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
        return true;
    }

    /**
     * åˆ¤æ–­tokenæ˜¯å¦å­˜åœ¨ä¸æœ‰æ•ˆ
     * @param request
     * @return
     */
    public static boolean checkToken(HttpServletRequest request) {
        try {
            String jwtToken = request.getHeader("token");
            if(StringUtils.isEmpty(jwtToken)) return false;
            Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwtToken);
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
        return true;
    }

    /**
     * æ ¹æ®tokenå­—ç¬¦ä¸²è·å–ä¼šå‘˜id
     * @param request
     * @return
     */
    public static String getMemberIdByJwtToken(HttpServletRequest request) {
        String jwtToken = request.getHeader("token");
        if(StringUtils.isEmpty(jwtToken)) return "";
        Jws<Claims> claimsJws = Jwts.parser().setSigningKey(APP_SECRET).parseClaimsJws(jwtToken);
        Claims claims = claimsJws.getBody();
        return (String)claims.get("id");
    }
}
```



### Vue

æ¡†æ¶ï¼šnuxtã€elementã€antã€vant

> è¿‡æ»¤å™¨ï¼š

```js
{{new Date() || formatDate('yyyy-MM-dd HH:mm:ss')}}

Vue.filter('formatDate'),function(value,format='yyyy-MM-dd'){
	//format='yyyy-MM-dd' es6å†™æ³•ï¼Œé»˜è®¤å€¼ yyyy-MM-dd
    return '';
}
```



> ç»Ÿè®¡ï¼š

```js
let items = [1,2,3,4,5];
return this.items.reduce((preTotal,item) => preTotal+item ,0)
```



> å†…ç½®æŒ‡ä»¤ï¼š

è¿™äº›æŒ‡ä»¤è§£æåï¼ŒæŸ¥çœ‹HTMLå°±ä¼šæ¶ˆå¤±ï¼Œv-cloakå°±æ˜¯åˆ©ç”¨è¿™ä¸€ç‚¹é˜²æ­¢é—ªç°

```txt
v:text		æ›´æ–°å…ƒç´ çš„testContent
v-html		æ›´æ–°å…ƒç´ çš„innerHTML
v-if		å¦‚æœä¸ºtrue,å½“å‰æ ‡ç­¾æ‰ä¼šè¾“å‡ºåˆ°é¡µé¢
v-else 		å¦‚æœä¸ºfalse,å½“å‰æ ‡ç­¾æ‰ä¼šè¾“å‡ºåˆ°é¡µé¢
v-show		é€šè¿‡æ§åˆ¶displayæ ·å¼æ¥æ§åˆ¶æ˜¾ç¤º/éšè—
v-for		éå†æ•°ç»„/å¯¹è±¡
v-on		ç»‘å®šé‚£ä¸ªäº‹ä»¶,ä¸€èˆ¬ç®€å†™ä¸º@
v-bind		å¼ºåˆ¶ç»‘å®šè§£æè¡¨è¾¾å¼,ä¸€èˆ¬ç®€å†™ä¸º:
v-model		æ “é¦™æ¸¯iæ˜‚æ•°æ®ç»‘å®š
ref			ä¸ºæŸä¸ªå…ƒç´ æ³¨å†Œä¸€ä¸ªå”¯ä¸€è¡¨ç¤º,vueç‹¬äº«é€šè¿‡$relså±æ€§è®¿é—®è¿™ä¸ªå…ƒç´ å¯¹è±¡
v-cloak		ä½¿ç”¨å®ƒé˜²æ­¢é—ªç°è¡¨è¾¾å¼,ä¸cssé…åˆ:[v-cloak]{display:none}
```



> å®šä¹‰æŒ‡ä»¤ï¼š

å…¨å±€æŒ‡ä»¤

```js
<p v-upper-text="'Just do It'"></p>

Vue.directive('upper-text',function(el,binding){
    console.log(el,binding);
    el.textContent = binding.value.toUpperCase();
})
```

å±€éƒ¨æŒ‡ä»¤

```js
<p v-lower-text="msg">Just do It</p>

new Vue({
    el:"#app",
    data:{
       msg:"Just like this"
    },
    directives:{
    	'lower-text':function(el,binding){
        	el.textContent = binding.value.toLowerCase();
            //æ–‡æœ¬å†…å®¹å˜æˆå°å†™ï¼Œä»…ä»…æ˜¯æ–‡æœ¬å†…å®¹ï¼Œmsgå˜é‡å†…å®¹ä¸å˜
    	}
    }
})
```



> ç»‘å®šç›‘å¬ï¼š

```js
<button @click="test1()>test1</button>
<button @click="test2('123')">test2</button>
<button @click="test2('123',$event)">test2</button>

new Vue({
    el:"#app",
    data:{
        test1(event){
            alert(event.target.innerHTML);//è¾“å‡ºtest1
        },
        test2(content){
            alert(content);//è¾“å‡º123
        },
        test1(content,event){
            alert(content);//è¾“å‡º123
            alert(event.target.innerHTML);//è¾“å‡ºtest
        }
    }
})
```



> æ—¶é—´ä¿®é¥°ç¬¦ï¼š

```html
<!-- é˜»æ­¢å•å‡»äº‹ä»¶å†’æ³¡ -->
<a @click.stop="doThis"></a>

<!-- æäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢ï¼Œé˜»æ­¢äº‹ä»¶é»˜è®¤è¡Œä¸º -->
<form @submit.prevent="onSubmit"></form>

<!-- ä¿®é¥°ç¬¦å¯ä»¥ä¸²è”  -->
<a @click.stop.prevent="doThat"></a>

<!-- åªå½“äº‹ä»¶åœ¨è¯¥å…ƒç´ æœ¬èº«ï¼ˆè€Œä¸æ˜¯å­å…ƒç´ ï¼‰è§¦å‘æ—¶è§¦å‘å›è°ƒ -->
<div @click.self="doThat">...</div>

<!-- click äº‹ä»¶åªèƒ½ç‚¹å‡»ä¸€æ¬¡ï¼Œ2.1.4ç‰ˆæœ¬æ–°å¢ -->
<a @click.once="doThis"></a>
```



> æŒ‰é”®ä¿®é¥°ç¬¦ï¼š

```html
<input @keyup.enter="submit">
<input @keyup.delete (æ•è· "åˆ é™¤" å’Œ "é€€æ ¼" é”®)="submit">
```



> è‡ªå®šä¹‰äº‹ä»¶ï¼š

```js
1.ç»‘å®šäº‹ä»¶
<TodoHeader @addTodo="addTodo" ref='header'/>
<!-- å£°æ˜refï¼Œå†jsä¸­èƒ½è°ƒç”¨è¯¥ç»„ä»¶ï¼Œthis.$refs.header -->

2.è§¦å‘äº‹ä»¶
const data {
    name:'_Cps',
    check:true
};
this.$emit('addTodo',data);
```



> æ’ä»¶ï¼š

```js
/*********Begin-MyPlugin.js*********/
(function (window) {
      const MyPlugin = {}
      MyPlugin.install = function (Vue, options) {
        // 1. æ·»åŠ å…¨å±€æ–¹æ³•æˆ–å±æ€§
        Vue.myGlobalMethod = function () {
          console.log('Vueå‡½æ•°å¯¹è±¡çš„myGlobalMethod()')
        }

        // 2. æ·»åŠ å…¨å±€èµ„æº
        Vue.directive('my-directive',function (el, binding) {
          el.textContent = 'my-directive----'+binding.value
        })

        // 4. æ·»åŠ å®ä¾‹æ–¹æ³•
        Vue.prototype.$myMethod = function () {
          console.log('vm $myMethod()')
        }
      }
      //å‘å¤–æš´éœ²
      window.MyPlugin = MyPlugin
})(window)
/*********End-MyPlugin.js*********/

<div id="test">
  <p v-my-directive="msg"></p>
</div>

<script type="text/javascript" src="../js/vue.js"></script>
<script type="text/javascript" src="vue-myPlugin.js"></script>
<script type="text/javascript">
  Vue.use(MyPlugin) // å£°æ˜ä½¿ç”¨æ’ä»¶,å†…éƒ¨ä¼šè°ƒç”¨æ’ä»¶å¯¹è±¡çš„install()
  const vm = new Vue({
    el: '#test',
    data: {
      msg: 'HaHa'
    }
  });
  Vue.myGlobalMethod();
  vm.$myMethod();
</script>
```



ç”Ÿå‘½å‘¨æœŸï¼š

![](image\Vueç”Ÿå‘½å‘¨æœŸ.png)

![](image\Vueç”Ÿå‘½å‘¨æœŸè§£æ.png)

```js
new Vue({
    el:"#app",
    data:{
        isShow = true;
    },
    mounted(){//åˆå§‹åŒ–æ˜¾ç¤ºä¹‹åç«‹å³è°ƒç”¨
        this.intervalId = setInterval(
        	consolot.log('-------');
        	this.isShow = !this.isShow
        ),1000)
    },
    beforeDestory(){//æ­»äº¡ä¹‹å‰è°ƒç”¨
        //æ¸…é™¤å®šæ—¶å™¨
        clearInterval(this.intervalId);//è¿™é‡Œèƒ½è°ƒåˆ°intervarIdï¼Œåªå› ä¸ºåˆå§‹åŒ–ç»™äº†vueå®ä¾‹
    }
})
```



> Vueç»„ä»¶åŒ–ç¼–ç 

1. æ‹†åˆ†ç»„ä»¶
2. é™æ€ç»„ä»¶
3. åŠ¨æ€ç»„ä»¶ï¼ˆåˆå§‹åŒ–æ˜¾ç¤ºã€äº¤äº’ï¼‰



æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ

ç»„ä»¶è¿›è¡Œé€šä¿¡ï¼Œæ²¡æœ‰ä»»ä½•ä½ç½®çš„é™åˆ¶ï¼Œå°±ä¸ç”¨ç»„ä»¶é—´ä¼ é€’æ•°æ®äº†

```js
cnpm install  --save pubsub-js

import PubSub from pubsub-js

//è®¢é˜…æ¶ˆæ¯
PubSub.subscribe('deleteTodo',function(msg,data){
    //è¿™é‡Œé¢çš„thiså°±ä¸æ˜¯ä»£è¡¨vueç»„ä»¶äº†å¯ä»¥è¿™æ ·å†™ä¸‹é¢
})

//å‘å¸ƒæ¶ˆæ¯
PubSub.publish('deleteTodo',param)

---------------------------------------------------------------------------------------

//è®¢é˜…æ¶ˆæ¯
PubSub.subscribe('deleteTodo',(msg,data) => {
	//è¿™é‡Œçš„thiså°±å¯ä»¥ä»£è¡¨vueç»„ä»¶ï¼Œè¿™ä¸ªå‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œå°±ä¼šä½¿ç”¨å¤–éƒ¨çš„this
})

//å‘å¸ƒæ¶ˆæ¯
PubSub.publish('deleteTodo',(msg,data) => {
    //å…¶ä»–çŸ¥è¯†ï¼Œå¦‚æœæ˜¯è¦è¿”å›å¯¹è±¡çš„è¯,è¿™æ ·å†™ => ({
    //
	//})
})

```

> slot

æ­¤æ–¹å¼ç”¨äºçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’`æ ‡ç­¾æ•°æ®`

```js
//å­ç»„ä»¶
<template>
	<div>
        <slotname="xxx">ä¸ç¡®å®šçš„æ ‡ç­¾ç»“æ„ 1</slot>
        <div>ç»„ä»¶ç¡®å®šçš„æ ‡ç­¾ç»“æ„</div>
        <slotname="yyy">ä¸ç¡®å®šçš„æ ‡ç­¾ç»“æ„ 2</slot>
	</div>
</template>

//çˆ¶ç»„ä»¶
<div>
    <divslot="xxx">xxx å¯¹åº”çš„æ ‡ç­¾ç»“æ„</div>
    <divslot="yyy">yyyy å¯¹åº”çš„æ ‡ç­¾ç»“æ„</div>
</div>
```



> è·¯ç”±å‚æ•°

```js
1ã€æ‰‹å†™å®Œæ•´çš„ path:
 
    this.$router.push({path: `/user/${userId}`});
 
    //è·å–å‚æ•°ï¼šthis.$route.params.userId
 
2ã€ç”¨ params ä¼ é€’ï¼š
 
    this.$router.push({name:'user', params:{userId: '123'}});
 
    //è·å–å‚æ•°ï¼šthis.$route.params.userId
    //url å½¢å¼ï¼šurl ä¸å¸¦å‚æ•°ï¼Œhttp:localhost:8080/#/user
 
3ã€ç”¨ query ä¼ é€’ï¼š
 
    this.$router.push({path:'/user', query:{userId: '123'}});
 
    //è·å–å‚æ•°ï¼šthis.$route.query.userId
    //url å½¢å¼ï¼šurl å¸¦å‚æ•°ï¼Œhttp:localhost:8080/#/user?userId=123

/**
    this.$router.push({path:'/user', params:{userId}});  //->/user
    //è¿™é‡Œçš„ params ä¸ç”Ÿæ•ˆ,å¦‚æœæä¾›äº† pathï¼Œåˆ™params ä¼šè¢«å¿½ç•¥
    
    query  ç›¸å½“äº get è¯·æ±‚ï¼Œé¡µé¢è·³è½¬çš„æ—¶å€™å¯ä»¥åœ¨åœ°å€æ çœ‹åˆ°è¯·æ±‚å‚æ•°ï¼Œ
    params ç›¸å½“äº post è¯·æ±‚ï¼Œå‚æ•°ä¸åœ¨åœ°å€æ ä¸­æ˜¾ç¤ºã€‚
    è¦æ³¨æ„ï¼Œä»¥ / å¼€å¤´çš„åµŒå¥—è·¯å¾„ä¼šè¢«å½“ä½œæ ¹è·¯å¾„ã€‚ è¿™è®©ä½ å……åˆ†çš„ä½¿ç”¨åµŒå¥—ç»„ä»¶è€Œæ— é¡»è®¾ç½®åµŒå¥—çš„è·¯å¾„ã€‚
*/
```



> è·¯ç”±ç›‘å¬

```
//ç›‘å¬
watch:{
	//è·¯ç”±å˜åŒ–å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ä¼šæ‰§è¡Œè¯¥ä»£ç å—
	$router(to,from){
		//åŒä¸€ä¸ªç»„ä»¶ç‚¹å‡»ä¸¤æ¬¡ï¼Œä¸ä¼šå†æ¬¡æ‰§è¡Œcreatedæ–¹æ³•ï¼Œæ‰€ä»¥æœ‰æ—¶å€™éœ€æ±‚å¯èƒ½è¦è¿›è¡Œä¸€äº›å¤„ç†ã€‚
	}
}
```



> Ajaxè¯·æ±‚

ä¸€ã€vue-resourceæ¨¡å—

```js
//åœ¨é¡¹ç›®ä¸­å®‰è£…
cnpm install vue-resource --save

// å¼•å…¥æ¨¡å— 
importVueResourcefrom'vue-resource' 
// ä½¿ç”¨æ’ä»¶ 
Vue.use(VueResource)
// é€šè¿‡ vue/ç»„ä»¶å¯¹è±¡å‘é€ ajax è¯·æ±‚ 
this.$http.get('/someUrl').then((response)=>{ //successcallback 
    console.log(response.data)//è¿”å›ç»“æœæ•°æ®
},(response)=>{ //errorcallback
    console.log(response.statusText)//é”™è¯¯ä¿¡æ¯
})
```

äºŒã€axiosæ¨¡å—

```js
//åœ¨é¡¹ç›®ä¸­å®‰è£…
cnpm install axios --save

// å¼•å…¥æ¨¡å— 
import axios from 'axios'

// å‘é€ ajax è¯·æ±‚ 
axios.get(url) .then(response=>{ 
    console.log(response.data)// å¾—åˆ°è¿”å›ç»“æœæ•°æ® 
}) .catch(error=>{ 
    console.log(error.message)//é”™è¯¯ä¿¡æ¯
})
```



> Vue + Axios å¯¼å…¥Excel

```js
import reqwest from 'reqwest'

//çœŸæ­£çš„å¯¼å…¥
handleOkImport(e) {
    let _this = this;
    const { fileList } = this;
    const formData = new FormData();
    if(fileList.length==0){
        this.$message.warning('è¯·é€‰æ‹©æ–‡ä»¶!');
    }else{
        fileList.forEach((file) => {
            formData.append('file', file);
        });
        //console.log("fileList:"+fileList[0]);
        reqwest({
            url: _this.apiUrl+'importAttendance/importExcel',
            method: 'post',
            processData: false,
            data: formData,
            success: (result) => {
                if(result.code=='200'){
                    this.fileList = []
                    this.uploading = false
                    this.$message.success('å¯¼å…¥æˆåŠŸ!');
                    this.visibleImport = false;
                }else{
                    this.uploading = false
                    this.$message.error(result.message);
                }
                this.getLogList();
            },
            error: () => {
                this.uploading = false
                this.$message.error('å¯¼å…¥å¤±è´¥!');
            },
        });
    }

},
```



> Vue + Ant å…¼å®¹IEæµè§ˆå™¨

å‚è€ƒï¼š[å…¼å®¹æ€§](https://blog.csdn.net/lydxwj/article/details/89912983)

babel.config.js`æ–‡ä»¶

```js
module.exports = {
  presets: [
    '@vue/app',
    // å…¼å®¹é…ç½®
    [
      '@babel/preset-env',
      {
        'useBuiltIns': 'entry'
      }
    ]
  ],
  // æŒ‰éœ€åŠ è½½é…ç½®
  plugins: [
    [
      'import',
      {
        libraryName: 'ant-design-vue',
        libraryDirectory: 'es',
        style: 'css'
      },
    ]
  ]
}
```



`main.js`æ–‡ä»¶ï¼ˆé¡¹ç›®å…¥å£ï¼‰

```js
// å¼•å…¥@babel/polyfillå¤„ç†å…¼å®¹ 
import '@babel/polyfill'

import Vue from 'vue'
import App from './App.vue'
import router from './router/router'
import store from './store/store'
import './plugins/antd.js'
new Vue({
  router,
  store,
  render: h => h(App)
}).$mount('#app')
```



é˜²æ­¢æ•°æ®è¯»å–ç¼“å­˜

å‚è€ƒï¼š[é˜²æ­¢æ•°æ®è¯»å–ç¼“å­˜](https://blog.csdn.net/weixin_38659265/article/details/90265999)

![](image\è§£å†³IEæ€»æ˜¯è¯»å–ç¼“å­˜.png)

```js
//æˆ‘ä»¬å¯ä»¥åœ¨å°è£…axiosæ—¶ï¼Œé»˜è®¤ç»™è¯·æ±‚åŠ ä¸Šæ—¶é—´æˆ³ï¼Œä¸‹é¢æ˜¯ç»™getå’Œpostè¯·æ±‚é»˜è®¤æ·»åŠ æ—¶é—´æˆ³ï¼š
// æ·»åŠ æ—¶é—´æˆ³       
 if (config.method === 'post') {            
 	config.data = {                
 		...config.data,                
 		t: Date.parse(new Date()) / 1000           
 	}       
 } else if (config.method === 'get') {          
 	 config.params = {               
 	 	 t: Date.parse(new Date()) / 1000,               
 	 	...config.params            
 	}       
 }
```



IEè·¯ç”±é¡µé¢è·¯ç”± ä¸åˆ·æ–°é—®é¢˜ï¼Œåœ¨App.vueé¡µé¢

```js
mounted() {
    if (!!window.ActiveXObject || "ActiveXObject" in window) {
      window.addEventListener(
        "hashchange",
        () => {
          let currentPath = window.location.hash.slice(1);
          if (this.$route.path !== currentPath) {
            this.$router.push(currentPath);
          }
        },
        false
      );
    }
}
```





`router.js`ï¼Œè¦è€ƒè™‘ï¼ŒIEè·¯ç”±é—®é¢˜ï¼ŒIEçš„URLå¦‚æœåŠ  ''#'' å·ï¼Œé¡µé¢åˆ™ä¸ä¼šåˆ·æ–°ï¼Œæ‰€ä»¥è¦æƒ³åŠæ³•å»æ‰è·¯ç”±ä¸­çš„ ''#'' å·

```js
export default new Router({
  mode : "history",	//è¯¥å±æ€§å¯ä»¥å»æ‰ #
  routes: [ 
    {
      path: '/admin',
      component: admin
    },{
      path: '/home',
      component: home
    }
  ]
})
```



å¦‚æœå»æ‰äº†#å·ï¼ŒVueæ‰“åŒ…è¿‡åæ‰¾ä¸åˆ°é¡µé¢è§£å†³åŠæ³•

å‚è€ƒï¼š[é¡µé¢æ‰¾ä¸åˆ°](https://blog.csdn.net/IsITMan/article/details/85121729)

```

```



> Vue + Ant ä¸­æ–‡å›½é™…åŒ–é…ç½®

```vue
<template>
  <a-locale-provider :locale="locale">
    <router-view/>
  </a-locale-provider>
</template>

<script>

import zhCN from "ant-design-vue/lib/locale-provider/zh_CN";
export default {
  data() {
    return {
      locale: zhCN
    };
  }
}
```



> Vue + Ant è¡¨æ ¼åˆ†é¡µ

å‚è€ƒï¼š[è¡¨æ ¼åˆ†é¡µ](https://www.cnblogs.com/zhaogaojian/p/11162280.html)

1ã€è®¾ç½®pagination

```html
 <a-table :columns="columns" :dataSource="data" :rowSelection="rowSelection" 	:pagination="pagination">
     <a slot="action" href="javascript:;">æŸ¥çœ‹</a>
  </a-table>
```

2ã€è‡ªå®šä¹‰paginationï¼Œæ³¨æ„å†™æˆonChange,changeä¸è¡Œï¼Œç°è‰²éƒ¨åˆ†è¯·æ ¹æ®è‡ªå·±å®é™…ä»£ç ä¿®æ”¹ã€‚

```js
data () {
    let _this = this;
    return {
      collapsed: false,
      data,
      sels,
      columns,
      rowSelection,
      pagination: {
        pageNo: 1,
        pageSize: 20, // é»˜è®¤æ¯é¡µæ˜¾ç¤ºæ•°é‡
        showSizeChanger: true, // æ˜¾ç¤ºå¯æ”¹å˜æ¯é¡µæ•°é‡
        pageSizeOptions: ['10', '20', '50', '100'], // æ¯é¡µæ•°é‡é€‰é¡¹
        showTotal: total => `Total ${total} items`, // æ˜¾ç¤ºæ€»æ•°
        onShowSizeChange: (pageNo, pageSize) => _this.changePage(1,pageSize),
        onChange:(pageNo,pageSize)=>_this.changePage(pageNo,pageSize),//ç‚¹å‡»é¡µç äº‹ä»¶
        total:0 //æ€»æ¡æ•°
       }
    }
  },
```

3ã€Ajaxè¯»å–æ•°æ®åˆ—è¡¨æ—¶pagination.totalèµ‹æ€»æ¡æ•°å³å¯

```js
.then((response) => {
    that.data = response.data.items
    that.pagination.total=response.data.total
    console.log(response)
})
```

4ã€å®šä¹‰æ”¹å˜é¡µç äº‹ä»¶

```js
changePage(pageNo,pageSize){
    that.pagination.pageNo = pageNo;
    that.pagination.pageSize = pageSize;
    searchUser();//è¯·æ±‚æ•°æ®
}
```

5ã€è¯»å–æ•°æ®æ—¶å¸¦ä¸Šå½“å‰é¡µã€åˆ†é¡µå¤§å°ï¼Œè¿‡æ»¤æ¡ä»¶ï¼Œåç«¯ä»£ç å¯ä»¥ç®€å•ä½¿ç”¨é€šç”¨åˆ†é¡µæ–¹æ³•è¿”å›Jsonæ•°æ®å³å¯ï¼Œ

```js
searchUser () {
    let param= {pageNo:this.pagination.pageNo,pageSize:this.pagination.pageSize};
    this.getUser(param);
},
```



> Vue ç»„ä»¶æ•°æ®åŒå‘ç»‘å®š

å‚è€ƒï¼š[åŒå‘ç»‘å®š](https://blog.csdn.net/w390058785/article/details/81076569)

```js
<body>
<script src="https://cdn.bootcss.com/vue/2.5.16/vue.js"></script>
<div id="box">
    <new-input v-bind:name.sync="name"></new-input>
    {{name}}
</div>
<script>
	Vue.component('new-input',{
        props: ['name'],
        data: function(){
            return {
                newName: this.name
            }	
        },
        template:'<label><input @keyup="changeName" v-model="newName" />ä½ çš„åå­—</label>',
        methods: {
            changeName: function(){
                this.$emit('update:name',this.newName);
            }
        }	
    });
    new Vue({
        el:'#box',	
        data: {
        	name:'nick'		
        }
    });
</script>
</body>

/* ------------------------------------------------------------------------------- */
/*
	é€šè¿‡ä¸æ–¹æ³•ä¸€è¿›è¡Œæ¯”è¾ƒï¼šä¼šå‘ç°

    <new-input v-bind:name="name" v-on:update:name="name = $event"></new-input>

    è¢«ç®€åŒ–æˆäº†

    <new-input v-bind:name.sync="name"></new-input>

    è€Œå…¶ä»–ä»£ç ä¸å˜ã€‚

    æ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨.syncä¿®é¥°ç¬¦çš„æ—¶å€™ï¼Œåªéœ€è¦æ³¨æ„ï¼Œv-bind:xxï¼Œv-on:update:xxï¼Œv-bind:xx.syncçš„å·®å¼‚å°±è¡Œäº†ã€‚

    è€Œä¸”æ³¨å†Œäº‹ä»¶çš„æ—¶å€™ä¸€å®šè¦ç”¨this.$emit( 'update:xx' );

*/

```



### å¾®ä¿¡æ”¯ä»˜æ¥å£

é€šä¿—æ¥è®²ï¼Œæˆ‘ä»¬å°±æ˜¯è¦å’Œå¾®ä¿¡è¿›è¡Œæ‰“äº¤é“ï¼Œä½ è°ƒæˆ‘APIï¼Œæˆ‘è°ƒä½ çš„APIã€‚è¿™é‡Œå¤§ä½“æ€è·¯æ˜¯å…ˆ ç”Ÿæˆé¢„è®¢å•ï¼Œç„¶åæ”¯ä»˜å®Œæˆï¼Œä½†æ˜¯ç”Ÿæˆè®¢å•éœ€è¦ä¸€äº›å‡†å¤‡æ¡ä»¶ï¼ˆcodeã€openIdã€signç­‰ç­‰ï¼‰

1. è·å–code
2. é€šè¿‡codeè·å–openId
3. ç”Ÿæˆé¢„è®¢å•ï¼Œéœ€è¦ä¼ å¾ˆå¤šå‚æ•°ï¼ˆè¿™é‡Œçš„è·å–signç¨å¾®éº»çƒ¦äº†ä¸€ç‚¹ï¼‰ï¼Œè¿”å›ä¸è®¢å•ä¿¡æ¯ï¼Œç„¶åç”¨æˆ·ç¡®è®¤æ”¯ä»˜



#### JSAPIæ”¯ä»˜

å‚è€ƒï¼š[JSAPIæ”¯ä»˜](https://www.cnblogs.com/wuer888/p/7839139.html)	 [JSAPIæ”¯ä»˜å®˜ç½‘](https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_1)

> 1.ç»Ÿä¸€ä¸‹å•ï¼Œå¾—åˆ°é¢„æ”¯ä»˜id
>
> ```sql
> å…¶ä¸­ä¼šç”¨åˆ°å¾ˆå¤šå‚æ•°ï¼Œappid mch_id openid signè¿™äº›ï¼Œè€Œopenidå’Œsignéœ€è¦è¿›è¡Œä¸€äº›å¤„ç†æ‰èƒ½å¾—åˆ°ï¼Œ
> 		æŒ‰ç…§è§„å®šå°†Mapçš„å‚æ•°è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²çš„å½¢å¼(å­—æ®µå=å­—æ®µå€¼&å­—æ®µå=å­—æ®µå€¼)å¹¶ä¸”è¿›è¡Œå­—æ®µåå­—å…¸æ’åº
> 		å…¶å®æˆ‘ä»¬æœ€ç»ˆä¸‹å•çš„å‚æ•°æ˜¯ä¸€ä¸ªxmlçš„Stringç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦æŠŠé‚£äº›å‚æ•°æ”¾å…¥Mapä¸­è½¬æ¢æˆxml
> ```

> 2.ç»„è£…è°ƒèµ·æ”¯ä»˜çš„å‚æ•°
>
> ```
> è¿™ä¸ªæ­¥éª¤å…¶å®å°±æ˜¯å°è£…å‚æ•°ï¼Œé¢„æ”¯ä»˜idã€å…¶ä»–çš„é…ç½®ä¿¡æ¯signç­¾åç”Ÿæˆè¯·æ±‚æ•°æ®
> ```

> 3.è°ƒèµ·æ”¯ä»˜
>
> ```
> ä½¿ç”¨jssdkæˆ–è€…h5æ¥å£è°ƒèµ·æ”¯ä»˜è¿›è¡Œæ”¯ä»˜ï¼Œæ ¹æ®æ”¯ä»˜ç»“æœå†è¿›è¡Œç›¸å¯¹åº”çš„æ“ä½œ
> ```



```js
//JSæ‹‰å–æ”¯ä»˜
function onBridgeReady(){
   WeixinJSBridge.invoke(
      'getBrandWCPayRequest', {
         "appId":"wx2421b1c4370ec43b",     //å…¬ä¼—å·åç§°ï¼Œç”±å•†æˆ·ä¼ å…¥     
         "timeStamp":"1395712654",         //æ—¶é—´æˆ³ï¼Œè‡ª1970å¹´ä»¥æ¥çš„ç§’æ•°     
         "nonceStr":"e61463f8efa94090b1f366cccfbbb444", //éšæœºä¸²     
         "package":"prepay_id=u802345jgfjsdfgsdg888",     
         "signType":"MD5",         //å¾®ä¿¡ç­¾åæ–¹å¼ï¼š     
         "paySign":"70EA570631E4BB79628FBCA90534C63FF7FADD89" //å¾®ä¿¡ç­¾å 
      },
      function(res){
      if(res.err_msg == "get_brand_wcpay_request:ok" ){
      // ä½¿ç”¨ä»¥ä¸Šæ–¹å¼åˆ¤æ–­å‰ç«¯è¿”å›,å¾®ä¿¡å›¢é˜Ÿéƒ‘é‡æç¤ºï¼š
            //res.err_msgå°†åœ¨ç”¨æˆ·æ”¯ä»˜æˆåŠŸåè¿”å›okï¼Œä½†å¹¶ä¸ä¿è¯å®ƒç»å¯¹å¯é ã€‚
      } 
   }); 
}
if (typeof WeixinJSBridge == "undefined"){
   if( document.addEventListener ){
       document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
   }else if (document.attachEvent){
       document.attachEvent('WeixinJSBridgeReady', onBridgeReady); 
       document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
   }
}else{
   onBridgeReady();
}



//å¾®ä¿¡å°ç¨‹åº
wx.chooseWXPay({
    timestamp: 0, // æ”¯ä»˜ç­¾åæ—¶é—´æˆ³ï¼Œæ³¨æ„å¾®ä¿¡jssdkä¸­çš„æ‰€æœ‰ä½¿ç”¨timestampå­—æ®µå‡ä¸ºå°å†™ã€‚ä½†æœ€æ–°ç‰ˆçš„æ”¯ä»˜åå°ç”Ÿæˆç­¾åä½¿ç”¨çš„timeStampå­—æ®µåéœ€å¤§å†™å…¶ä¸­çš„Så­—ç¬¦
    nonceStr: '', // æ”¯ä»˜ç­¾åéšæœºä¸²ï¼Œä¸é•¿äº 32 ä½
    package: '', // ç»Ÿä¸€æ”¯ä»˜æ¥å£è¿”å›çš„prepay_idå‚æ•°å€¼ï¼Œæäº¤æ ¼å¼å¦‚ï¼šprepay_id=***ï¼‰
    signType: '', // ç­¾åæ–¹å¼ï¼Œé»˜è®¤ä¸º'SHA1'ï¼Œä½¿ç”¨æ–°ç‰ˆæ”¯ä»˜éœ€ä¼ å…¥'MD5'
    paySign: '', // æ”¯ä»˜ç­¾å
    success: function (res) {
        // æ”¯ä»˜æˆåŠŸåçš„å›è°ƒå‡½æ•°
    }
});
```



#### Nativeæ”¯ä»˜

å‚è€ƒï¼š[Nativeæ”¯ä»˜](<https://pay.weixin.qq.com/wiki/doc/api/native.php?chapter=9_1>)

1. ä½¿ç”¨åœºæ™¯ï¼šç”¨æˆ·æ‰«æå•†æˆ·å±•ç¤ºåœ¨å„ç§åœºæ™¯çš„äºŒç»´ç è¿›è¡Œæ”¯ä»˜ã€‚

2. Nativeæ”¯ä»˜æµç¨‹ï¼šä¹Ÿç§°ä¹‹ä¸ºæ‰«ç æ”¯ä»˜ï¼Œæ˜¯æ”¯ä»˜æŒ‡å®šçš„å•†å“ï¼Œæ‰€ä»¥ä¸éœ€è¦ç”¨æˆ·é€‰æ‹©å•†å“ï¼Œå®¢æˆ·ç«¯ç›´æ¥å‡†å¤‡å¥½æ‰€æœ‰çš„è®¢å•ä¿¡æ¯ï¼Œç›´æ¥è°ƒç”¨å¾®ä¿¡ä¸‹å•APIç”Ÿæˆé¢„è®¢å•ï¼ŒåŒæ—¶æ¥å—å¾®ä¿¡è¿”å›çš„code_urlï¼Œç”ŸæˆäºŒç»´ç ç»™ç”¨æˆ·ã€‚ç”¨æˆ·æ‰«ç é“¾æ¥ï¼Œå¾®ä¿¡ä¼šéªŒè¯è¯¥é“¾æ¥æœ‰æ•ˆæ€§ï¼Œæ»¡è¶³çš„è¯è¿”å›æ”¯ä»˜æˆæƒï¼Œä¹Ÿå°±æ˜¯æ‹‰èµ·æ”¯ä»˜ï¼Œè¾“å…¥å¯†ç è¿‡åï¼Œæäº¤æˆæƒç›´æ¥åˆ°å¾®ä¿¡ï¼Œå¾®ä¿¡ä¼šç»™äºˆæ”¯ä»˜çš„ç»“æœï¼ŒåŒæ—¶ä¹Ÿä¼šå¼‚æ­¥é€šçŸ¥å®¢æˆ·ç«¯ã€‚



### Docker

> ä¸‰å¤§è¦ç´ ï¼šé•œåƒ å®¹å™¨ ä»“åº“



> é•œåƒ

```
Docker é•œåƒï¼ˆImageï¼‰å°±æ˜¯ä¸€ä¸ªåªè¯»çš„æ¨¡æ¿ã€‚é•œåƒå¯ä»¥ç”¨æ¥åˆ›å»º Docker å®¹å™¨ï¼Œä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¾ˆå¤šå®¹å™¨ã€‚
```



> å®¹å™¨

```
Â Docker åˆ©ç”¨å®¹å™¨ï¼ˆContainerï¼‰ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ã€‚å®¹å™¨æ˜¯ç”¨é•œåƒåˆ›å»ºçš„è¿è¡Œå®ä¾‹ã€‚
Â 
å®ƒå¯ä»¥è¢«å¯åŠ¨ã€å¼€å§‹ã€åœæ­¢ã€åˆ é™¤ã€‚æ¯ä¸ªå®¹å™¨éƒ½æ˜¯ç›¸äº’éš”ç¦»çš„ã€ä¿è¯å®‰å…¨çš„å¹³å°ã€‚
Â 
å¯ä»¥æŠŠå®¹å™¨çœ‹åšæ˜¯ä¸€ä¸ªç®€æ˜“ç‰ˆçš„ Linux ç¯å¢ƒï¼ˆåŒ…æ‹¬rootç”¨æˆ·æƒé™ã€è¿›ç¨‹ç©ºé—´ã€ç”¨æˆ·ç©ºé—´å’Œç½‘ç»œç©ºé—´ç­‰ï¼‰å’Œè¿è¡Œåœ¨å…¶ä¸­çš„åº”ç”¨ç¨‹åºã€‚


å®¹å™¨çš„å®šä¹‰å’Œé•œåƒå‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€å †å±‚çš„ç»Ÿä¸€è§†è§’ï¼Œå”¯ä¸€åŒºåˆ«åœ¨äºå®¹å™¨çš„æœ€ä¸Šé¢é‚£ä¸€å±‚æ˜¯å¯è¯»å¯å†™çš„ã€‚
```



> ä»“åº“

```
Â ä»“åº“ï¼ˆRepositoryï¼‰æ˜¯é›†ä¸­å­˜æ”¾é•œåƒæ–‡ä»¶çš„åœºæ‰€ã€‚
ä»“åº“(Repository)å’Œä»“åº“æ³¨å†ŒæœåŠ¡å™¨ï¼ˆRegistryï¼‰æ˜¯æœ‰åŒºåˆ«çš„ã€‚ä»“åº“æ³¨å†ŒæœåŠ¡å™¨ä¸Šå¾€å¾€å­˜æ”¾ç€å¤šä¸ªä»“åº“ï¼Œæ¯ä¸ªä»“åº“ä¸­åˆåŒ…å«äº†å¤šä¸ªé•œåƒï¼Œæ¯ä¸ªé•œåƒæœ‰ä¸åŒçš„æ ‡ç­¾ï¼ˆtagï¼‰ã€‚
Â 
ä»“åº“åˆ†ä¸ºå…¬å¼€ä»“åº“ï¼ˆPublicï¼‰å’Œç§æœ‰ä»“åº“ï¼ˆPrivateï¼‰ä¸¤ç§å½¢å¼ã€‚
æœ€å¤§çš„å…¬å¼€ä»“åº“æ˜¯ Docker Hub(https://hub.docker.com/)ï¼Œ
å­˜æ”¾äº†æ•°é‡åºå¤§çš„é•œåƒä¾›ç”¨æˆ·ä¸‹è½½ã€‚å›½å†…çš„å…¬å¼€ä»“åº“åŒ…æ‹¬é˜¿é‡Œäº‘ ã€ç½‘æ˜“äº‘ ç­‰
```



> æ€»ç»“

```
éœ€è¦æ­£ç¡®çš„ç†è§£ä»“å‚¨/é•œåƒ/å®¹å™¨è¿™å‡ ä¸ªæ¦‚å¿µ:
Â 
Docker æœ¬èº«æ˜¯ä¸€ä¸ªå®¹å™¨è¿è¡Œè½½ä½“æˆ–ç§°ä¹‹ä¸ºç®¡ç†å¼•æ“ã€‚æˆ‘ä»¬æŠŠåº”ç”¨ç¨‹åºå’Œé…ç½®ä¾èµ–æ‰“åŒ…å¥½å½¢æˆä¸€ä¸ªå¯äº¤ä»˜çš„è¿è¡Œç¯å¢ƒï¼Œè¿™ä¸ªæ‰“åŒ…å¥½çš„è¿è¡Œç¯å¢ƒå°±ä¼¼ä¹ imageé•œåƒæ–‡ä»¶ã€‚åªæœ‰é€šè¿‡è¿™ä¸ªé•œåƒæ–‡ä»¶æ‰èƒ½ç”Ÿæˆ Docker å®¹å™¨ã€‚image æ–‡ä»¶å¯ä»¥çœ‹ä½œæ˜¯å®¹å™¨çš„æ¨¡æ¿ã€‚Docker æ ¹æ® image æ–‡ä»¶ç”Ÿæˆå®¹å™¨çš„å®ä¾‹ã€‚åŒä¸€ä¸ª image æ–‡ä»¶ï¼Œå¯ä»¥ç”Ÿæˆå¤šä¸ªåŒæ—¶è¿è¡Œçš„å®¹å™¨å®ä¾‹ã€‚
Â 
* Â image æ–‡ä»¶ç”Ÿæˆçš„å®¹å™¨å®ä¾‹ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç§°ä¸ºé•œåƒæ–‡ä»¶ã€‚
Â 
* Â ä¸€ä¸ªå®¹å™¨è¿è¡Œä¸€ç§æœåŠ¡ï¼Œå½“æˆ‘ä»¬éœ€è¦çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡dockerå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„è¿è¡Œå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„å®¹å™¨
Â 
* è‡³äºä»“å‚¨ï¼Œå°±æ˜¯æ”¾äº†ä¸€å †é•œåƒçš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé•œåƒå‘å¸ƒåˆ°ä»“å‚¨ä¸­ï¼Œéœ€è¦çš„æ—¶å€™ä»ä»“å‚¨ä¸­æ‹‰ä¸‹æ¥å°±å¯ä»¥äº†ã€‚
```



### Spring Security

Spring Securityä¸»è¦åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šç”¨æˆ·è®¤è¯å’Œç”¨æˆ·æˆæƒï¼Œæœ¬è´¨ä¸Šæ˜¯Filterè¿‡æ»¤å™¨ï¼Œå¯¹è¯·æ±‚è¿›è¡Œè¿‡æ»¤

![](image\spring-security.png)

![](image\spring-securityè®¤è¯æµç¨‹.png)

> ç”¨æˆ·è®¤è¯

å¦‚æœè®¿é—®çš„ç™»å½•è·¯å¾„(/auth/login)ï¼Œé‚£ä¹ˆæ‰§è¡Œç™»å½•æˆæƒå­˜å‚¨tokenæ“ä½œï¼Œä¹‹åå‘æ”¾è¯¥è¯·æ±‚ï¼›

å¦‚æœè®¿é—®ä¸æ˜¯åˆ™éªŒè¯è¯·æ±‚å¤´ä¸­çš„tokenè·å–æƒé™ï¼Œä¹‹åå‘æ”¾è¯¥è¯·æ±‚

```
å¦‚æœç³»ç»Ÿçš„æ¨¡å—ä¼—å¤šï¼Œæ¯ä¸ªæ¨¡å—éƒ½éœ€è¦å°±è¡Œæˆæƒä¸è®¤è¯ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©åŸºäºtokençš„å½¢å¼è¿›è¡Œæˆæƒä¸è®¤è¯ï¼Œç”¨æˆ·æ ¹æ®ç”¨æˆ·åå¯†ç è®¤è¯æˆåŠŸï¼Œç„¶åè·å–å½“å‰ç”¨æˆ·è§’è‰²çš„ä¸€ç³»åˆ—æƒé™å€¼ï¼Œå¹¶ä»¥ç”¨æˆ·åä¸ºkey;æƒé™åˆ—è¡¨ä¸ºvalueçš„å½¢å¼å­˜å…¥redisç¼“å­˜ä¸­
æ ¹æ®ç”¨æˆ·åç›¸å…³ä¿¡æ¯ç”Ÿæˆtokenè¿”å›ï¼Œæµè§ˆå™¨å°†tokenè®°å½•åˆ°cookieä¸­ï¼Œæ¯æ¬¡è°ƒç”¨apiæ¥å£éƒ½é»˜è®¤å°†tokenæºå¸¦åˆ°headerè¯·æ±‚å¤´ä¸­ï¼ŒSpring-securityè§£æheaderå¤´è·å–tokenä¿¡æ¯ï¼Œè§£ætokenè·å– å½“å‰ç”¨æˆ·åï¼Œæ ¹æ®ç”¨æˆ·åå°±å¯ä»¥ä»redisä¸­è·å–æƒé™åˆ—è¡¨ï¼Œè¿™æ ·Spring -securityå°±èƒ½å¤Ÿåˆ¤æ–­å½“å‰è¯·æ±‚æ˜¯å¦æœ‰æƒé™è®¿é—®
```



> ç”¨æˆ·æˆæƒ





### Spring Cloud

å¾®æœåŠ¡ï¼š

```
ä½†é€šå¸¸è€Œè¨€ï¼Œå¾®æœåŠ¡æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼æˆ–è€…è¯´æ˜¯ä¸€ç§æ¶æ„é£æ ¼, å®ƒæå€¡å°†å•ä¸€åº”ç”¨ç¨‹åºåˆ’åˆ†æˆä¸€ç»„å°çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡è¿è¡Œï¼Œåœ¨å…¶ç‹¬ç«‹çš„è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼ŒæœåŠ¡ä¹‹é—´äº’ç›¸åè°ƒã€äº’ç›¸é…åˆ,ä¸ºç”¨æˆ·æä¾›æœ€ç»ˆä»·å€¼ã€‚

æœåŠ¡ä¹‹é—´é‡‡ç”¨è½»é‡çº§çš„é€šä¿¡æœºåˆ¶äº’ç›¸æ²Ÿé€š(é€šå¸¸æ˜¯åŸºäºHTTPçš„RESTful API)ã€‚æ¯ä¸ªæœåŠ¡éƒ½å›´ç»•ç€å…·ä½“ä¸šåŠ¡è¿›è¡Œæ„å»º,å¹¶ç²—èƒ½å¤Ÿè¢«ç‹¬ç«‹åœ°éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€ç±»ç”Ÿäº§ç¯å¢ƒç­‰ã€‚

å¦å¤–,å°½é‡é¿å…ç»Ÿä¸€çš„ã€é›†ä¸­å¼çš„æœåŠ¡ç®¡ç†æœºåˆ¶ï¼Œå¯¹å…·ä½“çš„ä¸€ä¸ªæœåŠ¡è€Œè¨€,åº”æ ¹æ®ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼Œé€‰æ‹©åˆé€‚çš„è¯­è¨€ã€å·¥å…·å¯¹å…¶è¿›è¡Œæ„å»ºï¼Œå¯ä»¥æœ‰ä¸€ä¸ªéå¸¸è½»é‡çº§çš„é›†ä¸­å¼ç®¡ç†æ¥åè°ƒè¿™äº›æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­è¨€æ¥ç¼–å†™æœåŠ¡,ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ•°æ®å­˜å‚¨ã€‚

-----------------------------------------------------------------------------------------

å¾®æœåŠ¡åŒ–çš„æ ¸å¿ƒå°±æ˜¯å°†ä¼ ç»Ÿçš„ä¸€ç«™å¼åº”ç”¨ï¼Œæ ¹æ®ä¸šåŠ¡æ‹†åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„æœåŠ¡,å½»åº•åœ°å»è€¦åˆæ¯ä¸€ä¸ªå¾®æœåŠ¡æä¾›å•ä¸ªä¸šåŠ¡åŠŸèƒ½çš„æœåŠ¡,ä¸€ä¸ªæœåŠ¡åšä¸€ä»¶äº‹,ä»æŠ€æœ¯è§’åº¦çœ‹å°±æ˜¯ä¸€ç§å°è€Œç‹¬ç«‹çš„å¤„ç†è¿‡ç¨‹ï¼Œç±»ä¼¼è¿›ç¨‹æ¦‚å¿µï¼Œèƒ½å¤Ÿè‡ªè¡Œå•ç‹¬å¯åŠ¨æˆ–é”€æ¯ï¼Œå¯ä»¥æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ•°æ®åº“ã€‚
```



#### EurekaæœåŠ¡æ³¨å†Œä¸å‘ç°

> Eureka Server æä¾›æœåŠ¡æ³¨å†Œå’Œå‘ç°

> Service ProvideræœåŠ¡æä¾›æ–¹å°†è‡ªèº«æœåŠ¡æ³¨å†Œåˆ°Eurekaï¼Œä»è€Œä½¿æœåŠ¡æ¶ˆè´¹æ–¹èƒ½å¤Ÿæ‰¾åˆ°

> Service ConsumeræœåŠ¡æ¶ˆè´¹æ–¹ä»Eurekaè·å–æ³¨å†ŒæœåŠ¡åˆ—è¡¨ï¼Œä»è€Œèƒ½å¤Ÿæ¶ˆè´¹æœåŠ¡



```
Spring Cloud å°è£…äº† Netflix å…¬å¸å¼€å‘çš„ Eureka æ¨¡å—æ¥å®ç°æœåŠ¡æ³¨å†Œå’Œå‘ç°(è¯·å¯¹æ¯”Zookeeper)ã€‚
Â 
Eureka é‡‡ç”¨äº† C-S çš„è®¾è®¡æ¶æ„ã€‚Eureka Server ä½œä¸ºæœåŠ¡æ³¨å†ŒåŠŸèƒ½çš„æœåŠ¡å™¨ï¼Œå®ƒæ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚
Â 
è€Œç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œä½¿ç”¨ Eureka çš„å®¢æˆ·ç«¯è¿æ¥åˆ° Eureka Serverå¹¶ç»´æŒå¿ƒè·³è¿æ¥ã€‚è¿™æ ·ç³»ç»Ÿçš„ç»´æŠ¤äººå‘˜å°±å¯ä»¥é€šè¿‡ Eureka Server æ¥ç›‘æ§ç³»ç»Ÿä¸­å„ä¸ªå¾®æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚SpringCloud çš„ä¸€äº›å…¶ä»–æ¨¡å—ï¼ˆæ¯”å¦‚Zuulï¼‰å°±å¯ä»¥é€šè¿‡ Eureka Server æ¥å‘ç°ç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œå¹¶æ‰§è¡Œç›¸å…³çš„é€»è¾‘ã€‚
è¯·æ³¨æ„å’ŒDubboçš„æ¶æ„å¯¹æ¯”

EurekaåŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼šEureka Serverå’ŒEureka Client
Eureka Serveræä¾›æœåŠ¡æ³¨å†ŒæœåŠ¡
å„ä¸ªèŠ‚ç‚¹å¯åŠ¨åï¼Œä¼šåœ¨EurekaServerä¸­è¿›è¡Œæ³¨å†Œï¼Œè¿™æ ·EurekaServerä¸­çš„æœåŠ¡æ³¨å†Œè¡¨ä¸­å°†ä¼šå­˜å‚¨æ‰€æœ‰å¯ç”¨æœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯ï¼ŒæœåŠ¡èŠ‚ç‚¹çš„ä¿¡æ¯å¯ä»¥åœ¨ç•Œé¢ä¸­ç›´è§‚çš„çœ‹åˆ°
Â 
Â 
EurekaClientæ˜¯ä¸€ä¸ªJavaå®¢æˆ·ç«¯ï¼Œç”¨äºç®€åŒ–Eureka Serverçš„äº¤äº’ï¼Œå®¢æˆ·ç«¯åŒæ—¶ä¹Ÿå…·å¤‡ä¸€ä¸ªå†…ç½®çš„ã€ä½¿ç”¨è½®è¯¢(round-robin)è´Ÿè½½ç®—æ³•çš„è´Ÿè½½å‡è¡¡å™¨ã€‚åœ¨åº”ç”¨å¯åŠ¨åï¼Œå°†ä¼šå‘Eureka Serverå‘é€å¿ƒè·³(é»˜è®¤å‘¨æœŸä¸º30ç§’)ã€‚å¦‚æœEureka Serveråœ¨å¤šä¸ªå¿ƒè·³å‘¨æœŸå†…æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªèŠ‚ç‚¹çš„å¿ƒè·³ï¼ŒEurekaServerå°†ä¼šä»æœåŠ¡æ³¨å†Œè¡¨ä¸­æŠŠè¿™ä¸ªæœåŠ¡èŠ‚ç‚¹ç§»é™¤ï¼ˆé»˜è®¤90ç§’ï¼‰
```



> Eurekaä¿è¯AP

```
Eurekaçœ‹æ˜ç™½äº†è¿™ä¸€ç‚¹, å› æ­¤åœ¨è®¾è®¡æ—¶å°±ä¼˜å…ˆä¿è¯å¯ç”¨æ€§ã€‚Eurekaå„ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¹³ç­‰çš„,å‡ ä¸ªèŠ‚ç‚¹æŒ‚æ‰ä¸ä¼šå½±å“æ­£å¸¸èŠ‚ç‚¹çš„å·¥ä½œï¼Œå‰©ä½™çš„èŠ‚ç‚¹ä¾ç„¶å¯ä»¥æä¾›æ³¨å†Œå’ŒæŸ¥è¯¢æœåŠ¡ã€‚è€ŒEurekaçš„å®¢æˆ·ç«¯åœ¨å‘æŸä¸ªEurekaæ³¨å†Œæˆ–æ—¶å¦‚æœå‘ç°è¿æ¥å¤±è´¥,åˆ™ä¼šè‡ªåŠ¨åˆ‡æ¢è‡³å…¶å®ƒèŠ‚ç‚¹ï¼Œåªè¦æœ‰ä¸€å°Eurekaè¿˜åœ¨,å°±èƒ½ä¿è¯æ³¨å†ŒæœåŠ¡å¯ç”¨(ä¿è¯å¯ç”¨æ€§)ï¼Œåªä¸è¿‡æŸ¥åˆ°çš„ä¿¡æ¯å¯èƒ½ä¸æ˜¯æœ€æ–°çš„(ä¸ä¿è¯å¼ºä¸€è‡´æ€§)ã€‚

é™¤æ­¤ä¹‹å¤–ï¼ŒEurekaè¿˜æœ‰ä¸€ç§è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œ å¦‚æœåœ¨15åˆ†é’Ÿå†…è¶…è¿‡85%çš„èŠ‚ç‚¹éƒ½æ²¡æœ‰æ­£å¸¸çš„å¿ƒè·³ï¼Œé‚£ä¹ˆEurekaå°±è®¤ä¸ºå®¢æˆ·ç«¯ ä¸æ³¨å†Œä¸­å¿ƒå‡ºç°äº†ç½‘ç»œæ•…éšœï¼Œæ­¤æ—¶ä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µ:

1. Eurekaä¸å†ä»æ³¨å†Œåˆ—è¡¨ä¸­ç§»é™¤å› ä¸ºé•¿æ—¶é—´æ²¡æ”¶åˆ°å¿ƒè·³è€Œåº”è¯¥è¿‡æœŸçš„æœåŠ¡
2. Eurekaä»ç„¶èƒ½å¤Ÿæ¥å—æ–°æœåŠ¡çš„æ³¨å†Œå’ŒæŸ¥è¯¢è¯·æ±‚,ä½†æ˜¯ä¸ä¼šè¢«åŒæ­¥åˆ°å…¶å®ƒèŠ‚ç‚¹ä¸Š(å³ä¿è¯å½“å‰èŠ‚ç‚¹ä¾ç„¶å¯ç”¨)
3.å½“ç½‘ç»œç¨³å®šæ—¶ï¼Œå½“å‰å®ä¾‹æ–°çš„æ³¨å†Œä¿¡æ¯ä¼šè¢«åŒæ­¥åˆ°å…¶å®ƒèŠ‚ç‚¹ä¸­
å› æ­¤ï¼ŒEurekaå¯ä»¥å¾ˆå¥½çš„åº”å¯¹å› ç½‘ç»œæ•…éšœå¯¼è‡´éƒ¨åˆ†èŠ‚ ç‚¹å¤±å»è”ç³»çš„æƒ…å†µï¼Œè€Œä¸ä¼šåƒzookeeperé‚£æ ·ä½¿æ•´ ä¸ªæ³¨å†ŒæœåŠ¡ç˜«ç—ªã€‚
```



> Zookepperä¿è¯CP

```
å½“å‘æ³¨å†Œä¸­å¿ƒæŸ¥è¯¢æœåŠ¡åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®¹å¿æ³¨å†Œä¸­å¿ƒè¿”å›çš„æ˜¯å‡ åˆ†é’Ÿä»¥å‰çš„æ³¨å†Œä¿¡æ¯ï¼Œä½†ä¸èƒ½æ¥å—æœåŠ¡ç›´æ¥downæ‰ä¸å¯ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡æ³¨å†ŒåŠŸèƒ½å¯¹å¯ç”¨æ€§çš„è¦æ±‚è¦é«˜äºä¸€è‡´æ€§ã€‚

ä½†æ˜¯zkä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼Œ å½“masterèŠ‚ ç‚¹å› ä¸ºç½‘ç»œæ•…éšœä¸å…¶ä»–èŠ‚ç‚¹å¤±å»è”ç³»æ—¶ï¼Œå‰©ä½™èŠ‚ç‚¹ä¼šé‡æ–°è¿›è¡Œleaderé€‰ä¸¾ã€‚é—®é¢˜åœ¨äºï¼Œé€‰ä¸¾leaderçš„æ—¶é—´å¤ªé•¿ï¼Œ 30 ~ 120s,ä¸”é€‰ä¸¾æœŸé—´æ•´ä¸ªzké›†ç¾¤éƒ½æ˜¯ä¸å¯ç”¨çš„,è¿™å°±å¯¼è‡´åœ¨é€‰ä¸¾æœŸé—´æ³¨å†ŒæœåŠ¡ç˜«ç—ªã€‚

åœ¨äº‘éƒ¨ç½²çš„ç¯å¢ƒä¸‹ï¼Œå› ç½‘ç»œé—®é¢˜ä½¿å¾—zké›†ç¾¤å¤±å»masterèŠ‚ç‚¹æ˜¯è¾ƒå¤§æ¦‚ç‡ä¼šå‘ç”Ÿçš„äº‹,è™½ç„¶æœåŠ¡èƒ½å¤Ÿæœ€ç»ˆæ¢å¤ï¼Œä½†æ˜¯æ¼«é•¿çš„é€‰ä¸¾æ—¶é—´å¯¼è‡´çš„æ³¨å†Œé•¿æœŸä¸å¯ç”¨æ˜¯ä¸èƒ½å®¹å¿çš„ã€‚
```



> è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶

```
é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰è‡ªæˆ‘ä¿æŠ¤ï¼ŒEurekaServeråœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªå¾®æœåŠ¡å®ä¾‹çš„å¿ƒè·³ï¼ŒEurekaServerå°†ä¼šæ³¨é”€è¯¥å®ä¾‹(é»˜è®¤90ç§’)ã€‚ä½†æ˜¯å½“ç½‘ç»œåˆ†åŒºæ•…éšœå‘ç”Ÿæ—¶ï¼Œå¾®æœåŠ¡ä¸EurekaServerä¹‹é—´æ— æ³•æ­£å¸¸é€šä¿¡ï¼Œä»¥ä¸Šè¡Œä¸ºå¯èƒ½å˜å¾—éå¸¸å±é™©äº†ä¸€å› ä¸ºå¾®æœåŠ¡æœ¬èº«å…¶å®æ˜¯å¥åº·çš„ï¼Œæ­¤æ—¶æœ¬ä¸åº”è¯¥æ³¨é”€è¿™ä¸ªå¾®æœåŠ¡ã€‚

Eurekaé€šè¿‡"è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼"æ¥è§£å†³è¿™ä¸ªé—®é¢˜ä¸€å½“EurekaServerèŠ‚ç‚¹åœ¨çŸ­æ—¶é—´å†…ä¸¢å¤±è¿‡å¤šå®¢æˆ·ç«¯æ—¶(å¯èƒ½å‘ç”Ÿäº†ç½‘ç»œåˆ†åŒºæ•…éšœ)ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°±ä¼šè¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚ä¸€æ—¦è¿›å…¥è¯¥æ¨¡å¼ï¼ŒEurekaServerå°±ä¼šä¿æŠ¤æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œä¸å†åˆ é™¤æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„æ•°æ®(ä¹Ÿå°±æ˜¯ä¸ä¼šæ³¨é”€ä»»ä½•å¾®æœåŠ¡)ã€‚å½“ç½‘ç»œæ•…éšœæ¢å¤å,è¯¥Eureka ServerèŠ‚ç‚¹ä¼šè‡ªåŠ¨é€€å‡ºè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚

-- æ›´å®¹æ˜“ç†è§£çš„æ–¹å¼
åœ¨è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ä¸­ï¼ŒEureka Serverä¼šä¿æŠ¤æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯,ä¸å†æ³¨é”€ä»»ä½•æœåŠ¡å®ä¾‹ã€‚å½“å®ƒæ”¶åˆ°çš„å¿ƒè·³æ•°é‡æ–°æ¢å¤åˆ°é˜ˆå€¼ä»¥ä¸Šæ—¶ï¼Œè¯¥Eureka ServerèŠ‚ç‚¹å°±ä¼šè‡ªåŠ¨é€€å‡ºè‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚å®ƒçš„è®¾è®¡å“²å­¦å°±æ˜¯å®å¯ä¿ç•™é”™è¯¯çš„æœåŠ¡æ³¨å†Œä¿¡æ¯ï¼Œä¹Ÿä¸ç›²ç›®æ³¨é”€ä»»ä½•å¯èƒ½å¥åº·çš„æœåŠ¡å®ä¾‹ã€‚ä¸€å¥è¯è®²è§£:å¥½æ­»ä¸å¦‚èµ–æ´»ç€ AP(å¯ç”¨å’Œå®¹é”™)
```



Bibbonè´Ÿè½½å‡è¡¡

Ribbonæä¾›äº†å¤šç§è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼šæ¯”å¦‚è½®è¯¢(RoundRobinRule)ã€éšæœº(RandomRule)å’Œæ’å—å¢™(RetyRule)ã€æ ¹æ®å“åº”æ—¶é—´åŠ æƒ

```
Spring Cloud Ribbonæ˜¯åŸºäºNetflix Ribbonå®ç°çš„ä¸€å¥— å®¢æˆ·ç«¯Â è´Ÿè½½å‡è¡¡çš„å·¥å…·ã€‚
Â 
ç®€å•çš„è¯´ï¼ŒRibbonæ˜¯Netflixå‘å¸ƒçš„å¼€æºé¡¹ç›®ï¼Œä¸»è¦åŠŸèƒ½æ˜¯æä¾›å®¢æˆ·ç«¯çš„è½¯ä»¶è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå°†Netflixçš„ä¸­é—´å±‚æœåŠ¡è¿æ¥åœ¨ä¸€èµ·ã€‚Ribbonå®¢æˆ·ç«¯ç»„ä»¶æä¾›ä¸€ç³»åˆ—å®Œå–„çš„é…ç½®é¡¹å¦‚è¿æ¥è¶…æ—¶ï¼Œé‡è¯•ç­‰ã€‚ç®€å•çš„è¯´ï¼Œå°±æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­åˆ—å‡ºLoad Balancerï¼ˆç®€ç§°LBï¼‰åé¢æ‰€æœ‰çš„æœºå™¨ï¼ŒRibbonä¼šè‡ªåŠ¨çš„å¸®åŠ©ä½ åŸºäºæŸç§è§„åˆ™ï¼ˆå¦‚ç®€å•è½®è¯¢ï¼Œéšæœºè¿æ¥ç­‰ï¼‰å»è¿æ¥è¿™äº›æœºå™¨ã€‚æˆ‘ä»¬ä¹Ÿå¾ˆå®¹æ˜“ä½¿ç”¨Ribbonå®ç°è‡ªå®šä¹‰çš„è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚

LBï¼Œå³è´Ÿè½½å‡è¡¡(Load Balance)ï¼Œåœ¨å¾®æœåŠ¡æˆ–åˆ†å¸ƒå¼é›†ç¾¤ä¸­ç»å¸¸ç”¨çš„ä¸€ç§åº”ç”¨ã€‚
è´Ÿè½½å‡è¡¡ç®€å•çš„è¯´å°±æ˜¯å°†ç”¨æˆ·çš„è¯·æ±‚å¹³æ‘Šçš„åˆ†é…åˆ°å¤šä¸ªæœåŠ¡ä¸Šï¼Œä»è€Œè¾¾åˆ°ç³»ç»Ÿçš„HAã€‚
å¸¸è§çš„è´Ÿè½½å‡è¡¡æœ‰è½¯ä»¶Nginxï¼ŒLVSï¼Œç¡¬ä»¶ F5ç­‰ã€‚
ç›¸åº”çš„åœ¨ä¸­é—´ä»¶ï¼Œä¾‹å¦‚ï¼šdubboå’ŒSpringCloudä¸­å‡ç»™æˆ‘ä»¬æä¾›äº†è´Ÿè½½å‡è¡¡ï¼ŒSpringCloudçš„è´Ÿè½½å‡è¡¡ç®—æ³•å¯ä»¥è‡ªå®šä¹‰ã€‚Â 
```



Feignè´Ÿè½½å‡è¡¡

Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„WebæœåŠ¡å®¢æˆ·ç«¯ï¼Œ ä½¿å¾—ç¼–å†™WebæœåŠ¡å®¢æˆ·ç«¯å˜å¾—éå¸¸å®¹æ˜“,
**åªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œç„¶ååœ¨ä¸Šé¢æ·»åŠ æ³¨è§£å³å¯**ã€‚
å‚è€ƒå®˜ç½‘: https://github.com/OpenFeign/feign



> Feignèƒ½å¹²ä»€ä¹ˆ

```
Feignæ—¨åœ¨ä½¿ç¼–å†™Java Httpå®¢æˆ·ç«¯å˜å¾—æ›´å®¹æ˜“ã€‚
å‰é¢åœ¨ä½¿ç”¨Ribbon + RestTemplateæ—¶ï¼Œåˆ©ç”¨RestTemplateå¯¹httpè¯·æ±‚çš„å°è£…å¤„ç†ï¼Œå½¢æˆäº†ä¸€å¥—æ¨¡ç‰ˆåŒ–çš„è°ƒç”¨æ–¹æ³•ã€‚ä½†æ˜¯åœ¨å®é™…
å¼€å‘ä¸­ï¼Œç”±äºå¯¹æœåŠ¡ä¾èµ–çš„è°ƒç”¨å¯èƒ½ä¸æ­¢ä¸€å¤„ï¼Œå¾€å¾€ä¸€ä¸ªæ¥å£ä¼šè¢«å¤šå¤„è°ƒç”¨ï¼Œæ‰€ä»¥é€šå¸¸éƒ½ä¼šé’ˆå¯¹æ¯ä¸ªå¾®æœåŠ¡è‡ªè¡Œå°è£…ä¸€ äº›å®¢æˆ·ç«¯
ç±»æ¥åŒ…è£…è¿™äº›ä¾èµ–æœåŠ¡çš„è°ƒç”¨ã€‚æ‰€ä»¥Feignåœ¨æ­¤åŸºç¡€ä¸Šåšäº†è¿›ä¸€ æ­¥å°è£…ï¼Œç”±ä»–æ¥å¸®åŠ©æˆ‘ä»¬å®šä¹‰å’Œå®ç°ä¾èµ–æœåŠ¡æ¥å£çš„å®šä¹‰ã€‚åœ¨
Feignçš„å®ç°ä¸‹ï¼Œæˆ‘ä»¬åªéœ€åˆ›å»ºä¸€ä¸ªæ¥å¹¶ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥é…ç½®å®ƒ(ä»¥å‰æ˜¯Daoæ¥å£ï¼Œä¸Šé¢æ ‡æ³¨Mapperæ³¨è§£ç°åœ¨æ˜¯ä¸€ ä¸ªå¾®æœåŠ¡æ¥å£
ä¸Šé¢æ ‡æ³¨ä¸€ä¸ªFeignæ³¨è§£å³å¯)ï¼Œ å³å¯å®Œæˆå¯¹æœåŠ¡æä¾›æ–¹çš„æ¥å£ç»‘å®š,ç®€åŒ–äº†ä½¿ç”¨Spring cloud Ribbonæ—¶ï¼Œè‡ªåŠ¨å°è£…æœåŠ¡è°ƒç”¨å®¢æˆ·
ç«¯çš„å¼€å‘é‡ã€‚
```



#### Ribbonä¸Feign

```
1.å¾®æœåŠ¡åå­—è·å¾—è°ƒç”¨åœ°å€
2.å°±æ˜¯é€šè¿‡æ¥å£+æ³¨è§£ï¼Œï¼Œè·å¾—æˆ‘ä»¬çš„è°ƒç”¨æœåŠ¡ã€‚
```



#### Hystrixæ–­è·¯å™¨

å‘è°ƒç”¨æ–¹è¿”å›ä¸€ä¸ªç¬¦åˆé¢„æœŸçš„ã€å¯å¤„ç†çš„å¤‡é€‰å“åº”(FallBack) ,è€Œä¸æ˜¯é•¿æ—¶é—´çš„ç­‰å¾…æˆ–è€…æŠ›å‡ºè°ƒç”¨æ–¹æ— æ³•å¤„ç†çš„å¼‚å¸¸

```
å¤æ‚åˆ†å¸ƒå¼ä½“ç³»ç»“æ„ä¸­çš„åº”ç”¨ç¨‹åºæœ‰æ•°åä¸ªä¾èµ–å…³ç³»ï¼Œæ¯ä¸ªä¾èµ–å…³ç³»åœ¨æŸäº›æ—¶å€™å°†ä¸å¯é¿å…åœ°å¤±è´¥ã€‚
Hystrixæ˜¯ä¸€ä¸ªç”¨äºå¤„ç†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å»¶è¿Ÿå’Œå®¹é”™çš„å¼€æºåº“,åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé‡Œ,è®¸å¤šä¾èµ–ä¸å¯é¿å…çš„ä¼šè°ƒç”¨å¤±è´¥,æ¯”å¦‚è¶…æ—¶ã€å¼‚å¸¸ç­‰ï¼ŒHystrixèƒ½å¤Ÿä¿è¯åœ¨ä¸€ä¸ªä¾èµ–å‡ºé—®é¢˜çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå¯¼è‡´æ•´ä½“æœåŠ¡å¤±è´¥,é¿å…çº§è”æ•…éšœ,ä»¥æé«˜åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼¹æ€§ã€‚
"æ–­è·¯å™¨â€æœ¬èº«æ˜¯ä¸€ç§å¼€å…³è£…ç½®,å½“æŸä¸ªæœåŠ¡å•å…ƒå‘ç”Ÿæ•…éšœä¹‹å,é€šè¿‡æ–­è·¯å™¨çš„æ•…éšœç›‘æ§(ç±»ä¼¼ç†”æ–­ä¿é™©ä¸)ï¼Œå‘è°ƒç”¨æ–¹è¿”å›ä¸€ä¸ªç¬¦åˆé¢„æœŸçš„ã€å¯å¤„ç†çš„å¤‡é€‰å“åº”(FallBack) ,è€Œä¸æ˜¯é•¿æ—¶é—´çš„ç­‰å¾…æˆ–è€…æŠ›å‡ºè°ƒç”¨æ–¹æ— æ³•å¤„ç†çš„å¼‚å¸¸,è¿™æ ·å°±ä¿è¯äº†æœåŠ¡è°ƒç”¨æ–¹çš„
çº¿ç¨‹ä¸ä¼šè¢«é•¿æ—¶é—´ã€ä¸å¿…è¦åœ°å ç”¨ï¼Œä»è€Œé¿å…äº†æ•…éšœåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è”“å»¶ï¼Œä¹ƒè‡³é›ªå´©ã€‚
```



>æœåŠ¡é›ªå´©

```
å¤šä¸ªå¾®æœåŠ¡ä¹‹é—´è°ƒç”¨çš„æ—¶å€™ï¼Œå‡è®¾å¾®æœåŠ¡Aè°ƒç”¨å¾®æœåŠ¡Bå’Œå¾®æœåŠ¡Cï¼Œå¾®æœåŠ¡Bå’Œå¾®æœåŠ¡Cåˆè°ƒç”¨å…¶å®ƒçš„å¾®æœåŠ¡,è¿™å°±æ˜¯æ‰€è°“çš„â€œæ‰‡å‡ºâ€ã€‚
å¦‚æœæ‰‡å‡ºçš„é“¾è·¯ä¸ŠæŸä¸ªå¾®æœåŠ¡çš„è°ƒç”¨å“åº”æ—¶é—´è¿‡é•¿æˆ–è€…ä¸å¯ç”¨ï¼Œå¯¹å¾®æœåŠ¡Açš„è°ƒç”¨å°±ä¼šå ç”¨è¶Šæ¥è¶Šå¤šçš„ç³»ç»Ÿèµ„æº,è¿›è€Œå¼•èµ·ç³»ç»Ÿå´©æºƒ,æ‰€è°“çš„â€œé›ªå´©æ•ˆåº”â€.

å¯¹äºé«˜æµé‡çš„åº”ç”¨æ¥è¯´ï¼Œå•ä¸€çš„åç«¯ä¾èµ–å¯èƒ½ä¼šå¯¼è‡´æ‰€æœ‰æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰èµ„æºéƒ½åœ¨å‡ ç§’é’Ÿå†…é¥±å’Œã€‚æ¯”å¤±è´¥æ›´ç³Ÿç³•çš„æ˜¯,è¿™äº›åº”ç”¨ç¨‹
åºè¿˜å¯èƒ½å¯¼è‡´æœåŠ¡ä¹‹é—´çš„å»¶è¿Ÿå¢åŠ ï¼Œå¤‡ä»½é˜Ÿåˆ—ï¼Œçº¿ç¨‹å’Œå…¶ä»–ç³»ç»Ÿèµ„æºç´§å¼ ï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå‘ç”Ÿæ›´å¤šçš„çº§è”æ•…éšœã€‚è¿™äº›éƒ½è¡¨ç¤ºéœ€è¦å¯¹
æ•…éšœå’Œå»¶è¿Ÿè¿›è¡Œéš”ç¦»å’Œç®¡ç†ï¼Œä»¥ä¾¿å•ä¸ªä¾èµ–å…³ç³»çš„å¤±è´¥ï¼Œä¸èƒ½å–æ¶ˆæ•´ä¸ªåº”ç”¨ç¨‹åºæˆ–ç³»ç»Ÿã€‚
```



> æœåŠ¡ç†”æ–­

ä¸€èˆ¬æ˜¯æŸä¸ªæœåŠ¡æ•…éšœæˆ–è€…å¼‚å¸¸å¼•èµ·ç±»ä¼¼ç°å®ä¸–ç•Œä¸­çš„â€œä¿é™©ä¸â€œï¼Œ å½“æŸä¸ªå¼‚å¸¸æ¡ä»¶è¢«è§¦å‘ï¼Œç›´æ¥ç†”æ–­æ•´ä¸ªæœåŠ¡ï¼Œè€Œä¸æ˜¯ä¸€ç›´ç­‰åˆ°æ­¤æœåŠ¡è¶…æ—¶å¯¼è‡´é›ªå´©ã€‚

```
ç†”æ–­æœºåˆ¶æ˜¯åº”å¯¹é›ªå´©æ•ˆåº”çš„ä¸€ç§å¾®æœåŠ¡é“¾è·¯ä¿æŠ¤æœºåˆ¶ã€‚
å½“æ‰‡å‡ºé“¾è·¯çš„æŸä¸ªå¾®æœåŠ¡ä¸å¯ç”¨æˆ–è€…å“åº”æ—¶é—´å¤ªé•¿æ—¶ï¼Œä¼šè¿›è¡ŒæœåŠ¡çš„é™çº§,è¿›è€Œç†”æ–­è¯¥èŠ‚ç‚¹å¾®æœåŠ¡çš„è°ƒç”¨,å¿«é€Ÿè¿”å›â€é”™è¯¯â€çš„å“åº”ä¿¡æ¯ã€‚
å½“æ£€æµ‹åˆ°è¯¥èŠ‚ç‚¹å¾®æœåŠ¡è°ƒç”¨å“åº”æ­£å¸¸åæ¢å¤è°ƒç”¨é“¾è·¯ã€‚åœ¨SpringCloudæ¡†æ¶é‡Œç†”æ–­æœºåˆ¶é€šè¿‡Hystrixå®ç°ã€‚
Hystrixä¼šç›‘æ§å¾®æœåŠ¡é—´è°ƒç”¨çš„çŠ¶å†µï¼Œå½“å¤±è´¥çš„è°ƒç”¨åˆ°ä¸€å®šé˜ˆå€¼,ç¼ºçœæ˜¯5ç§’å†…20æ¬¡è°ƒç”¨å¤±è´¥å°±ä¼šå¯åŠ¨ç†”æ–­æœºåˆ¶ã€‚ç†”æ–­æœºåˆ¶çš„æ³¨è§£æ˜¯@HystrixCommand.
```



> æœåŠ¡é™çº§

æ‰€è°“é™çº§ï¼Œ ä¸€èˆ¬æ˜¯ä»æ•´ä½“è´Ÿè·è€ƒè™‘ã€‚å°±æ˜¯å½“æŸä¸ªæœåŠ¡ç†”æ–­ä¹‹åï¼ŒæœåŠ¡å™¨å°†ä¸å†è¢«è°ƒç”¨

æ­¤æ—¶å®¢æˆ·ç«¯å¯ä»¥è‡ªå·±å‡†å¤‡ä¸€ä¸ªæœ¬åœ°çš„fallbackå›è°ƒï¼Œ è¿”å›ä¸€ä¸ªç¼ºçœå€¼ã€‚

è¿™æ ·åšï¼Œè™½ç„¶æœåŠ¡æ°´å¹³ä¸‹é™ï¼Œä½†å¥½æ­¹å¯ç”¨ï¼Œæ¯”ç›´æ¥æŒ‚æ‰è¦å¼ºã€‚

```
æ•´ä½“èµ„æºå¿«ä¸å¤Ÿäº†ï¼Œå¿ç—›å°†æŸäº›æœåŠ¡å…ˆå…³æ‰ï¼Œå¾…æ¸¡è¿‡éš¾å…³ï¼Œå†å¼€å¯å›æ¥
æœåŠ¡é™çº§å¤„ç†æ˜¯åœ¨å®¢æˆ·ç«¯å®ç°å®Œæˆçš„ï¼Œä¸æœåŠ¡ç«¯æ²¡æœ‰å…³ç³»
è®©å®¢æˆ·ç«¯åœ¨æœåŠ¡ç«¯ä¸å¯ç”¨æ—¶ä¹Ÿä¼šè·å¾—æç¤ºä¿¡æ¯è€Œä¸ä¼šæŒ‚èµ·è€—æ­»æœåŠ¡å™¨
```



> æœåŠ¡ç›‘æ§hystrixDashboard

```
é™¤äº†éš”ç¦»ä¾èµ–æœåŠ¡çš„è°ƒç”¨ä»¥å¤–ï¼ŒHystrixè¿˜æä¾›äº†å‡†å®æ—¶çš„è°ƒç”¨ç›‘æ§ï¼ˆHystrix Dashboardï¼‰ï¼ŒHystrixä¼šæŒç»­åœ°è®°å½•æ‰€æœ‰é€šè¿‡Hystrixå‘èµ·çš„è¯·æ±‚çš„æ‰§è¡Œä¿¡æ¯ï¼Œå¹¶ä»¥ç»Ÿè®¡æŠ¥è¡¨å’Œå›¾å½¢çš„å½¢å¼å±•ç¤ºç»™ç”¨æˆ·ï¼ŒåŒ…æ‹¬æ¯ç§’æ‰§è¡Œå¤šå°‘è¯·æ±‚å¤šå°‘æˆåŠŸï¼Œå¤šå°‘å¤±è´¥ç­‰ã€‚Netflixé€šè¿‡hystrix-metrics-event-streamé¡¹ç›®å®ç°äº†å¯¹ä»¥ä¸ŠæŒ‡æ ‡çš„ç›‘æ§ã€‚Spring Cloudä¹Ÿæä¾›äº†Hystrix Dashboardçš„æ•´åˆï¼Œå¯¹ç›‘æ§å†…å®¹è½¬åŒ–æˆå¯è§†åŒ–ç•Œé¢ã€‚
```



> å¦‚ä½•çœ‹ç›‘æµ‹æ•°æ®ï¼š7è‰² 1åœˆ 1çº¿

å‚è€ƒï¼š [Hystrixä»ªè¡¨ç›˜ç›‘æ§HystrixDashboard](https://www.cnblogs.com/coding-farmer/p/12032403.html)

```
7è‰²ï¼š
	ç»¿ æˆåŠŸè‰²
	è“ ç†”æ–­æ•°
	é’ é”™è¯¯è¯·æ±‚æ•°
	é»„ è¶…æ—¶æ•°
	ç´« çº¿ç¨‹æ‹’ç»æ•°
	çº¢ å¤±è´¥/å¼‚å¸¸æ•°
	ç° æœ€è¿‘10sé”™è¯¯ç™¾åˆ†æ¯”

å®å¿ƒåœ†ï¼šå…±æœ‰ä¸¤ç§å«ä¹‰ã€‚å®ƒé€šè¿‡é¢œè‰²çš„å˜åŒ–ä»£è¡¨äº†å®ä¾‹çš„å¥åº·ç¨‹åº¦ï¼Œå®ƒçš„å¥åº·åº¦ä»ç»¿è‰²<é»„è‰²<æ©™è‰²<çº¢è‰²é€’å‡ã€‚
è¯¥å®å¿ƒåœ†é™¤äº†é¢œè‰²çš„å˜åŒ–ä¹‹å¤–ï¼Œå®ƒçš„å¤§å°ä¹Ÿä¼šæ ¹æ®å®ä¾‹çš„è¯·æ±‚æµé‡å‘ç”Ÿå˜åŒ–ï¼Œæµé‡è¶Šå¤§è¯¥å®å¿ƒåœ†å°±è¶Šå¤§ã€‚æ‰€ä»¥é€šè¿‡è¯¥å®å¿ƒåœ†çš„å±•ç¤ºï¼Œå°±å¯ä»¥åœ¨å¤§é‡çš„å®ä¾‹ä¸­å¿«é€Ÿçš„å‘ç° æ•…éšœå®ä¾‹å’Œé«˜å‹åŠ›å®ä¾‹ã€‚

æ›²çº¿ï¼šç”¨æ¥è®°å½•2åˆ†é’Ÿå†…æµé‡çš„ç›¸å¯¹å˜åŒ–ï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥è§‚å¯Ÿåˆ°æµé‡çš„ä¸Šå‡å’Œä¸‹é™è¶‹åŠ¿ã€‚
```



#### Zuulè·¯ç”±ç½‘å…³

ZuulåŒ…å«äº†å¯¹è¯·æ±‚çš„è·¯ç”±å’Œè¿‡æ»¤ä¸¤ä¸ªæœ€ä¸»è¦çš„åŠŸèƒ½ï¼š

```
å…¶ä¸­è·¯ç”±åŠŸèƒ½è´Ÿè´£å°†å¤–éƒ¨è¯·æ±‚è½¬å‘åˆ°å…·ä½“çš„å¾®æœåŠ¡å®ä¾‹ä¸Šï¼Œæ˜¯å®ç°å¤–éƒ¨è®¿é—®ç»Ÿä¸€å…¥å£çš„åŸºç¡€è€Œè¿‡æ»¤å™¨åŠŸèƒ½åˆ™è´Ÿè´£å¯¹è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹è¿›è¡Œå¹²é¢„ï¼Œæ˜¯å®ç°è¯·æ±‚æ ¡éªŒã€æœåŠ¡èšåˆç­‰åŠŸèƒ½çš„åŸºç¡€.

Zuulå’ŒEurekaè¿›è¡Œæ•´åˆï¼Œå°†Zuulè‡ªèº«æ³¨å†Œä¸ºEurekaæœåŠ¡æ²»ç†ä¸‹çš„åº”ç”¨ï¼ŒåŒæ—¶ä»Eurekaä¸­è·å¾—å…¶ä»–å¾®æœåŠ¡çš„æ¶ˆæ¯ï¼Œä¹Ÿå³ä»¥åçš„è®¿é—®å¾®æœåŠ¡éƒ½æ˜¯é€šè¿‡Zuulè·³è½¬åè·å¾—ã€‚

æ³¨æ„ï¼šZuulæœåŠ¡æœ€ç»ˆè¿˜æ˜¯ä¼šæ³¨å†Œè¿›Eureka

æä¾›=ä»£ç†+è·¯ç”±+è¿‡æ»¤ä¸‰å¤§åŠŸèƒ½
```

 

 

#### Configåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ

> æ˜¯ä»€ä¹ˆ

```
SpringCloud Configä¸ºå¾®æœåŠ¡æ¶æ„ä¸­çš„å¾®æœåŠ¡æä¾›é›†ä¸­åŒ–çš„å¤–éƒ¨é…ç½®æ”¯æŒï¼Œé…ç½®æœåŠ¡å™¨ä¸ºå„ä¸ªä¸åŒå¾®æœåŠ¡åº”ç”¨çš„æ‰€æœ‰ç¯å¢ƒæä¾›äº†ä¸€ä¸ªä¸­å¿ƒåŒ–çš„å¤–éƒ¨é…ç½®ã€‚
```



> æ€ä¹ˆç©

```
SpringCloud Configåˆ†ä¸ºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¸¤éƒ¨åˆ†ã€‚

æœåŠ¡ç«¯ä¹Ÿç§°ä¸ºåˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒï¼Œå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡åº”ç”¨ï¼Œç”¨æ¥è¿æ¥é…ç½®æœåŠ¡å™¨å¹¶ä¸ºå®¢æˆ·ç«¯æä¾›è·å–é…ç½®ä¿¡æ¯,åŠ å¯†/è§£å¯†ä¿¡æ¯ç­‰è®¿é—®æ¥å£

å®¢æˆ·ç«¯åˆ™æ˜¯é€šè¿‡æŒ‡å®šçš„é…ç½®ä¸­å¿ƒæ¥ç®¡ç†åº”ç”¨èµ„æºï¼Œä»¥åŠä¸ä¸šåŠ¡ç›¸å…³çš„é…ç½®å†…å®¹,å¹¶åœ¨å¯åŠ¨çš„æ—¶å€™ä»é…ç½®ä¸­å¿ƒè·å–å’ŒåŠ è½½é…ç½®ä¿¡æ¯
é…ç½®æœåŠ¡å™¨é»˜è®¤é‡‡ç”¨gitæ¥å­˜å‚¨é…ç½®ä¿¡æ¯,è¿™æ ·å°±æœ‰åŠ©äºå¯¹ç¯å¢ƒé…ç½®è¿›è¡Œç‰ˆæœ¬ç®¡ç†,å¹¶ä¸”å¯ä»¥é€šè¿‡gitå®¢æˆ·ç«¯å·¥å…·æ¥æ–¹ä¾¿çš„ç®¡ç†å’Œè®¿é—®é…ç½®å†…å®¹ã€‚
```



> åˆ†å¸ƒå¼é¢ä¸´çš„é…ç½®é—®é¢˜

```
å¾®æœåŠ¡æ„å‘³ç€è¦å°†å•ä½“åº”ç”¨ä¸­çš„ä¸šåŠ¡æ‹†åˆ†æˆä¸€ä¸ªä¸ª å­æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡çš„ç²’åº¦ç›¸å¯¹è¾ƒå°ï¼Œå› æ­¤ç³»ç»Ÿä¸­ä¼šå‡ºç°å¤§é‡çš„æœåŠ¡ã€‚ç”±äºæ¯ä¸ª
æœåŠ¡éƒ½éœ€è¦å¿…è¦çš„é…ç½®ä¿¡æ¯æ‰èƒ½è¿è¡Œï¼Œæ‰€ä»¥ä¸€é›†ä¸­å¼çš„ã€åŠ¨æ€çš„é…ç½®ç®¡ç†è®¾æ–½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚SpringCloudæä¾› äº†
ConfigServeræ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¯ä¸€ä¸ªå¾®æœåŠ¡è‡ªå·±å¸¦ç€ä¸€ ä¸ªapplication.yml,. ä¸Šç™¾ä¸ªé…ç½®æ–‡ä»¶çš„ç®¡ç†...

ConfigæŸ¥çœ‹é…ç½®ä¿¡æ¯ï¼šhttp://127.0.0.1:3344/application-dev.yml
```



> bootstrap.yml

```
applicaiton.ymlæ˜¯ç”¨æˆ·çº§çš„èµ„æºé…ç½®é¡¹
bootstrap.ymlæ˜¯ç³»ç»Ÿçº§çš„ï¼Œä¼˜å…ˆçº§æ›´åŠ é«˜

Spring Cloudä¼šåˆ›å»ºä¸€ä¸ªBootstrap Context',ä½œä¸ºSpringåº”ç”¨çš„Application Context'çš„çˆ¶ä¸Šä¸‹æ–‡ã€‚
åˆå§‹åŒ–çš„æ—¶å€™,Bootstrap Contextè´Ÿè´£ä»å¤–éƒ¨æºåŠ è½½é…ç½®å±æ€§å¹¶è§£æé…ç½®ã€‚è¿™ä¸¤ä¸ªä¸Šä¸‹æ–‡å…±äº«ä¸€ä¸ªä»å¤–éƒ¨è·å–çš„â€œEnvironment'ã€‚
Bootstrap'å±æ€§æœ‰é«˜ä¼˜å…ˆçº§,é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬ä¸ä¼šè¢«æœ¬åœ°é…ç½®è¦†ç›–ã€‚'Bootstrap context'å’ŒApplication Context'æœ‰ç€ä¸åŒçš„çº¦å®š,æ‰€ä»¥æ–°å¢äº†ä¸€ä¸ªbootstrap.ymlæ–‡ä»¶, ä¿è¯Bootstrap Context'å’ŒApplication Context'é…ç½®çš„åˆ†ç¦»ã€‚
```













